"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7316],{7006:(e,t,r)=>{r.d(t,{A:()=>h});var s=r(5155),l=r(2115),n=r(6932),i=r(6046),a=r(1536);let o=()=>{let[e,t]=(0,l.useState)(!1),{user:r,logout:o}=(0,n.A)(),c=(0,i.useRouter)(),[d,u]=(0,l.useState)("");return(0,l.useEffect)(()=>{if(console.log("Current user data:",r),r&&"object"==typeof r){let e=r.name||r.FullName||r.fullName||r.username;e&&"string"==typeof e&&""!==e.trim()?u(e):(u("User"),console.warn("User name not found in user object:",r))}else u("User")},[r]),(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();console.log("Fetched user data:",t)}}catch(e){console.error("Error fetching user data:",e)}})()},[]),(0,s.jsx)("nav",{className:"bg-[#E22345] shadow-md fixed w-full z-10",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("span",{className:"text-xl font-semibold text-white",children:"Dashboard"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{className:"p-2 rounded-full hover:bg-red-600",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:()=>{t(!e)},className:"flex items-center space-x-2 text-white bg-red-600 hover:bg-red-700 py-2 px-3 rounded-full focus:outline-none transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-white text-red-600 font-semibold mr-2",children:d&&"User"!==d?d.charAt(0).toUpperCase():"U"}),(0,s.jsx)("span",{className:"hidden md:inline",children:d||"User"}),(0,s.jsx)(a.z44,{className:"ml-2"})]})}),e&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:[(0,s.jsx)("button",{onClick:()=>{c.push("/profile"),t(!1)},className:"block w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"mr-3 h-5 w-5 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,s.jsx)("p",{className:"text-black",children:"Profile Settings"})]})}),(0,s.jsx)("button",{onClick:()=>{o(),t(!1)},className:"block w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"mr-3 h-5 w-5 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,s.jsx)("p",{className:"text-black",children:"Logout"})]})})]})]})]})]})})})};var c=r(8173),d=r.n(c);let u=()=>{let{user:e}=(0,n.A)(),[t,r]=(0,l.useState)(null),i=[{title:"Dashboard",icon:(0,s.jsx)(a.rQ8,{}),path:"/dashboard"},{section:"Pelayanan Medis",items:[{title:"Kunjungan",icon:(0,s.jsx)(a.gUT,{}),path:"/visits",roles:["ADMIN","DOCTOR"]},{title:"Pemeriksaan",icon:(0,s.jsx)(a.REg,{}),path:"/examinations",roles:["DOCTOR"]}]},{title:"Pasien",icon:(0,s.jsx)(a.AvB,{}),path:"/patients"},{title:"Dokter",icon:(0,s.jsx)(a.ifA,{}),path:"/doctors"},{title:"Klinik",icon:(0,s.jsx)(a.dr3,{}),path:"/clinics"},((null==e?void 0:e.role)==="ADMIN"||(null==e?void 0:e.role)==="admin")&&{title:"Pengguna",icon:(0,s.jsx)(a.YXz,{}),path:"/users"},(null==e?void 0:e.role)==="ADMIN"&&{title:"Settings",icon:(0,s.jsx)(a.Pcn,{}),path:"/settings"},(null==e?void 0:e.role)==="PHARMACIST"&&{title:"Farmasi",icon:(0,s.jsx)(a.I1M,{}),path:"/pharmacy"},{title:"Laboratorium",icon:(0,s.jsx)(a.XcJ,{}),submenu:[{title:"Hasil Laboratorium",path:"/laboratory/results"}]}].filter(Boolean),o=e=>{r(t===e?null:e)};return(0,s.jsx)("div",{className:"bg-[#E22345] text-white w-64 min-h-screen fixed left-0",children:(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-8",children:"Admin Panel"}),(0,s.jsx)("ul",{children:i.map((e,r)=>(0,s.jsx)("li",{className:"mb-4",children:e.section?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-sm font-semibold mb-2 px-2 text-gray-300",children:e.section}),(0,s.jsx)("ul",{className:"ml-2",children:e.items.map((e,t)=>(0,s.jsx)("li",{className:"mb-2",children:(0,s.jsxs)(d(),{href:e.path,className:"flex items-center p-2 rounded-lg hover:bg-gray-700 transition-colors",children:[(0,s.jsx)("span",{className:"mr-3",children:e.icon}),(0,s.jsx)("span",{children:e.title})]})},t))})]}):e.submenu?(0,s.jsxs)("div",{children:[(0,s.jsxs)("button",{onClick:()=>o(e.title),className:"w-full flex items-center justify-between p-2 rounded-lg hover:bg-gray-700 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mr-3",children:e.icon}),(0,s.jsx)("span",{children:e.title})]}),(0,s.jsx)("span",{children:t===e.title?(0,s.jsx)(a.Ucs,{size:12}):(0,s.jsx)(a.Vr3,{size:12})})]}),t===e.title&&(0,s.jsx)("ul",{className:"ml-8 mt-2",children:e.submenu.map((e,t)=>(0,s.jsx)("li",{className:"mb-2",children:(0,s.jsx)(d(),{href:e.path,className:"flex items-center p-2 rounded-lg hover:bg-gray-700 transition-colors text-sm",children:e.title})},t))})]}):(0,s.jsxs)(d(),{href:e.path,className:"flex items-center p-2 rounded-lg hover:bg-gray-700 transition-colors",children:[(0,s.jsx)("span",{className:"mr-3",children:e.icon}),(0,s.jsx)("span",{children:e.title})]})},r))})]})})},m=()=>{let[e,t]=(0,l.useState)(new Date);return(0,l.useEffect)(()=>{let e=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(e)},[]),(0,s.jsx)("footer",{className:"bg-[#E22345] shadow-md mt-auto fixed bottom-0 right-0 w-[calc(100%-16rem)] h-16 z-10",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto py-4 px-4 h-full flex justify-between items-center",children:[(0,s.jsx)("div",{className:"text-white",children:"\xa9 2025 Your Company. All rights reserved."}),(0,s.jsx)("div",{className:"text-white font-medium",children:e.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})})},h=e=>{let{children:t}=e;return(0,s.jsxs)("div",{className:"flex min-h-screen bg-gray-100",children:[(0,s.jsx)(u,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col ml-64",children:[(0,s.jsx)(o,{}),(0,s.jsx)("main",{className:"flex-1 p-6 mt-16 pb-24 min-h-[calc(100vh-4rem)]",children:t}),(0,s.jsx)(m,{})]})]})}},6932:(e,t,r)=>{r.d(t,{A:()=>o,Providers:()=>c});var s=r(5155),l=r(2115),n=r(6046),i=r(5037);let a=(0,l.createContext)();function o(){return(0,l.useContext)(a)}function c(e){let{children:t}=e,[r,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0),u=(0,n.useRouter)(),m=(0,n.usePathname)(),[h,x]=(0,l.useState)(Date.now());(0,l.useEffect)(()=>{f();let e=()=>{x(Date.now())};window.addEventListener("mousemove",e),window.addEventListener("keypress",e),window.addEventListener("click",e),window.addEventListener("scroll",e);let t=setInterval(()=>{Date.now()-h>=3e5&&p()},3e4);return()=>{window.removeEventListener("mousemove",e),window.removeEventListener("keypress",e),window.removeEventListener("click",e),window.removeEventListener("scroll",e),clearInterval(t)}},[m,h]);let f=async()=>{try{let e=await fetch("/api/auth/me"),t=await e.json();o(t)}catch(e){console.error("Auth check failed:",e),o(null)}finally{d(!1)}},p=async()=>{try{if(!(await fetch("/api/auth/logout",{method:"POST",credentials:"include"})).ok)throw Error("Logout request failed");o(null),i.Ay.error("Sesi Anda telah berakhir. Silakan login kembali."),u.push("/login")}catch(e){console.error("Logout failed:",e),o(null),i.Ay.error("Sesi Anda telah berakhir. Silakan login kembali."),u.push("/login")}},j=async()=>{try{if(!(await fetch("/api/auth/logout",{method:"POST",credentials:"include"})).ok)throw Error("Logout request failed");o(null),u.push("/login")}catch(e){console.error("Logout failed:",e),o(null),u.push("/login")}};return c?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#E22345]"})}):(0,s.jsxs)(a.Provider,{value:{user:r,setUser:o,logout:j},children:[t,(0,s.jsx)(i.l$,{position:"top-right"})]})}},3435:(e,t,r)=>{r.d(t,{k5:()=>d});var s=r(2115),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(l),i=["attr","size","title"];function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var s,l;s=t,l=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in e?Object.defineProperty(e,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[s]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(u,a({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:l,size:n,title:o}=e,d=function(e,t){if(null==e)return{};var r,s,l=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}(e,i),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==n?s.createElement(n.Consumer,null,e=>t(e)):t(l)}}}]);