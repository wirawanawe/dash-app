(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6654],{8242:(e,a,s)=>{Promise.resolve().then(s.bind(s,818))},5e3:(e,a,s)=>{"use strict";s.d(a,{A:()=>l});var r=s(5155),i=s(2115),t=s(6046),n=s(5037);function l(e){let{patient:a,isEdit:s=!1}=e,l=(0,t.useRouter)(),[d,c]=(0,i.useState)(!1),[o,m]=(0,i.useState)({name:"",nik:"",birthDate:"",gender:"",address:"",phone:"",email:"",provinceId:"",provinceName:"",cityId:"",cityName:"",districtId:"",districtName:"",villageId:"",villageName:"",postalCode:"",companyId:"",insurance:{provider:"",number:"",type:"",status:"Aktif"}});(0,i.useEffect)(()=>{a&&m({name:a.name||"",nik:a.nik||"",birthDate:a.birthDate?a.birthDate.split("T")[0]:"",gender:a.gender||"",address:a.address||"",phone:a.phone||"",email:a.email||"",provinceId:a.provinceId||"",provinceName:a.provinceName||"",cityId:a.cityId||"",cityName:a.cityName||"",districtId:a.districtId||"",districtName:a.districtName||"",villageId:a.villageId||"",villageName:a.villageName||"",postalCode:a.postalCode||"",companyId:a.companyId||"",insurance:a.insurance||{provider:"",number:"",type:"",status:"Aktif"}})},[a]);let u=e=>{let{name:a,value:s}=e.target;if(a.startsWith("insurance.")){let e=a.split(".")[1];m(a=>({...a,insurance:{...a.insurance,[e]:s}}))}else m(e=>({...e,[a]:s}))},b=async e=>{e.preventDefault(),c(!0);try{let e=s?"/api/patients/".concat(a.id):"/api/patients",r=await fetch(e,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),i=await r.json();if(!r.ok)throw Error(i.error||"Gagal menyimpan data pasien");n.Ay.success(s?"Data berhasil diperbarui":"Data berhasil disimpan"),l.push("/patients")}catch(e){console.error("Error:",e),n.Ay.error(e.message)}finally{c(!1)}};return(0,r.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Data Pribadi"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Lengkap"}),(0,r.jsx)("input",{type:"text",name:"name",value:o.name,onChange:u,required:!0,className:"mt-1 block w-full rounded-md border focus:border-[#E22345] focus:ring-[#E22345]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"NIK"}),(0,r.jsx)("input",{type:"text",name:"nik",value:o.nik,onChange:u,required:!0,className:"mt-1 block w-full rounded-md border focus:border-[#E22345] focus:ring-[#E22345]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Lahir"}),(0,r.jsx)("input",{type:"date",name:"birthDate",value:o.birthDate,onChange:u,required:!0,className:"mt-1 block w-full rounded-md border focus:border-[#E22345] focus:ring-[#E22345]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Jenis Kelamin"}),(0,r.jsxs)("select",{name:"gender",value:o.gender,onChange:u,required:!0,className:"mt-1 block w-full rounded-md border focus:border-[#E22345] focus:ring-[#E22345]",children:[(0,r.jsx)("option",{value:"",children:"Pilih Jenis Kelamin"}),(0,r.jsx)("option",{value:"Laki-laki",children:"Laki-laki"}),(0,r.jsx)("option",{value:"Perempuan",children:"Perempuan"})]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Data Kontak"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Alamat"}),(0,r.jsx)("textarea",{name:"address",value:o.address,onChange:u,rows:3,className:"mt-1 block w-full rounded-md border focus:border-[#E22345] focus:ring-[#E22345]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"No. Telepon"}),(0,r.jsx)("input",{type:"tel",name:"phone",value:o.phone,onChange:u,className:"mt-1 block w-full rounded-md border focus:border-[#E22345] focus:ring-[#E22345]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",value:o.email,onChange:u,className:"mt-1 block w-full rounded-md border focus:border-[#E22345] focus:ring-[#E22345]"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Data Asuransi"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Provider Asuransi"}),(0,r.jsx)("input",{type:"text",name:"insurance.provider",value:o.insurance.provider,onChange:u,className:"mt-1 block w-full rounded-md border focus:border-[#E22345] focus:ring-[#E22345]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nomor Asuransi"}),(0,r.jsx)("input",{type:"text",name:"insurance.number",value:o.insurance.number,onChange:u,className:"mt-1 block w-full rounded-md border focus:border-[#E22345] focus:ring-[#E22345]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tipe Asuransi"}),(0,r.jsx)("input",{type:"text",name:"insurance.type",value:o.insurance.type,onChange:u,className:"mt-1 block w-full rounded-md border focus:border-[#E22345] focus:ring-[#E22345]"})]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>l.back(),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Batal"}),(0,r.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 text-white bg-[#E22345] rounded-md hover:bg-red-600 disabled:bg-gray-400",children:d?"Menyimpan...":s?"Update":"Simpan"})]})]})}},818:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var r=s(5155),i=s(2115),t=s(6046),n=s(7006),l=s(5e3),d=s(5037);function c(){let e=(0,t.useParams)(),[a,s]=(0,i.useState)(null),[c,o]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{let a=async()=>{try{let a=await fetch("/api/patients/".concat(e.id)),r=await a.json();if(!a.ok)throw Error(r.error||"Gagal mengambil data pasien");s(r)}catch(e){console.error("Error:",e),d.Ay.error(e.message)}finally{o(!1)}};e.id&&a()},[e.id]),c)?(0,r.jsx)(n.A,{children:(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#E22345]"})})}):(0,r.jsx)(n.A,{children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Edit Data Pasien"}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsx)(l.A,{patient:a,isEdit:!0})})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[6711,5037,1028,7316,8441,1517,7358],()=>a(8242)),_N_E=e.O()}]);