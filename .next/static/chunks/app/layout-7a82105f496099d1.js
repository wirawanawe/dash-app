(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{5890:(e,t,r)=>{Promise.resolve().then(r.bind(r,6932)),Promise.resolve().then(r.t.bind(r,9461,23)),Promise.resolve().then(r.t.bind(r,9324,23))},6932:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,Providers:()=>u});var n=r(5155),o=r(2115),a=r(6046),s=r(5037);let i=(0,o.createContext)();function l(){return(0,o.useContext)(i)}function u(e){let{children:t}=e,[r,l]=(0,o.useState)(null),[u,c]=(0,o.useState)(!0),d=(0,a.useRouter)(),h=(0,a.usePathname)(),[m,w]=(0,o.useState)(Date.now());(0,o.useEffect)(()=>{v();let e=()=>{w(Date.now())};window.addEventListener("mousemove",e),window.addEventListener("keypress",e),window.addEventListener("click",e),window.addEventListener("scroll",e);let t=setInterval(()=>{Date.now()-m>=3e5&&f()},3e4);return()=>{window.removeEventListener("mousemove",e),window.removeEventListener("keypress",e),window.removeEventListener("click",e),window.removeEventListener("scroll",e),clearInterval(t)}},[h,m]);let v=async()=>{try{let e=await fetch("/api/auth/me"),t=await e.json();l(t)}catch(e){console.error("Auth check failed:",e),l(null)}finally{c(!1)}},f=async()=>{try{if(!(await fetch("/api/auth/logout",{method:"POST",credentials:"include"})).ok)throw Error("Logout request failed");l(null),s.Ay.error("Sesi Anda telah berakhir. Silakan login kembali."),d.push("/login")}catch(e){console.error("Logout failed:",e),l(null),s.Ay.error("Sesi Anda telah berakhir. Silakan login kembali."),d.push("/login")}},k=async()=>{try{if(!(await fetch("/api/auth/logout",{method:"POST",credentials:"include"})).ok)throw Error("Logout request failed");l(null),d.push("/login")}catch(e){console.error("Logout failed:",e),l(null),d.push("/login")}};return u?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#E22345]"})}):(0,n.jsxs)(i.Provider,{value:{user:r,setUser:l,logout:k},children:[t,(0,n.jsx)(s.l$,{position:"top-right"})]})}},6046:(e,t,r)=>{"use strict";var n=r(6658);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},9324:()=>{},9461:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}}},e=>{var t=t=>e(e.s=t);e.O(0,[5020,5037,8441,1517,7358],()=>t(5890)),_N_E=e.O()}]);