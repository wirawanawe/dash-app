(()=>{var e={};e.id=8773,e.ids=[8773],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},1681:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=a(70260),r=a(28203),i=a(25155),n=a.n(i),l=a(67292),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["patients",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,41295)),"/Volumes/Data-2/PHC/Project/dash-app/app/patients/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,38301)),"/Volumes/Data-2/PHC/Project/dash-app/app/layout.js"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Volumes/Data-2/PHC/Project/dash-app/app/patients/page.js"],p={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/patients/page",pathname:"/patients",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},75837:(e,t,a)=>{Promise.resolve().then(a.bind(a,41295))},3453:(e,t,a)=>{Promise.resolve().then(a.bind(a,80159))},80159:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(45512),r=a(58009),i=a(79334),n=a(28531),l=a.n(n),o=a(44098),d=a(22403),c=a(52964);function p({patients:e,onDelete:t,onRefresh:a}){let[i,n]=(0,r.useState)(!1),c=async e=>{if(confirm("Apakah Anda yakin ingin menghapus pasien ini?")){n(!0);try{let t=await fetch(`/api/patients/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Gagal menghapus pasien")}d.Ay.success("Pasien berhasil dihapus"),a&&a()}catch(e){console.error("Error:",e),d.Ay.error(e.message)}finally{n(!1)}}},p=e=>new Date(e).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric"});return(0,s.jsx)("div",{className:"overflow-x-auto ",children:(0,s.jsxs)("table",{className:"min-w-full bg-white rounded-lg",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. RM"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NIP"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"NIK"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal Lahir"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jenis Kelamin"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asuransi"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.mrn}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.nip}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.nik}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p(e.birthDate)}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.gender}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.nip?"Karyawan PLN":"-"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)(l(),{href:`/patients/${e.id}`,className:"text-blue-600 hover:text-blue-900",children:(0,s.jsx)(o.Ny1,{className:"h-5 w-5"})}),(0,s.jsx)(l(),{href:`/patients/${e.id}/edit`,className:"text-yellow-600 hover:text-yellow-900",children:(0,s.jsx)(o.uO9,{className:"h-5 w-5"})}),(0,s.jsx)("button",{onClick:()=>c(e.id),disabled:i,className:"text-red-600 hover:text-red-900 disabled:text-gray-400",children:(0,s.jsx)(o.qbC,{className:"h-5 w-5"})})]})})]},e.id))})]})})}function x(){(0,i.useRouter)();let[e,t]=(0,r.useState)([]),[a,l]=(0,r.useState)(!0),[x,m]=(0,r.useState)(""),[h,u]=(0,r.useState)(1),[g,b]=(0,r.useState)(0),[y,f]=(0,r.useState)({}),[j,w]=(0,r.useState)(10),v=async()=>{try{l(!0);let e=await fetch(`/api/patients?search=${x}&page=${h}&limit=${j}`);if(!e.ok)throw Error("Gagal mengambil data pasien");let a=e.headers.get("content-type");if(!a||!a.includes("application/json"))throw Error("Invalid response format");let s=await e.json();if(!s.data)throw Error("Invalid data format");t(s.data),f(s.pagination||{}),b(s.pagination?.totalPages||0)}catch(e){console.error("Error:",e),d.Ay.error(e.message||"Terjadi kesalahan saat mengambil data"),t([]),f({}),b(0)}finally{l(!1)}};return(0,s.jsx)(c.A,{children:(0,s.jsxs)("div",{className:"container mx-auto px-4 pb-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Daftar Pasien"}),(0,s.jsxs)(n,{href:"/patients/new",className:"bg-[#E22345] text-white px-4 py-2 rounded-lg hover:bg-red-600 flex items-center",children:[(0,s.jsx)(o.OiG,{className:"mr-2"}),"Tambah Pasien"]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Cari pasien...",value:x,onChange:e=>{m(e.target.value),u(1)},className:"w-full px-4 py-2 rounded-lg text-black border focus:outline-none focus:ring-2 focus:ring-[#E22345] pl-10"}),(0,s.jsx)(o.KSO,{className:"absolute left-3 top-3 text-gray-400"})]})}),a?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#E22345]"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p,{patients:e,onRefresh:v}),(0,s.jsxs)("div",{className:"mt-6 mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-700",children:["Menampilkan ",(h-1)*j+1," -"," ",Math.min(h*j,y.total||0)," dari"," ",y.total||0," data"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{htmlFor:"limit",className:"text-sm text-gray-700",children:"Data per halaman:"}),(0,s.jsxs)("select",{id:"limit",value:j,onChange:e=>{w(parseInt(e.target.value)),u(1)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-[#E22345] focus:border-transparent",children:[(0,s.jsx)("option",{value:5,children:"5"}),(0,s.jsx)("option",{value:10,children:"10"}),(0,s.jsx)("option",{value:25,children:"25"}),(0,s.jsx)("option",{value:50,children:"50"}),(0,s.jsx)("option",{value:100,children:"100"})]})]})]}),g>1&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{onClick:()=>u(1),disabled:1===h,className:"p-2 rounded-md border border-gray-300 text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white",title:"Halaman pertama",children:(0,s.jsx)(o.X8f,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>u(h-1),disabled:1===h,className:"p-2 rounded-md border border-gray-300 text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white",title:"Halaman sebelumnya",children:(0,s.jsx)(o._Jj,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:(()=>{if(g<=1)return[1];let e=[],t=[];for(let t=Math.max(2,h-2);t<=Math.min(g-1,h+2);t++)e.push(t);return g>0&&t.push(1),h-2>2&&t.push("..."),e.forEach(e=>{1!==e&&e!==g&&t.push(e)}),h+2<g-1&&t.push("..."),g>1&&t.push(g),t.filter((e,t,a)=>a.indexOf(e)===t)})().map((e,t)=>(0,s.jsx)("button",{onClick:()=>"number"==typeof e&&u(e),disabled:"..."===e,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${e===h?"bg-[#E22345] text-white border border-[#E22345]":"..."===e?"text-gray-400 cursor-default":"text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:e},t))}),(0,s.jsx)("button",{onClick:()=>u(h+1),disabled:h===g,className:"p-2 rounded-md border border-gray-300 text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white",title:"Halaman selanjutnya",children:(0,s.jsx)(o.X6T,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>u(g),disabled:h===g,className:"p-2 rounded-md border border-gray-300 text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white",title:"Halaman terakhir",children:(0,s.jsx)(o.eaw,{className:"w-4 h-4"})})]})]})]})]})})}},41295:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Volumes/Data-2/PHC/Project/dash-app/app/patients/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Data-2/PHC/Project/dash-app/app/patients/page.js","default")}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[5994,4763,8077,8531,4098,5132],()=>a(1681));module.exports=s})();