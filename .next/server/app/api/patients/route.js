/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/patients/route";
exports.ids = ["app/api/patients/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!****************************************************!*\
  !*** ./node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \****************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpatients%2Froute&page=%2Fapi%2Fpatients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpatients%2Froute.js&appDir=%2FVolumes%2FData-2%2FPHC%2FProject%2Fdash-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FData-2%2FPHC%2FProject%2Fdash-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpatients%2Froute&page=%2Fapi%2Fpatients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpatients%2Froute.js&appDir=%2FVolumes%2FData-2%2FPHC%2FProject%2Fdash-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FData-2%2FPHC%2FProject%2Fdash-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Volumes_Data_2_PHC_Project_dash_app_app_api_patients_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/patients/route.js */ \"(rsc)/./app/api/patients/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/patients/route\",\n        pathname: \"/api/patients\",\n        filename: \"route\",\n        bundlePath: \"app/api/patients/route\"\n    },\n    resolvedPagePath: \"/Volumes/Data-2/PHC/Project/dash-app/app/api/patients/route.js\",\n    nextConfigOutput,\n    userland: _Volumes_Data_2_PHC_Project_dash_app_app_api_patients_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwYXRpZW50cyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcGF0aWVudHMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwYXRpZW50cyUyRnJvdXRlLmpzJmFwcERpcj0lMkZWb2x1bWVzJTJGRGF0YS0yJTJGUEhDJTJGUHJvamVjdCUyRmRhc2gtYXBwJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZWb2x1bWVzJTJGRGF0YS0yJTJGUEhDJTJGUHJvamVjdCUyRmRhc2gtYXBwJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNjO0FBQzNGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVm9sdW1lcy9EYXRhLTIvUEhDL1Byb2plY3QvZGFzaC1hcHAvYXBwL2FwaS9wYXRpZW50cy9yb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcGF0aWVudHMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wYXRpZW50c1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcGF0aWVudHMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVm9sdW1lcy9EYXRhLTIvUEhDL1Byb2plY3QvZGFzaC1hcHAvYXBwL2FwaS9wYXRpZW50cy9yb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpatients%2Froute&page=%2Fapi%2Fpatients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpatients%2Froute.js&appDir=%2FVolumes%2FData-2%2FPHC%2FProject%2Fdash-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FData-2%2FPHC%2FProject%2Fdash-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/patients/route.js":
/*!***********************************!*\
  !*** ./app/api/patients/route.js ***!
  \***********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.js\");\n\n // Gunakan db.js bukan prisma.js\n // Import helper functions\n// atau import { getPatients } from \"@/lib/prisma\"; // Jika menggunakan helper yang diperbarui\n// Helper function to add delay between requests\nconst delay = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\n// Helper function to fetch with retry\nasync function fetchWithRetry(url, options, maxRetries = 3) {\n    for(let i = 0; i < maxRetries; i++){\n        try {\n            const response = await fetch(url, {\n                ...options,\n                timeout: 30000\n            });\n            return response;\n        } catch (error) {\n            console.log(`Attempt ${i + 1} failed:`, error.message);\n            if (i === maxRetries - 1) {\n                throw error; // Throw on last attempt\n            }\n            // Wait before retrying (exponential backoff)\n            await delay(Math.pow(2, i) * 1000);\n        }\n    }\n}\n// GET all patients from external API\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const search = searchParams.get(\"search\") || \"\";\n        const page = parseInt(searchParams.get(\"page\") || \"1\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"10\");\n        let allPatients = [];\n        let totalFromAPI = 0;\n        if (search) {\n            // When searching, fetch all data to search across all records\n            // We'll fetch data in smaller batches with delays to avoid overwhelming the API\n            let currentPage = 1;\n            let hasMoreData = true;\n            const batchSize = 50; // Reduced batch size to be gentler on the API\n            const delayBetweenRequests = 500; // 500ms delay between requests\n            try {\n                while(hasMoreData){\n                    const apiUrl = `http://api-klinik.doctorphc.id/pasien?page=${currentPage}&limit=${batchSize}`;\n                    console.log(`Fetching batch ${currentPage} for search: ${search}`);\n                    const response = await fetchWithRetry(apiUrl, {\n                        method: \"GET\",\n                        headers: {\n                            \"Content-Type\": \"application/json\"\n                        }\n                    });\n                    if (!response.ok) {\n                        console.error(`API responded with status: ${response.status}`);\n                        break;\n                    }\n                    const externalData = await response.json();\n                    // Process the external data - the API returns data in a specific format\n                    let rawPatients = [];\n                    if (externalData.data && Array.isArray(externalData.data)) {\n                        rawPatients = externalData.data;\n                    } else if (Array.isArray(externalData)) {\n                        rawPatients = externalData;\n                    }\n                    if (rawPatients.length === 0) {\n                        hasMoreData = false;\n                        break;\n                    }\n                    // Transform the external API data to match our expected format\n                    const transformedPatients = rawPatients.map((patient)=>({\n                            id: patient.No_MR,\n                            mrn: patient.No_MR,\n                            name: patient.Nama_Pasien,\n                            gender: patient.Jenis_Kelamin?.[0]?.name || \"-\",\n                            birthDate: patient.Tgl_Lahir ? patient.Tgl_Lahir.split(\" \")[0] : null,\n                            nik: patient.Identitas?.find((id)=>id.type === \"nik\")?.id || \"\",\n                            nip: patient.Identitas?.find((id)=>id.type === \"nip\")?.id || \"\",\n                            phone: \"\",\n                            address: patient.Alamat_Rumah?.[0]?.Alamat || \"\",\n                            city: patient.Alamat_Rumah?.[0]?.Kota?.[0]?.name || \"\",\n                            province: patient.Alamat_Rumah?.[0]?.Propinsi?.[0]?.name || \"\",\n                            bloodType: patient.Golongan_Darah?.[0]?.name || \"-\",\n                            religion: patient.Agama?.[0]?.name || \"-\",\n                            maritalStatus: patient.Status_Marital?.[0]?.name || \"-\",\n                            occupation: patient.Pekerjaan?.[0]?.name || \"-\",\n                            education: patient.Pendidikan?.[0]?.name || \"-\",\n                            created_at: patient.audittrail?.CreatedDate || null,\n                            updated_at: patient.audittrail?.LastModifiedDate || null\n                        }));\n                    allPatients.push(...transformedPatients);\n                    // Check if we should continue fetching\n                    if (rawPatients.length < batchSize) {\n                        hasMoreData = false;\n                    } else {\n                        currentPage++;\n                    }\n                    // Add a safety limit to prevent infinite loops and too many requests\n                    if (currentPage > 50) {\n                        // Max 2,500 records (50 pages * 50 per page)\n                        console.log(\"Reached maximum page limit for search\");\n                        hasMoreData = false;\n                    }\n                    // Add delay between requests to prevent overwhelming the API\n                    if (hasMoreData) {\n                        await delay(delayBetweenRequests);\n                    }\n                }\n                console.log(`Search completed. Found ${allPatients.length} total patients to filter`);\n            } catch (fetchError) {\n                console.error(\"Error during batch fetching:\", fetchError);\n                // If we encountered an error but have some data, continue with what we have\n                if (allPatients.length === 0) {\n                    // If no data was fetched at all, fall back to single page fetch\n                    console.log(\"Falling back to single page fetch due to batch fetch error\");\n                    try {\n                        const fallbackUrl = `http://api-klinik.doctorphc.id/pasien?page=1&limit=100`;\n                        const fallbackResponse = await fetchWithRetry(fallbackUrl, {\n                            method: \"GET\",\n                            headers: {\n                                \"Content-Type\": \"application/json\"\n                            }\n                        });\n                        if (fallbackResponse.ok) {\n                            const fallbackData = await fallbackResponse.json();\n                            let rawPatients = [];\n                            if (fallbackData.data && Array.isArray(fallbackData.data)) {\n                                rawPatients = fallbackData.data;\n                            } else if (Array.isArray(fallbackData)) {\n                                rawPatients = fallbackData;\n                            }\n                            allPatients = rawPatients.map((patient)=>({\n                                    id: patient.No_MR,\n                                    mrn: patient.No_MR,\n                                    name: patient.Nama_Pasien,\n                                    gender: patient.Jenis_Kelamin?.[0]?.name || \"-\",\n                                    birthDate: patient.Tgl_Lahir ? patient.Tgl_Lahir.split(\" \")[0] : null,\n                                    nik: patient.Identitas?.find((id)=>id.type === \"nik\")?.id || \"\",\n                                    nip: patient.Identitas?.find((id)=>id.type === \"nip\")?.id || \"\",\n                                    phone: \"\",\n                                    address: patient.Alamat_Rumah?.[0]?.Alamat || \"\",\n                                    city: patient.Alamat_Rumah?.[0]?.Kota?.[0]?.name || \"\",\n                                    province: patient.Alamat_Rumah?.[0]?.Propinsi?.[0]?.name || \"\",\n                                    bloodType: patient.Golongan_Darah?.[0]?.name || \"-\",\n                                    religion: patient.Agama?.[0]?.name || \"-\",\n                                    maritalStatus: patient.Status_Marital?.[0]?.name || \"-\",\n                                    occupation: patient.Pekerjaan?.[0]?.name || \"-\",\n                                    education: patient.Pendidikan?.[0]?.name || \"-\",\n                                    created_at: patient.audittrail?.CreatedDate || null,\n                                    updated_at: patient.audittrail?.LastModifiedDate || null\n                                }));\n                        }\n                    } catch (fallbackError) {\n                        console.error(\"Fallback fetch also failed:\", fallbackError);\n                        // Return empty results if all fails\n                        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                            data: [],\n                            pagination: {\n                                total: 0,\n                                page,\n                                limit,\n                                totalPages: 0\n                            },\n                            message: \"Search temporarily unavailable due to API issues\"\n                        });\n                    }\n                }\n            }\n            // Apply search filter to all collected data\n            const filteredPatients = allPatients.filter((patient)=>patient.name && patient.name.toLowerCase().includes(search.toLowerCase()) || patient.mrn && patient.mrn.toLowerCase().includes(search.toLowerCase()) || patient.nik && patient.nik.toLowerCase().includes(search.toLowerCase()));\n            console.log(`Found ${filteredPatients.length} patients matching search: \"${search}\"`);\n            // Apply pagination to filtered results\n            const startIndex = (page - 1) * limit;\n            const endIndex = startIndex + limit;\n            const paginatedPatients = filteredPatients.slice(startIndex, endIndex);\n            totalFromAPI = filteredPatients.length;\n            const totalPages = Math.ceil(totalFromAPI / limit);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                data: paginatedPatients,\n                pagination: {\n                    total: totalFromAPI,\n                    page,\n                    limit,\n                    totalPages\n                }\n            });\n        } else {\n            // When not searching, use regular pagination from API\n            const apiUrl = `http://api-klinik.doctorphc.id/pasien?page=${page}&limit=${limit}`;\n            const response = await fetchWithRetry(apiUrl, {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n            if (!response.ok) {\n                throw new Error(`Failed to fetch from external API: ${response.status} ${response.statusText}`);\n            }\n            const externalData = await response.json();\n            // Process the external data - the API returns data in a specific format\n            let rawPatients = [];\n            if (externalData.data && Array.isArray(externalData.data)) {\n                rawPatients = externalData.data;\n            } else if (Array.isArray(externalData)) {\n                rawPatients = externalData;\n            }\n            // Transform the external API data to match our expected format\n            const patients = rawPatients.map((patient)=>({\n                    id: patient.No_MR,\n                    mrn: patient.No_MR,\n                    name: patient.Nama_Pasien,\n                    gender: patient.Jenis_Kelamin?.[0]?.name || \"-\",\n                    birthDate: patient.Tgl_Lahir ? patient.Tgl_Lahir.split(\" \")[0] : null,\n                    nik: patient.Identitas?.find((id)=>id.type === \"nik\")?.id || \"\",\n                    nip: patient.Identitas?.find((id)=>id.type === \"nip\")?.id || \"\",\n                    phone: \"\",\n                    address: patient.Alamat_Rumah?.[0]?.Alamat || \"\",\n                    city: patient.Alamat_Rumah?.[0]?.Kota?.[0]?.name || \"\",\n                    province: patient.Alamat_Rumah?.[0]?.Propinsi?.[0]?.name || \"\",\n                    bloodType: patient.Golongan_Darah?.[0]?.name || \"-\",\n                    religion: patient.Agama?.[0]?.name || \"-\",\n                    maritalStatus: patient.Status_Marital?.[0]?.name || \"-\",\n                    occupation: patient.Pekerjaan?.[0]?.name || \"-\",\n                    education: patient.Pendidikan?.[0]?.name || \"-\",\n                    created_at: patient.audittrail?.CreatedDate || null,\n                    updated_at: patient.audittrail?.LastModifiedDate || null\n                }));\n            // Use the pagination info from the external API\n            totalFromAPI = externalData[\"total pasien\"] || externalData.total || patients.length;\n            const totalPages = Math.ceil(totalFromAPI / limit);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                data: patients,\n                pagination: {\n                    total: totalFromAPI,\n                    page,\n                    limit,\n                    totalPages\n                }\n            });\n        }\n    } catch (error) {\n        console.error(\"Error fetching patients from external API:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Failed to fetch patients from external API\",\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n// POST new patient\nasync function POST(request) {\n    try {\n        const data = await request.json();\n        // Validasi data\n        if (!data.name || !data.nik || !data.birthDate) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                error: \"Nama, NIK, dan Tanggal Lahir wajib diisi\"\n            }), {\n                status: 400,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        // Generate MR Number\n        const year = new Date().getFullYear();\n        const lastPatient = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.Patient.findFirst({\n            where: {\n                mrNumber: {\n                    startsWith: `MR-${year}`\n                }\n            },\n            orderBy: {\n                mrNumber: \"desc\"\n            }\n        });\n        const sequence = lastPatient ? parseInt(lastPatient.mrNumber.split(\"-\")[2]) + 1 : 1;\n        const mrNumber = `MR-${year}-${sequence.toString().padStart(4, \"0\")}`;\n        // Create patient\n        const patient = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.Patient.create({\n            data: {\n                mrNumber,\n                name: data.name.trim(),\n                nik: data.nik.trim(),\n                birthDate: new Date(data.birthDate),\n                gender: data.gender || null,\n                bloodType: data.bloodType || null,\n                occupation: data.occupation || null,\n                maritalStatus: data.maritalStatus || null,\n                nip: data.nip || null,\n                citizenship: data.citizenship || \"WNI\",\n                address: data.address?.trim() || null,\n                phone: data.phone?.trim() || null,\n                email: data.email?.trim() || null,\n                provinceId: data.provinceId || null,\n                provinceName: data.provinceName || null,\n                cityId: data.cityId || null,\n                cityName: data.cityName || null,\n                districtId: data.districtId || null,\n                districtName: data.districtName || null,\n                villageId: data.villageId || null,\n                villageName: data.villageName || null,\n                postalCode: data.postalCode || null,\n                companyId: data.companyId || null\n            }\n        });\n        // Create insurance if provided\n        if (data.insurance) {\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.Insurance.create({\n                data: {\n                    patientId: patient.id,\n                    provider: data.insurance.provider,\n                    number: data.insurance.number || null,\n                    type: data.insurance.type || null,\n                    status: data.insurance.status || \"Aktif\"\n                }\n            });\n        }\n        // Format dates before sending response\n        const formattedPatient = {\n            ...patient,\n            birthDate: patient.birthDate ? patient.birthDate.toISOString().split(\"T\")[0] : null,\n            createdAt: patient.createdAt ? patient.createdAt.toISOString() : null,\n            updatedAt: patient.updatedAt ? patient.updatedAt.toISOString() : null\n        };\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify(formattedPatient), {\n            status: 201,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Error creating patient:\", error);\n        if (error.code === \"P2002\" || error.code === \"ER_DUP_ENTRY\") {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                error: \"NIK sudah terdaftar\"\n            }), {\n                status: 400,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n            error: \"Gagal menambahkan pasien\"\n        }), {\n            status: 500,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3BhdGllbnRzL3JvdXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJDO0FBQ1YsQ0FBQyxnQ0FBZ0M7QUFDaEIsQ0FBQywwQkFBMEI7QUFDN0UsOEZBQThGO0FBRTlGLGdEQUFnRDtBQUNoRCxNQUFNSSxRQUFRLENBQUNDLEtBQU8sSUFBSUMsUUFBUSxDQUFDQyxVQUFZQyxXQUFXRCxTQUFTRjtBQUVuRSxzQ0FBc0M7QUFDdEMsZUFBZUksZUFBZUMsR0FBRyxFQUFFQyxPQUFPLEVBQUVDLGFBQWEsQ0FBQztJQUN4RCxJQUFLLElBQUlDLElBQUksR0FBR0EsSUFBSUQsWUFBWUMsSUFBSztRQUNuQyxJQUFJO1lBQ0YsTUFBTUMsV0FBVyxNQUFNQyxNQUFNTCxLQUFLO2dCQUNoQyxHQUFHQyxPQUFPO2dCQUNWSyxTQUFTO1lBQ1g7WUFDQSxPQUFPRjtRQUNULEVBQUUsT0FBT0csT0FBTztZQUNkQyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUVOLElBQUksRUFBRSxRQUFRLENBQUMsRUFBRUksTUFBTUcsT0FBTztZQUNyRCxJQUFJUCxNQUFNRCxhQUFhLEdBQUc7Z0JBQ3hCLE1BQU1LLE9BQU8sd0JBQXdCO1lBQ3ZDO1lBQ0EsNkNBQTZDO1lBQzdDLE1BQU1iLE1BQU1pQixLQUFLQyxHQUFHLENBQUMsR0FBR1QsS0FBSztRQUMvQjtJQUNGO0FBQ0Y7QUFFQSxxQ0FBcUM7QUFDOUIsZUFBZVUsSUFBSUMsT0FBTztJQUMvQixJQUFJO1FBQ0YsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJRixRQUFRZCxHQUFHO1FBQzVDLE1BQU1pQixTQUFTRixhQUFhRyxHQUFHLENBQUMsYUFBYTtRQUM3QyxNQUFNQyxPQUFPQyxTQUFTTCxhQUFhRyxHQUFHLENBQUMsV0FBVztRQUNsRCxNQUFNRyxRQUFRRCxTQUFTTCxhQUFhRyxHQUFHLENBQUMsWUFBWTtRQUVwRCxJQUFJSSxjQUFjLEVBQUU7UUFDcEIsSUFBSUMsZUFBZTtRQUVuQixJQUFJTixRQUFRO1lBQ1YsOERBQThEO1lBQzlELGdGQUFnRjtZQUNoRixJQUFJTyxjQUFjO1lBQ2xCLElBQUlDLGNBQWM7WUFDbEIsTUFBTUMsWUFBWSxJQUFJLDhDQUE4QztZQUNwRSxNQUFNQyx1QkFBdUIsS0FBSywrQkFBK0I7WUFFakUsSUFBSTtnQkFDRixNQUFPRixZQUFhO29CQUNsQixNQUFNRyxTQUFTLENBQUMsMkNBQTJDLEVBQUVKLFlBQVksT0FBTyxFQUFFRSxXQUFXO29CQUU3RmxCLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLGVBQWUsRUFBRWUsWUFBWSxhQUFhLEVBQUVQLFFBQVE7b0JBRWpFLE1BQU1iLFdBQVcsTUFBTUwsZUFBZTZCLFFBQVE7d0JBQzVDQyxRQUFRO3dCQUNSQyxTQUFTOzRCQUNQLGdCQUFnQjt3QkFFbEI7b0JBQ0Y7b0JBRUEsSUFBSSxDQUFDMUIsU0FBUzJCLEVBQUUsRUFBRTt3QkFDaEJ2QixRQUFRRCxLQUFLLENBQUMsQ0FBQywyQkFBMkIsRUFBRUgsU0FBUzRCLE1BQU0sRUFBRTt3QkFFN0Q7b0JBQ0Y7b0JBRUEsTUFBTUMsZUFBZSxNQUFNN0IsU0FBUzhCLElBQUk7b0JBRXhDLHdFQUF3RTtvQkFDeEUsSUFBSUMsY0FBYyxFQUFFO29CQUNwQixJQUFJRixhQUFhRyxJQUFJLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0wsYUFBYUcsSUFBSSxHQUFHO3dCQUN6REQsY0FBY0YsYUFBYUcsSUFBSTtvQkFDakMsT0FBTyxJQUFJQyxNQUFNQyxPQUFPLENBQUNMLGVBQWU7d0JBQ3RDRSxjQUFjRjtvQkFDaEI7b0JBRUEsSUFBSUUsWUFBWUksTUFBTSxLQUFLLEdBQUc7d0JBQzVCZCxjQUFjO3dCQUNkO29CQUNGO29CQUVBLCtEQUErRDtvQkFDL0QsTUFBTWUsc0JBQXNCTCxZQUFZTSxHQUFHLENBQUMsQ0FBQ0MsVUFBYTs0QkFDeERDLElBQUlELFFBQVFFLEtBQUs7NEJBQ2pCQyxLQUFLSCxRQUFRRSxLQUFLOzRCQUNsQkUsTUFBTUosUUFBUUssV0FBVzs0QkFDekJDLFFBQVFOLFFBQVFPLGFBQWEsRUFBRSxDQUFDLEVBQUUsRUFBRUgsUUFBUTs0QkFDNUNJLFdBQVdSLFFBQVFTLFNBQVMsR0FDeEJULFFBQVFTLFNBQVMsQ0FBQ0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQy9COzRCQUNKQyxLQUFLWCxRQUFRWSxTQUFTLEVBQUVDLEtBQUssQ0FBQ1osS0FBT0EsR0FBR2EsSUFBSSxLQUFLLFFBQVFiLE1BQU07NEJBQy9EYyxLQUFLZixRQUFRWSxTQUFTLEVBQUVDLEtBQUssQ0FBQ1osS0FBT0EsR0FBR2EsSUFBSSxLQUFLLFFBQVFiLE1BQU07NEJBQy9EZSxPQUFPOzRCQUNQQyxTQUFTakIsUUFBUWtCLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRUMsVUFBVTs0QkFDOUNDLE1BQU1wQixRQUFRa0IsWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFRyxNQUFNLENBQUMsRUFBRSxFQUFFakIsUUFBUTs0QkFDcERrQixVQUFVdEIsUUFBUWtCLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRUssVUFBVSxDQUFDLEVBQUUsRUFBRW5CLFFBQVE7NEJBQzVEb0IsV0FBV3hCLFFBQVF5QixjQUFjLEVBQUUsQ0FBQyxFQUFFLEVBQUVyQixRQUFROzRCQUNoRHNCLFVBQVUxQixRQUFRMkIsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFdkIsUUFBUTs0QkFDdEN3QixlQUFlNUIsUUFBUTZCLGNBQWMsRUFBRSxDQUFDLEVBQUUsRUFBRXpCLFFBQVE7NEJBQ3BEMEIsWUFBWTlCLFFBQVErQixTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUUzQixRQUFROzRCQUM1QzRCLFdBQVdoQyxRQUFRaUMsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFN0IsUUFBUTs0QkFDNUM4QixZQUFZbEMsUUFBUW1DLFVBQVUsRUFBRUMsZUFBZTs0QkFDL0NDLFlBQVlyQyxRQUFRbUMsVUFBVSxFQUFFRyxvQkFBb0I7d0JBQ3REO29CQUVBMUQsWUFBWTJELElBQUksSUFBSXpDO29CQUVwQix1Q0FBdUM7b0JBQ3ZDLElBQUlMLFlBQVlJLE1BQU0sR0FBR2IsV0FBVzt3QkFDbENELGNBQWM7b0JBQ2hCLE9BQU87d0JBQ0xEO29CQUNGO29CQUVBLHFFQUFxRTtvQkFDckUsSUFBSUEsY0FBYyxJQUFJO3dCQUNwQiw2Q0FBNkM7d0JBQzdDaEIsUUFBUUMsR0FBRyxDQUFDO3dCQUNaZ0IsY0FBYztvQkFDaEI7b0JBRUEsNkRBQTZEO29CQUM3RCxJQUFJQSxhQUFhO3dCQUNmLE1BQU0vQixNQUFNaUM7b0JBQ2Q7Z0JBQ0Y7Z0JBRUFuQixRQUFRQyxHQUFHLENBQ1QsQ0FBQyx3QkFBd0IsRUFBRWEsWUFBWWlCLE1BQU0sQ0FBQyx5QkFBeUIsQ0FBQztZQUU1RSxFQUFFLE9BQU8yQyxZQUFZO2dCQUNuQjFFLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0MyRTtnQkFFOUMsNEVBQTRFO2dCQUM1RSxJQUFJNUQsWUFBWWlCLE1BQU0sS0FBSyxHQUFHO29CQUM1QixnRUFBZ0U7b0JBQ2hFL0IsUUFBUUMsR0FBRyxDQUNUO29CQUdGLElBQUk7d0JBQ0YsTUFBTTBFLGNBQWMsQ0FBQyxzREFBc0QsQ0FBQzt3QkFDNUUsTUFBTUMsbUJBQW1CLE1BQU1yRixlQUFlb0YsYUFBYTs0QkFDekR0RCxRQUFROzRCQUNSQyxTQUFTO2dDQUNQLGdCQUFnQjs0QkFDbEI7d0JBQ0Y7d0JBRUEsSUFBSXNELGlCQUFpQnJELEVBQUUsRUFBRTs0QkFDdkIsTUFBTXNELGVBQWUsTUFBTUQsaUJBQWlCbEQsSUFBSTs0QkFDaEQsSUFBSUMsY0FBYyxFQUFFOzRCQUNwQixJQUFJa0QsYUFBYWpELElBQUksSUFBSUMsTUFBTUMsT0FBTyxDQUFDK0MsYUFBYWpELElBQUksR0FBRztnQ0FDekRELGNBQWNrRCxhQUFhakQsSUFBSTs0QkFDakMsT0FBTyxJQUFJQyxNQUFNQyxPQUFPLENBQUMrQyxlQUFlO2dDQUN0Q2xELGNBQWNrRDs0QkFDaEI7NEJBRUEvRCxjQUFjYSxZQUFZTSxHQUFHLENBQUMsQ0FBQ0MsVUFBYTtvQ0FDMUNDLElBQUlELFFBQVFFLEtBQUs7b0NBQ2pCQyxLQUFLSCxRQUFRRSxLQUFLO29DQUNsQkUsTUFBTUosUUFBUUssV0FBVztvQ0FDekJDLFFBQVFOLFFBQVFPLGFBQWEsRUFBRSxDQUFDLEVBQUUsRUFBRUgsUUFBUTtvQ0FDNUNJLFdBQVdSLFFBQVFTLFNBQVMsR0FDeEJULFFBQVFTLFNBQVMsQ0FBQ0MsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQy9CO29DQUNKQyxLQUNFWCxRQUFRWSxTQUFTLEVBQUVDLEtBQUssQ0FBQ1osS0FBT0EsR0FBR2EsSUFBSSxLQUFLLFFBQVFiLE1BQU07b0NBQzVEYyxLQUNFZixRQUFRWSxTQUFTLEVBQUVDLEtBQUssQ0FBQ1osS0FBT0EsR0FBR2EsSUFBSSxLQUFLLFFBQVFiLE1BQU07b0NBQzVEZSxPQUFPO29DQUNQQyxTQUFTakIsUUFBUWtCLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRUMsVUFBVTtvQ0FDOUNDLE1BQU1wQixRQUFRa0IsWUFBWSxFQUFFLENBQUMsRUFBRSxFQUFFRyxNQUFNLENBQUMsRUFBRSxFQUFFakIsUUFBUTtvQ0FDcERrQixVQUFVdEIsUUFBUWtCLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRUssVUFBVSxDQUFDLEVBQUUsRUFBRW5CLFFBQVE7b0NBQzVEb0IsV0FBV3hCLFFBQVF5QixjQUFjLEVBQUUsQ0FBQyxFQUFFLEVBQUVyQixRQUFRO29DQUNoRHNCLFVBQVUxQixRQUFRMkIsS0FBSyxFQUFFLENBQUMsRUFBRSxFQUFFdkIsUUFBUTtvQ0FDdEN3QixlQUFlNUIsUUFBUTZCLGNBQWMsRUFBRSxDQUFDLEVBQUUsRUFBRXpCLFFBQVE7b0NBQ3BEMEIsWUFBWTlCLFFBQVErQixTQUFTLEVBQUUsQ0FBQyxFQUFFLEVBQUUzQixRQUFRO29DQUM1QzRCLFdBQVdoQyxRQUFRaUMsVUFBVSxFQUFFLENBQUMsRUFBRSxFQUFFN0IsUUFBUTtvQ0FDNUM4QixZQUFZbEMsUUFBUW1DLFVBQVUsRUFBRUMsZUFBZTtvQ0FDL0NDLFlBQVlyQyxRQUFRbUMsVUFBVSxFQUFFRyxvQkFBb0I7Z0NBQ3REO3dCQUNGO29CQUNGLEVBQUUsT0FBT00sZUFBZTt3QkFDdEI5RSxRQUFRRCxLQUFLLENBQUMsK0JBQStCK0U7d0JBQzdDLG9DQUFvQzt3QkFDcEMsT0FBT2hHLHFEQUFZQSxDQUFDNEMsSUFBSSxDQUFDOzRCQUN2QkUsTUFBTSxFQUFFOzRCQUNSbUQsWUFBWTtnQ0FDVkMsT0FBTztnQ0FDUHJFO2dDQUNBRTtnQ0FDQW9FLFlBQVk7NEJBQ2Q7NEJBQ0EvRSxTQUFTO3dCQUNYO29CQUNGO2dCQUNGO1lBQ0Y7WUFFQSw0Q0FBNEM7WUFDNUMsTUFBTWdGLG1CQUFtQnBFLFlBQVlxRSxNQUFNLENBQ3pDLENBQUNqRCxVQUNDLFFBQVNJLElBQUksSUFDWEosUUFBUUksSUFBSSxDQUFDOEMsV0FBVyxHQUFHQyxRQUFRLENBQUM1RSxPQUFPMkUsV0FBVyxPQUN2RGxELFFBQVFHLEdBQUcsSUFDVkgsUUFBUUcsR0FBRyxDQUFDK0MsV0FBVyxHQUFHQyxRQUFRLENBQUM1RSxPQUFPMkUsV0FBVyxPQUN0RGxELFFBQVFXLEdBQUcsSUFDVlgsUUFBUVcsR0FBRyxDQUFDdUMsV0FBVyxHQUFHQyxRQUFRLENBQUM1RSxPQUFPMkUsV0FBVztZQUczRHBGLFFBQVFDLEdBQUcsQ0FDVCxDQUFDLE1BQU0sRUFBRWlGLGlCQUFpQm5ELE1BQU0sQ0FBQyw0QkFBNEIsRUFBRXRCLE9BQU8sQ0FBQyxDQUFDO1lBRzFFLHVDQUF1QztZQUN2QyxNQUFNNkUsYUFBYSxDQUFDM0UsT0FBTyxLQUFLRTtZQUNoQyxNQUFNMEUsV0FBV0QsYUFBYXpFO1lBQzlCLE1BQU0yRSxvQkFBb0JOLGlCQUFpQk8sS0FBSyxDQUFDSCxZQUFZQztZQUU3RHhFLGVBQWVtRSxpQkFBaUJuRCxNQUFNO1lBQ3RDLE1BQU1rRCxhQUFhOUUsS0FBS3VGLElBQUksQ0FBQzNFLGVBQWVGO1lBRTVDLE9BQU8vQixxREFBWUEsQ0FBQzRDLElBQUksQ0FBQztnQkFDdkJFLE1BQU00RDtnQkFDTlQsWUFBWTtvQkFDVkMsT0FBT2pFO29CQUNQSjtvQkFDQUU7b0JBQ0FvRTtnQkFDRjtZQUNGO1FBQ0YsT0FBTztZQUNMLHNEQUFzRDtZQUN0RCxNQUFNN0QsU0FBUyxDQUFDLDJDQUEyQyxFQUFFVCxLQUFLLE9BQU8sRUFBRUUsT0FBTztZQUNsRixNQUFNakIsV0FBVyxNQUFNTCxlQUFlNkIsUUFBUTtnQkFDNUNDLFFBQVE7Z0JBQ1JDLFNBQVM7b0JBQ1AsZ0JBQWdCO2dCQUVsQjtZQUNGO1lBRUEsSUFBSSxDQUFDMUIsU0FBUzJCLEVBQUUsRUFBRTtnQkFDaEIsTUFBTSxJQUFJb0UsTUFDUixDQUFDLG1DQUFtQyxFQUFFL0YsU0FBUzRCLE1BQU0sQ0FBQyxDQUFDLEVBQUU1QixTQUFTZ0csVUFBVSxFQUFFO1lBRWxGO1lBRUEsTUFBTW5FLGVBQWUsTUFBTTdCLFNBQVM4QixJQUFJO1lBRXhDLHdFQUF3RTtZQUN4RSxJQUFJQyxjQUFjLEVBQUU7WUFDcEIsSUFBSUYsYUFBYUcsSUFBSSxJQUFJQyxNQUFNQyxPQUFPLENBQUNMLGFBQWFHLElBQUksR0FBRztnQkFDekRELGNBQWNGLGFBQWFHLElBQUk7WUFDakMsT0FBTyxJQUFJQyxNQUFNQyxPQUFPLENBQUNMLGVBQWU7Z0JBQ3RDRSxjQUFjRjtZQUNoQjtZQUVBLCtEQUErRDtZQUMvRCxNQUFNb0UsV0FBV2xFLFlBQVlNLEdBQUcsQ0FBQyxDQUFDQyxVQUFhO29CQUM3Q0MsSUFBSUQsUUFBUUUsS0FBSztvQkFDakJDLEtBQUtILFFBQVFFLEtBQUs7b0JBQ2xCRSxNQUFNSixRQUFRSyxXQUFXO29CQUN6QkMsUUFBUU4sUUFBUU8sYUFBYSxFQUFFLENBQUMsRUFBRSxFQUFFSCxRQUFRO29CQUM1Q0ksV0FBV1IsUUFBUVMsU0FBUyxHQUFHVCxRQUFRUyxTQUFTLENBQUNDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHO29CQUNqRUMsS0FBS1gsUUFBUVksU0FBUyxFQUFFQyxLQUFLLENBQUNaLEtBQU9BLEdBQUdhLElBQUksS0FBSyxRQUFRYixNQUFNO29CQUMvRGMsS0FBS2YsUUFBUVksU0FBUyxFQUFFQyxLQUFLLENBQUNaLEtBQU9BLEdBQUdhLElBQUksS0FBSyxRQUFRYixNQUFNO29CQUMvRGUsT0FBTztvQkFDUEMsU0FBU2pCLFFBQVFrQixZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUVDLFVBQVU7b0JBQzlDQyxNQUFNcEIsUUFBUWtCLFlBQVksRUFBRSxDQUFDLEVBQUUsRUFBRUcsTUFBTSxDQUFDLEVBQUUsRUFBRWpCLFFBQVE7b0JBQ3BEa0IsVUFBVXRCLFFBQVFrQixZQUFZLEVBQUUsQ0FBQyxFQUFFLEVBQUVLLFVBQVUsQ0FBQyxFQUFFLEVBQUVuQixRQUFRO29CQUM1RG9CLFdBQVd4QixRQUFReUIsY0FBYyxFQUFFLENBQUMsRUFBRSxFQUFFckIsUUFBUTtvQkFDaERzQixVQUFVMUIsUUFBUTJCLEtBQUssRUFBRSxDQUFDLEVBQUUsRUFBRXZCLFFBQVE7b0JBQ3RDd0IsZUFBZTVCLFFBQVE2QixjQUFjLEVBQUUsQ0FBQyxFQUFFLEVBQUV6QixRQUFRO29CQUNwRDBCLFlBQVk5QixRQUFRK0IsU0FBUyxFQUFFLENBQUMsRUFBRSxFQUFFM0IsUUFBUTtvQkFDNUM0QixXQUFXaEMsUUFBUWlDLFVBQVUsRUFBRSxDQUFDLEVBQUUsRUFBRTdCLFFBQVE7b0JBQzVDOEIsWUFBWWxDLFFBQVFtQyxVQUFVLEVBQUVDLGVBQWU7b0JBQy9DQyxZQUFZckMsUUFBUW1DLFVBQVUsRUFBRUcsb0JBQW9CO2dCQUN0RDtZQUVBLGdEQUFnRDtZQUNoRHpELGVBQ0VVLFlBQVksQ0FBQyxlQUFlLElBQUlBLGFBQWF1RCxLQUFLLElBQUlhLFNBQVM5RCxNQUFNO1lBQ3ZFLE1BQU1rRCxhQUFhOUUsS0FBS3VGLElBQUksQ0FBQzNFLGVBQWVGO1lBRTVDLE9BQU8vQixxREFBWUEsQ0FBQzRDLElBQUksQ0FBQztnQkFDdkJFLE1BQU1pRTtnQkFDTmQsWUFBWTtvQkFDVkMsT0FBT2pFO29CQUNQSjtvQkFDQUU7b0JBQ0FvRTtnQkFDRjtZQUNGO1FBQ0Y7SUFDRixFQUFFLE9BQU9sRixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyw4Q0FBOENBO1FBQzVELE9BQU9qQixxREFBWUEsQ0FBQzRDLElBQUksQ0FDdEI7WUFDRXhCLFNBQVM7WUFDVEgsT0FBT0EsTUFBTUcsT0FBTztRQUN0QixHQUNBO1lBQUVzQixRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVBLG1CQUFtQjtBQUNaLGVBQWVzRSxLQUFLeEYsT0FBTztJQUNoQyxJQUFJO1FBQ0YsTUFBTXNCLE9BQU8sTUFBTXRCLFFBQVFvQixJQUFJO1FBRS9CLGdCQUFnQjtRQUNoQixJQUFJLENBQUNFLEtBQUtVLElBQUksSUFBSSxDQUFDVixLQUFLaUIsR0FBRyxJQUFJLENBQUNqQixLQUFLYyxTQUFTLEVBQUU7WUFDOUMsT0FBTyxJQUFJNUQscURBQVlBLENBQ3JCaUgsS0FBS0MsU0FBUyxDQUFDO2dCQUFFakcsT0FBTztZQUEyQyxJQUNuRTtnQkFDRXlCLFFBQVE7Z0JBQ1JGLFNBQVM7b0JBQUUsZ0JBQWdCO2dCQUFtQjtZQUNoRDtRQUVKO1FBRUEscUJBQXFCO1FBQ3JCLE1BQU0yRSxPQUFPLElBQUlDLE9BQU9DLFdBQVc7UUFDbkMsTUFBTUMsY0FBYyxNQUFNcEgsZ0RBQU9BLENBQUNxSCxTQUFTLENBQUM7WUFDMUNDLE9BQU87Z0JBQUVDLFVBQVU7b0JBQUVDLFlBQVksQ0FBQyxHQUFHLEVBQUVQLE1BQU07Z0JBQUM7WUFBRTtZQUNoRFEsU0FBUztnQkFBRUYsVUFBVTtZQUFPO1FBQzlCO1FBRUEsTUFBTUcsV0FBV04sY0FDYnhGLFNBQVN3RixZQUFZRyxRQUFRLENBQUMzRCxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxJQUMvQztRQUNKLE1BQU0yRCxXQUFXLENBQUMsR0FBRyxFQUFFTixLQUFLLENBQUMsRUFBRVMsU0FBU0MsUUFBUSxHQUFHQyxRQUFRLENBQUMsR0FBRyxNQUFNO1FBRXJFLGlCQUFpQjtRQUNqQixNQUFNMUUsVUFBVSxNQUFNbEQsZ0RBQU9BLENBQUM2SCxNQUFNLENBQUM7WUFDbkNqRixNQUFNO2dCQUNKMkU7Z0JBQ0FqRSxNQUFNVixLQUFLVSxJQUFJLENBQUN3RSxJQUFJO2dCQUNwQmpFLEtBQUtqQixLQUFLaUIsR0FBRyxDQUFDaUUsSUFBSTtnQkFDbEJwRSxXQUFXLElBQUl3RCxLQUFLdEUsS0FBS2MsU0FBUztnQkFDbENGLFFBQVFaLEtBQUtZLE1BQU0sSUFBSTtnQkFDdkJrQixXQUFXOUIsS0FBSzhCLFNBQVMsSUFBSTtnQkFDN0JNLFlBQVlwQyxLQUFLb0MsVUFBVSxJQUFJO2dCQUMvQkYsZUFBZWxDLEtBQUtrQyxhQUFhLElBQUk7Z0JBQ3JDYixLQUFLckIsS0FBS3FCLEdBQUcsSUFBSTtnQkFDakI4RCxhQUFhbkYsS0FBS21GLFdBQVcsSUFBSTtnQkFDakM1RCxTQUFTdkIsS0FBS3VCLE9BQU8sRUFBRTJELFVBQVU7Z0JBQ2pDNUQsT0FBT3RCLEtBQUtzQixLQUFLLEVBQUU0RCxVQUFVO2dCQUM3QkUsT0FBT3BGLEtBQUtvRixLQUFLLEVBQUVGLFVBQVU7Z0JBQzdCRyxZQUFZckYsS0FBS3FGLFVBQVUsSUFBSTtnQkFDL0JDLGNBQWN0RixLQUFLc0YsWUFBWSxJQUFJO2dCQUNuQ0MsUUFBUXZGLEtBQUt1RixNQUFNLElBQUk7Z0JBQ3ZCQyxVQUFVeEYsS0FBS3dGLFFBQVEsSUFBSTtnQkFDM0JDLFlBQVl6RixLQUFLeUYsVUFBVSxJQUFJO2dCQUMvQkMsY0FBYzFGLEtBQUswRixZQUFZLElBQUk7Z0JBQ25DQyxXQUFXM0YsS0FBSzJGLFNBQVMsSUFBSTtnQkFDN0JDLGFBQWE1RixLQUFLNEYsV0FBVyxJQUFJO2dCQUNqQ0MsWUFBWTdGLEtBQUs2RixVQUFVLElBQUk7Z0JBQy9CQyxXQUFXOUYsS0FBSzhGLFNBQVMsSUFBSTtZQUMvQjtRQUNGO1FBRUEsK0JBQStCO1FBQy9CLElBQUk5RixLQUFLK0YsU0FBUyxFQUFFO1lBQ2xCLE1BQU0xSSxrREFBU0EsQ0FBQzRILE1BQU0sQ0FBQztnQkFDckJqRixNQUFNO29CQUNKZ0csV0FBVzFGLFFBQVFDLEVBQUU7b0JBQ3JCMEYsVUFBVWpHLEtBQUsrRixTQUFTLENBQUNFLFFBQVE7b0JBQ2pDQyxRQUFRbEcsS0FBSytGLFNBQVMsQ0FBQ0csTUFBTSxJQUFJO29CQUNqQzlFLE1BQU1wQixLQUFLK0YsU0FBUyxDQUFDM0UsSUFBSSxJQUFJO29CQUM3QnhCLFFBQVFJLEtBQUsrRixTQUFTLENBQUNuRyxNQUFNLElBQUk7Z0JBQ25DO1lBQ0Y7UUFDRjtRQUVBLHVDQUF1QztRQUN2QyxNQUFNdUcsbUJBQW1CO1lBQ3ZCLEdBQUc3RixPQUFPO1lBQ1ZRLFdBQVdSLFFBQVFRLFNBQVMsR0FDeEJSLFFBQVFRLFNBQVMsQ0FBQ3NGLFdBQVcsR0FBR3BGLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUM3QztZQUNKcUYsV0FBVy9GLFFBQVErRixTQUFTLEdBQUcvRixRQUFRK0YsU0FBUyxDQUFDRCxXQUFXLEtBQUs7WUFDakVFLFdBQVdoRyxRQUFRZ0csU0FBUyxHQUFHaEcsUUFBUWdHLFNBQVMsQ0FBQ0YsV0FBVyxLQUFLO1FBQ25FO1FBRUEsT0FBTyxJQUFJbEoscURBQVlBLENBQUNpSCxLQUFLQyxTQUFTLENBQUMrQixtQkFBbUI7WUFDeER2RyxRQUFRO1lBQ1JGLFNBQVM7Z0JBQUUsZ0JBQWdCO1lBQW1CO1FBQ2hEO0lBQ0YsRUFBRSxPQUFPdkIsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsMkJBQTJCQTtRQUV6QyxJQUFJQSxNQUFNb0ksSUFBSSxLQUFLLFdBQVdwSSxNQUFNb0ksSUFBSSxLQUFLLGdCQUFnQjtZQUMzRCxPQUFPLElBQUlySixxREFBWUEsQ0FDckJpSCxLQUFLQyxTQUFTLENBQUM7Z0JBQUVqRyxPQUFPO1lBQXNCLElBQzlDO2dCQUNFeUIsUUFBUTtnQkFDUkYsU0FBUztvQkFBRSxnQkFBZ0I7Z0JBQW1CO1lBQ2hEO1FBRUo7UUFFQSxPQUFPLElBQUl4QyxxREFBWUEsQ0FDckJpSCxLQUFLQyxTQUFTLENBQUM7WUFBRWpHLE9BQU87UUFBMkIsSUFDbkQ7WUFDRXlCLFFBQVE7WUFDUkYsU0FBUztnQkFBRSxnQkFBZ0I7WUFBbUI7UUFDaEQ7SUFFSjtBQUNGIiwic291cmNlcyI6WyIvVm9sdW1lcy9EYXRhLTIvUEhDL1Byb2plY3QvZGFzaC1hcHAvYXBwL2FwaS9wYXRpZW50cy9yb3V0ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IHF1ZXJ5IH0gZnJvbSBcIkAvbGliL2RiXCI7IC8vIEd1bmFrYW4gZGIuanMgYnVrYW4gcHJpc21hLmpzXG5pbXBvcnQgeyBQYXRpZW50LCBJbnN1cmFuY2UgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7IC8vIEltcG9ydCBoZWxwZXIgZnVuY3Rpb25zXG4vLyBhdGF1IGltcG9ydCB7IGdldFBhdGllbnRzIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiOyAvLyBKaWthIG1lbmdndW5ha2FuIGhlbHBlciB5YW5nIGRpcGVyYmFydWlcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGFkZCBkZWxheSBiZXR3ZWVuIHJlcXVlc3RzXG5jb25zdCBkZWxheSA9IChtcykgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGZldGNoIHdpdGggcmV0cnlcbmFzeW5jIGZ1bmN0aW9uIGZldGNoV2l0aFJldHJ5KHVybCwgb3B0aW9ucywgbWF4UmV0cmllcyA9IDMpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhSZXRyaWVzOyBpKyspIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgdGltZW91dDogMzAwMDAsIC8vIDMwIHNlY29uZCB0aW1lb3V0XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5sb2coYEF0dGVtcHQgJHtpICsgMX0gZmFpbGVkOmAsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgaWYgKGkgPT09IG1heFJldHJpZXMgLSAxKSB7XG4gICAgICAgIHRocm93IGVycm9yOyAvLyBUaHJvdyBvbiBsYXN0IGF0dGVtcHRcbiAgICAgIH1cbiAgICAgIC8vIFdhaXQgYmVmb3JlIHJldHJ5aW5nIChleHBvbmVudGlhbCBiYWNrb2ZmKVxuICAgICAgYXdhaXQgZGVsYXkoTWF0aC5wb3coMiwgaSkgKiAxMDAwKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gR0VUIGFsbCBwYXRpZW50cyBmcm9tIGV4dGVybmFsIEFQSVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IHNlYXJjaCA9IHNlYXJjaFBhcmFtcy5nZXQoXCJzZWFyY2hcIikgfHwgXCJcIjtcbiAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldChcInBhZ2VcIikgfHwgXCIxXCIpO1xuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldChcImxpbWl0XCIpIHx8IFwiMTBcIik7XG5cbiAgICBsZXQgYWxsUGF0aWVudHMgPSBbXTtcbiAgICBsZXQgdG90YWxGcm9tQVBJID0gMDtcblxuICAgIGlmIChzZWFyY2gpIHtcbiAgICAgIC8vIFdoZW4gc2VhcmNoaW5nLCBmZXRjaCBhbGwgZGF0YSB0byBzZWFyY2ggYWNyb3NzIGFsbCByZWNvcmRzXG4gICAgICAvLyBXZSdsbCBmZXRjaCBkYXRhIGluIHNtYWxsZXIgYmF0Y2hlcyB3aXRoIGRlbGF5cyB0byBhdm9pZCBvdmVyd2hlbG1pbmcgdGhlIEFQSVxuICAgICAgbGV0IGN1cnJlbnRQYWdlID0gMTtcbiAgICAgIGxldCBoYXNNb3JlRGF0YSA9IHRydWU7XG4gICAgICBjb25zdCBiYXRjaFNpemUgPSA1MDsgLy8gUmVkdWNlZCBiYXRjaCBzaXplIHRvIGJlIGdlbnRsZXIgb24gdGhlIEFQSVxuICAgICAgY29uc3QgZGVsYXlCZXR3ZWVuUmVxdWVzdHMgPSA1MDA7IC8vIDUwMG1zIGRlbGF5IGJldHdlZW4gcmVxdWVzdHNcblxuICAgICAgdHJ5IHtcbiAgICAgICAgd2hpbGUgKGhhc01vcmVEYXRhKSB7XG4gICAgICAgICAgY29uc3QgYXBpVXJsID0gYGh0dHA6Ly9hcGkta2xpbmlrLmRvY3RvcnBoYy5pZC9wYXNpZW4/cGFnZT0ke2N1cnJlbnRQYWdlfSZsaW1pdD0ke2JhdGNoU2l6ZX1gO1xuXG4gICAgICAgICAgY29uc29sZS5sb2coYEZldGNoaW5nIGJhdGNoICR7Y3VycmVudFBhZ2V9IGZvciBzZWFyY2g6ICR7c2VhcmNofWApO1xuXG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeShhcGlVcmwsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgIC8vIEFkZCBhbnkgcmVxdWlyZWQgaGVhZGVycyBoZXJlIChlLmcuLCBBdXRob3JpemF0aW9uIGlmIG5lZWRlZClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBBUEkgcmVzcG9uZGVkIHdpdGggc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c31gKTtcbiAgICAgICAgICAgIC8vIElmIHdlIGdldCBhIGJhZCByZXNwb25zZSwgc3RvcCBmZXRjaGluZyBtb3JlIGRhdGEgYnV0IHVzZSB3aGF0IHdlIGhhdmVcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGV4dGVybmFsRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICAgIC8vIFByb2Nlc3MgdGhlIGV4dGVybmFsIGRhdGEgLSB0aGUgQVBJIHJldHVybnMgZGF0YSBpbiBhIHNwZWNpZmljIGZvcm1hdFxuICAgICAgICAgIGxldCByYXdQYXRpZW50cyA9IFtdO1xuICAgICAgICAgIGlmIChleHRlcm5hbERhdGEuZGF0YSAmJiBBcnJheS5pc0FycmF5KGV4dGVybmFsRGF0YS5kYXRhKSkge1xuICAgICAgICAgICAgcmF3UGF0aWVudHMgPSBleHRlcm5hbERhdGEuZGF0YTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZXh0ZXJuYWxEYXRhKSkge1xuICAgICAgICAgICAgcmF3UGF0aWVudHMgPSBleHRlcm5hbERhdGE7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHJhd1BhdGllbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaGFzTW9yZURhdGEgPSBmYWxzZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFRyYW5zZm9ybSB0aGUgZXh0ZXJuYWwgQVBJIGRhdGEgdG8gbWF0Y2ggb3VyIGV4cGVjdGVkIGZvcm1hdFxuICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybWVkUGF0aWVudHMgPSByYXdQYXRpZW50cy5tYXAoKHBhdGllbnQpID0+ICh7XG4gICAgICAgICAgICBpZDogcGF0aWVudC5Ob19NUixcbiAgICAgICAgICAgIG1ybjogcGF0aWVudC5Ob19NUixcbiAgICAgICAgICAgIG5hbWU6IHBhdGllbnQuTmFtYV9QYXNpZW4sXG4gICAgICAgICAgICBnZW5kZXI6IHBhdGllbnQuSmVuaXNfS2VsYW1pbj8uWzBdPy5uYW1lIHx8IFwiLVwiLFxuICAgICAgICAgICAgYmlydGhEYXRlOiBwYXRpZW50LlRnbF9MYWhpclxuICAgICAgICAgICAgICA/IHBhdGllbnQuVGdsX0xhaGlyLnNwbGl0KFwiIFwiKVswXVxuICAgICAgICAgICAgICA6IG51bGwsXG4gICAgICAgICAgICBuaWs6IHBhdGllbnQuSWRlbnRpdGFzPy5maW5kKChpZCkgPT4gaWQudHlwZSA9PT0gXCJuaWtcIik/LmlkIHx8IFwiXCIsXG4gICAgICAgICAgICBuaXA6IHBhdGllbnQuSWRlbnRpdGFzPy5maW5kKChpZCkgPT4gaWQudHlwZSA9PT0gXCJuaXBcIik/LmlkIHx8IFwiXCIsXG4gICAgICAgICAgICBwaG9uZTogXCJcIiwgLy8gTm90IGF2YWlsYWJsZSBpbiBleHRlcm5hbCBBUElcbiAgICAgICAgICAgIGFkZHJlc3M6IHBhdGllbnQuQWxhbWF0X1J1bWFoPy5bMF0/LkFsYW1hdCB8fCBcIlwiLFxuICAgICAgICAgICAgY2l0eTogcGF0aWVudC5BbGFtYXRfUnVtYWg/LlswXT8uS290YT8uWzBdPy5uYW1lIHx8IFwiXCIsXG4gICAgICAgICAgICBwcm92aW5jZTogcGF0aWVudC5BbGFtYXRfUnVtYWg/LlswXT8uUHJvcGluc2k/LlswXT8ubmFtZSB8fCBcIlwiLFxuICAgICAgICAgICAgYmxvb2RUeXBlOiBwYXRpZW50LkdvbG9uZ2FuX0RhcmFoPy5bMF0/Lm5hbWUgfHwgXCItXCIsXG4gICAgICAgICAgICByZWxpZ2lvbjogcGF0aWVudC5BZ2FtYT8uWzBdPy5uYW1lIHx8IFwiLVwiLFxuICAgICAgICAgICAgbWFyaXRhbFN0YXR1czogcGF0aWVudC5TdGF0dXNfTWFyaXRhbD8uWzBdPy5uYW1lIHx8IFwiLVwiLFxuICAgICAgICAgICAgb2NjdXBhdGlvbjogcGF0aWVudC5QZWtlcmphYW4/LlswXT8ubmFtZSB8fCBcIi1cIixcbiAgICAgICAgICAgIGVkdWNhdGlvbjogcGF0aWVudC5QZW5kaWRpa2FuPy5bMF0/Lm5hbWUgfHwgXCItXCIsXG4gICAgICAgICAgICBjcmVhdGVkX2F0OiBwYXRpZW50LmF1ZGl0dHJhaWw/LkNyZWF0ZWREYXRlIHx8IG51bGwsXG4gICAgICAgICAgICB1cGRhdGVkX2F0OiBwYXRpZW50LmF1ZGl0dHJhaWw/Lkxhc3RNb2RpZmllZERhdGUgfHwgbnVsbCxcbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICBhbGxQYXRpZW50cy5wdXNoKC4uLnRyYW5zZm9ybWVkUGF0aWVudHMpO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgd2Ugc2hvdWxkIGNvbnRpbnVlIGZldGNoaW5nXG4gICAgICAgICAgaWYgKHJhd1BhdGllbnRzLmxlbmd0aCA8IGJhdGNoU2l6ZSkge1xuICAgICAgICAgICAgaGFzTW9yZURhdGEgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3VycmVudFBhZ2UrKztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBZGQgYSBzYWZldHkgbGltaXQgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wcyBhbmQgdG9vIG1hbnkgcmVxdWVzdHNcbiAgICAgICAgICBpZiAoY3VycmVudFBhZ2UgPiA1MCkge1xuICAgICAgICAgICAgLy8gTWF4IDIsNTAwIHJlY29yZHMgKDUwIHBhZ2VzICogNTAgcGVyIHBhZ2UpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlJlYWNoZWQgbWF4aW11bSBwYWdlIGxpbWl0IGZvciBzZWFyY2hcIik7XG4gICAgICAgICAgICBoYXNNb3JlRGF0YSA9IGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEFkZCBkZWxheSBiZXR3ZWVuIHJlcXVlc3RzIHRvIHByZXZlbnQgb3ZlcndoZWxtaW5nIHRoZSBBUElcbiAgICAgICAgICBpZiAoaGFzTW9yZURhdGEpIHtcbiAgICAgICAgICAgIGF3YWl0IGRlbGF5KGRlbGF5QmV0d2VlblJlcXVlc3RzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICBgU2VhcmNoIGNvbXBsZXRlZC4gRm91bmQgJHthbGxQYXRpZW50cy5sZW5ndGh9IHRvdGFsIHBhdGllbnRzIHRvIGZpbHRlcmBcbiAgICAgICAgKTtcbiAgICAgIH0gY2F0Y2ggKGZldGNoRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGR1cmluZyBiYXRjaCBmZXRjaGluZzpcIiwgZmV0Y2hFcnJvcik7XG5cbiAgICAgICAgLy8gSWYgd2UgZW5jb3VudGVyZWQgYW4gZXJyb3IgYnV0IGhhdmUgc29tZSBkYXRhLCBjb250aW51ZSB3aXRoIHdoYXQgd2UgaGF2ZVxuICAgICAgICBpZiAoYWxsUGF0aWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgLy8gSWYgbm8gZGF0YSB3YXMgZmV0Y2hlZCBhdCBhbGwsIGZhbGwgYmFjayB0byBzaW5nbGUgcGFnZSBmZXRjaFxuICAgICAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICAgICAgXCJGYWxsaW5nIGJhY2sgdG8gc2luZ2xlIHBhZ2UgZmV0Y2ggZHVlIHRvIGJhdGNoIGZldGNoIGVycm9yXCJcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrVXJsID0gYGh0dHA6Ly9hcGkta2xpbmlrLmRvY3RvcnBoYy5pZC9wYXNpZW4/cGFnZT0xJmxpbWl0PTEwMGA7XG4gICAgICAgICAgICBjb25zdCBmYWxsYmFja1Jlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoUmV0cnkoZmFsbGJhY2tVcmwsIHtcbiAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGZhbGxiYWNrUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgICAgY29uc3QgZmFsbGJhY2tEYXRhID0gYXdhaXQgZmFsbGJhY2tSZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICAgIGxldCByYXdQYXRpZW50cyA9IFtdO1xuICAgICAgICAgICAgICBpZiAoZmFsbGJhY2tEYXRhLmRhdGEgJiYgQXJyYXkuaXNBcnJheShmYWxsYmFja0RhdGEuZGF0YSkpIHtcbiAgICAgICAgICAgICAgICByYXdQYXRpZW50cyA9IGZhbGxiYWNrRGF0YS5kYXRhO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZmFsbGJhY2tEYXRhKSkge1xuICAgICAgICAgICAgICAgIHJhd1BhdGllbnRzID0gZmFsbGJhY2tEYXRhO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgYWxsUGF0aWVudHMgPSByYXdQYXRpZW50cy5tYXAoKHBhdGllbnQpID0+ICh7XG4gICAgICAgICAgICAgICAgaWQ6IHBhdGllbnQuTm9fTVIsXG4gICAgICAgICAgICAgICAgbXJuOiBwYXRpZW50Lk5vX01SLFxuICAgICAgICAgICAgICAgIG5hbWU6IHBhdGllbnQuTmFtYV9QYXNpZW4sXG4gICAgICAgICAgICAgICAgZ2VuZGVyOiBwYXRpZW50LkplbmlzX0tlbGFtaW4/LlswXT8ubmFtZSB8fCBcIi1cIixcbiAgICAgICAgICAgICAgICBiaXJ0aERhdGU6IHBhdGllbnQuVGdsX0xhaGlyXG4gICAgICAgICAgICAgICAgICA/IHBhdGllbnQuVGdsX0xhaGlyLnNwbGl0KFwiIFwiKVswXVxuICAgICAgICAgICAgICAgICAgOiBudWxsLFxuICAgICAgICAgICAgICAgIG5pazpcbiAgICAgICAgICAgICAgICAgIHBhdGllbnQuSWRlbnRpdGFzPy5maW5kKChpZCkgPT4gaWQudHlwZSA9PT0gXCJuaWtcIik/LmlkIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgbmlwOlxuICAgICAgICAgICAgICAgICAgcGF0aWVudC5JZGVudGl0YXM/LmZpbmQoKGlkKSA9PiBpZC50eXBlID09PSBcIm5pcFwiKT8uaWQgfHwgXCJcIixcbiAgICAgICAgICAgICAgICBwaG9uZTogXCJcIixcbiAgICAgICAgICAgICAgICBhZGRyZXNzOiBwYXRpZW50LkFsYW1hdF9SdW1haD8uWzBdPy5BbGFtYXQgfHwgXCJcIixcbiAgICAgICAgICAgICAgICBjaXR5OiBwYXRpZW50LkFsYW1hdF9SdW1haD8uWzBdPy5Lb3RhPy5bMF0/Lm5hbWUgfHwgXCJcIixcbiAgICAgICAgICAgICAgICBwcm92aW5jZTogcGF0aWVudC5BbGFtYXRfUnVtYWg/LlswXT8uUHJvcGluc2k/LlswXT8ubmFtZSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIGJsb29kVHlwZTogcGF0aWVudC5Hb2xvbmdhbl9EYXJhaD8uWzBdPy5uYW1lIHx8IFwiLVwiLFxuICAgICAgICAgICAgICAgIHJlbGlnaW9uOiBwYXRpZW50LkFnYW1hPy5bMF0/Lm5hbWUgfHwgXCItXCIsXG4gICAgICAgICAgICAgICAgbWFyaXRhbFN0YXR1czogcGF0aWVudC5TdGF0dXNfTWFyaXRhbD8uWzBdPy5uYW1lIHx8IFwiLVwiLFxuICAgICAgICAgICAgICAgIG9jY3VwYXRpb246IHBhdGllbnQuUGVrZXJqYWFuPy5bMF0/Lm5hbWUgfHwgXCItXCIsXG4gICAgICAgICAgICAgICAgZWR1Y2F0aW9uOiBwYXRpZW50LlBlbmRpZGlrYW4/LlswXT8ubmFtZSB8fCBcIi1cIixcbiAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBwYXRpZW50LmF1ZGl0dHJhaWw/LkNyZWF0ZWREYXRlIHx8IG51bGwsXG4gICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogcGF0aWVudC5hdWRpdHRyYWlsPy5MYXN0TW9kaWZpZWREYXRlIHx8IG51bGwsXG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChmYWxsYmFja0Vycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFsbGJhY2sgZmV0Y2ggYWxzbyBmYWlsZWQ6XCIsIGZhbGxiYWNrRXJyb3IpO1xuICAgICAgICAgICAgLy8gUmV0dXJuIGVtcHR5IHJlc3VsdHMgaWYgYWxsIGZhaWxzXG4gICAgICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICAgICAgICBkYXRhOiBbXSxcbiAgICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgICAgICAgIHBhZ2UsXG4gICAgICAgICAgICAgICAgbGltaXQsXG4gICAgICAgICAgICAgICAgdG90YWxQYWdlczogMCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogXCJTZWFyY2ggdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUgZHVlIHRvIEFQSSBpc3N1ZXNcIixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBcHBseSBzZWFyY2ggZmlsdGVyIHRvIGFsbCBjb2xsZWN0ZWQgZGF0YVxuICAgICAgY29uc3QgZmlsdGVyZWRQYXRpZW50cyA9IGFsbFBhdGllbnRzLmZpbHRlcihcbiAgICAgICAgKHBhdGllbnQpID0+XG4gICAgICAgICAgKHBhdGllbnQubmFtZSAmJlxuICAgICAgICAgICAgcGF0aWVudC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoLnRvTG93ZXJDYXNlKCkpKSB8fFxuICAgICAgICAgIChwYXRpZW50Lm1ybiAmJlxuICAgICAgICAgICAgcGF0aWVudC5tcm4udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2gudG9Mb3dlckNhc2UoKSkpIHx8XG4gICAgICAgICAgKHBhdGllbnQubmlrICYmXG4gICAgICAgICAgICBwYXRpZW50Lm5pay50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaC50b0xvd2VyQ2FzZSgpKSlcbiAgICAgICk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgRm91bmQgJHtmaWx0ZXJlZFBhdGllbnRzLmxlbmd0aH0gcGF0aWVudHMgbWF0Y2hpbmcgc2VhcmNoOiBcIiR7c2VhcmNofVwiYFxuICAgICAgKTtcblxuICAgICAgLy8gQXBwbHkgcGFnaW5hdGlvbiB0byBmaWx0ZXJlZCByZXN1bHRzXG4gICAgICBjb25zdCBzdGFydEluZGV4ID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuICAgICAgY29uc3QgZW5kSW5kZXggPSBzdGFydEluZGV4ICsgbGltaXQ7XG4gICAgICBjb25zdCBwYWdpbmF0ZWRQYXRpZW50cyA9IGZpbHRlcmVkUGF0aWVudHMuc2xpY2Uoc3RhcnRJbmRleCwgZW5kSW5kZXgpO1xuXG4gICAgICB0b3RhbEZyb21BUEkgPSBmaWx0ZXJlZFBhdGllbnRzLmxlbmd0aDtcbiAgICAgIGNvbnN0IHRvdGFsUGFnZXMgPSBNYXRoLmNlaWwodG90YWxGcm9tQVBJIC8gbGltaXQpO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBkYXRhOiBwYWdpbmF0ZWRQYXRpZW50cyxcbiAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgIHRvdGFsOiB0b3RhbEZyb21BUEksXG4gICAgICAgICAgcGFnZSxcbiAgICAgICAgICBsaW1pdCxcbiAgICAgICAgICB0b3RhbFBhZ2VzLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFdoZW4gbm90IHNlYXJjaGluZywgdXNlIHJlZ3VsYXIgcGFnaW5hdGlvbiBmcm9tIEFQSVxuICAgICAgY29uc3QgYXBpVXJsID0gYGh0dHA6Ly9hcGkta2xpbmlrLmRvY3RvcnBoYy5pZC9wYXNpZW4/cGFnZT0ke3BhZ2V9JmxpbWl0PSR7bGltaXR9YDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoUmV0cnkoYXBpVXJsLCB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIC8vIEFkZCBhbnkgcmVxdWlyZWQgaGVhZGVycyBoZXJlIChlLmcuLCBBdXRob3JpemF0aW9uIGlmIG5lZWRlZClcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBgRmFpbGVkIHRvIGZldGNoIGZyb20gZXh0ZXJuYWwgQVBJOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWBcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXh0ZXJuYWxEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgICAvLyBQcm9jZXNzIHRoZSBleHRlcm5hbCBkYXRhIC0gdGhlIEFQSSByZXR1cm5zIGRhdGEgaW4gYSBzcGVjaWZpYyBmb3JtYXRcbiAgICAgIGxldCByYXdQYXRpZW50cyA9IFtdO1xuICAgICAgaWYgKGV4dGVybmFsRGF0YS5kYXRhICYmIEFycmF5LmlzQXJyYXkoZXh0ZXJuYWxEYXRhLmRhdGEpKSB7XG4gICAgICAgIHJhd1BhdGllbnRzID0gZXh0ZXJuYWxEYXRhLmRhdGE7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZXh0ZXJuYWxEYXRhKSkge1xuICAgICAgICByYXdQYXRpZW50cyA9IGV4dGVybmFsRGF0YTtcbiAgICAgIH1cblxuICAgICAgLy8gVHJhbnNmb3JtIHRoZSBleHRlcm5hbCBBUEkgZGF0YSB0byBtYXRjaCBvdXIgZXhwZWN0ZWQgZm9ybWF0XG4gICAgICBjb25zdCBwYXRpZW50cyA9IHJhd1BhdGllbnRzLm1hcCgocGF0aWVudCkgPT4gKHtcbiAgICAgICAgaWQ6IHBhdGllbnQuTm9fTVIsXG4gICAgICAgIG1ybjogcGF0aWVudC5Ob19NUixcbiAgICAgICAgbmFtZTogcGF0aWVudC5OYW1hX1Bhc2llbixcbiAgICAgICAgZ2VuZGVyOiBwYXRpZW50LkplbmlzX0tlbGFtaW4/LlswXT8ubmFtZSB8fCBcIi1cIixcbiAgICAgICAgYmlydGhEYXRlOiBwYXRpZW50LlRnbF9MYWhpciA/IHBhdGllbnQuVGdsX0xhaGlyLnNwbGl0KFwiIFwiKVswXSA6IG51bGwsXG4gICAgICAgIG5pazogcGF0aWVudC5JZGVudGl0YXM/LmZpbmQoKGlkKSA9PiBpZC50eXBlID09PSBcIm5pa1wiKT8uaWQgfHwgXCJcIixcbiAgICAgICAgbmlwOiBwYXRpZW50LklkZW50aXRhcz8uZmluZCgoaWQpID0+IGlkLnR5cGUgPT09IFwibmlwXCIpPy5pZCB8fCBcIlwiLFxuICAgICAgICBwaG9uZTogXCJcIiwgLy8gTm90IGF2YWlsYWJsZSBpbiBleHRlcm5hbCBBUElcbiAgICAgICAgYWRkcmVzczogcGF0aWVudC5BbGFtYXRfUnVtYWg/LlswXT8uQWxhbWF0IHx8IFwiXCIsXG4gICAgICAgIGNpdHk6IHBhdGllbnQuQWxhbWF0X1J1bWFoPy5bMF0/LktvdGE/LlswXT8ubmFtZSB8fCBcIlwiLFxuICAgICAgICBwcm92aW5jZTogcGF0aWVudC5BbGFtYXRfUnVtYWg/LlswXT8uUHJvcGluc2k/LlswXT8ubmFtZSB8fCBcIlwiLFxuICAgICAgICBibG9vZFR5cGU6IHBhdGllbnQuR29sb25nYW5fRGFyYWg/LlswXT8ubmFtZSB8fCBcIi1cIixcbiAgICAgICAgcmVsaWdpb246IHBhdGllbnQuQWdhbWE/LlswXT8ubmFtZSB8fCBcIi1cIixcbiAgICAgICAgbWFyaXRhbFN0YXR1czogcGF0aWVudC5TdGF0dXNfTWFyaXRhbD8uWzBdPy5uYW1lIHx8IFwiLVwiLFxuICAgICAgICBvY2N1cGF0aW9uOiBwYXRpZW50LlBla2VyamFhbj8uWzBdPy5uYW1lIHx8IFwiLVwiLFxuICAgICAgICBlZHVjYXRpb246IHBhdGllbnQuUGVuZGlkaWthbj8uWzBdPy5uYW1lIHx8IFwiLVwiLFxuICAgICAgICBjcmVhdGVkX2F0OiBwYXRpZW50LmF1ZGl0dHJhaWw/LkNyZWF0ZWREYXRlIHx8IG51bGwsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IHBhdGllbnQuYXVkaXR0cmFpbD8uTGFzdE1vZGlmaWVkRGF0ZSB8fCBudWxsLFxuICAgICAgfSkpO1xuXG4gICAgICAvLyBVc2UgdGhlIHBhZ2luYXRpb24gaW5mbyBmcm9tIHRoZSBleHRlcm5hbCBBUElcbiAgICAgIHRvdGFsRnJvbUFQSSA9XG4gICAgICAgIGV4dGVybmFsRGF0YVtcInRvdGFsIHBhc2llblwiXSB8fCBleHRlcm5hbERhdGEudG90YWwgfHwgcGF0aWVudHMubGVuZ3RoO1xuICAgICAgY29uc3QgdG90YWxQYWdlcyA9IE1hdGguY2VpbCh0b3RhbEZyb21BUEkgLyBsaW1pdCk7XG5cbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGRhdGE6IHBhdGllbnRzLFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgdG90YWw6IHRvdGFsRnJvbUFQSSxcbiAgICAgICAgICBwYWdlLFxuICAgICAgICAgIGxpbWl0LFxuICAgICAgICAgIHRvdGFsUGFnZXMsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHBhdGllbnRzIGZyb20gZXh0ZXJuYWwgQVBJOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBmZXRjaCBwYXRpZW50cyBmcm9tIGV4dGVybmFsIEFQSVwiLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbi8vIFBPU1QgbmV3IHBhdGllbnRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICAvLyBWYWxpZGFzaSBkYXRhXG4gICAgaWYgKCFkYXRhLm5hbWUgfHwgIWRhdGEubmlrIHx8ICFkYXRhLmJpcnRoRGF0ZSkge1xuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IFwiTmFtYSwgTklLLCBkYW4gVGFuZ2dhbCBMYWhpciB3YWppYiBkaWlzaVwiIH0pLFxuICAgICAgICB7XG4gICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEdlbmVyYXRlIE1SIE51bWJlclxuICAgIGNvbnN0IHllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG4gICAgY29uc3QgbGFzdFBhdGllbnQgPSBhd2FpdCBQYXRpZW50LmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZTogeyBtck51bWJlcjogeyBzdGFydHNXaXRoOiBgTVItJHt5ZWFyfWAgfSB9LFxuICAgICAgb3JkZXJCeTogeyBtck51bWJlcjogXCJkZXNjXCIgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHNlcXVlbmNlID0gbGFzdFBhdGllbnRcbiAgICAgID8gcGFyc2VJbnQobGFzdFBhdGllbnQubXJOdW1iZXIuc3BsaXQoXCItXCIpWzJdKSArIDFcbiAgICAgIDogMTtcbiAgICBjb25zdCBtck51bWJlciA9IGBNUi0ke3llYXJ9LSR7c2VxdWVuY2UudG9TdHJpbmcoKS5wYWRTdGFydCg0LCBcIjBcIil9YDtcblxuICAgIC8vIENyZWF0ZSBwYXRpZW50XG4gICAgY29uc3QgcGF0aWVudCA9IGF3YWl0IFBhdGllbnQuY3JlYXRlKHtcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbXJOdW1iZXIsXG4gICAgICAgIG5hbWU6IGRhdGEubmFtZS50cmltKCksXG4gICAgICAgIG5pazogZGF0YS5uaWsudHJpbSgpLFxuICAgICAgICBiaXJ0aERhdGU6IG5ldyBEYXRlKGRhdGEuYmlydGhEYXRlKSxcbiAgICAgICAgZ2VuZGVyOiBkYXRhLmdlbmRlciB8fCBudWxsLFxuICAgICAgICBibG9vZFR5cGU6IGRhdGEuYmxvb2RUeXBlIHx8IG51bGwsXG4gICAgICAgIG9jY3VwYXRpb246IGRhdGEub2NjdXBhdGlvbiB8fCBudWxsLFxuICAgICAgICBtYXJpdGFsU3RhdHVzOiBkYXRhLm1hcml0YWxTdGF0dXMgfHwgbnVsbCxcbiAgICAgICAgbmlwOiBkYXRhLm5pcCB8fCBudWxsLFxuICAgICAgICBjaXRpemVuc2hpcDogZGF0YS5jaXRpemVuc2hpcCB8fCBcIldOSVwiLFxuICAgICAgICBhZGRyZXNzOiBkYXRhLmFkZHJlc3M/LnRyaW0oKSB8fCBudWxsLFxuICAgICAgICBwaG9uZTogZGF0YS5waG9uZT8udHJpbSgpIHx8IG51bGwsXG4gICAgICAgIGVtYWlsOiBkYXRhLmVtYWlsPy50cmltKCkgfHwgbnVsbCxcbiAgICAgICAgcHJvdmluY2VJZDogZGF0YS5wcm92aW5jZUlkIHx8IG51bGwsXG4gICAgICAgIHByb3ZpbmNlTmFtZTogZGF0YS5wcm92aW5jZU5hbWUgfHwgbnVsbCxcbiAgICAgICAgY2l0eUlkOiBkYXRhLmNpdHlJZCB8fCBudWxsLFxuICAgICAgICBjaXR5TmFtZTogZGF0YS5jaXR5TmFtZSB8fCBudWxsLFxuICAgICAgICBkaXN0cmljdElkOiBkYXRhLmRpc3RyaWN0SWQgfHwgbnVsbCxcbiAgICAgICAgZGlzdHJpY3ROYW1lOiBkYXRhLmRpc3RyaWN0TmFtZSB8fCBudWxsLFxuICAgICAgICB2aWxsYWdlSWQ6IGRhdGEudmlsbGFnZUlkIHx8IG51bGwsXG4gICAgICAgIHZpbGxhZ2VOYW1lOiBkYXRhLnZpbGxhZ2VOYW1lIHx8IG51bGwsXG4gICAgICAgIHBvc3RhbENvZGU6IGRhdGEucG9zdGFsQ29kZSB8fCBudWxsLFxuICAgICAgICBjb21wYW55SWQ6IGRhdGEuY29tcGFueUlkIHx8IG51bGwsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gQ3JlYXRlIGluc3VyYW5jZSBpZiBwcm92aWRlZFxuICAgIGlmIChkYXRhLmluc3VyYW5jZSkge1xuICAgICAgYXdhaXQgSW5zdXJhbmNlLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBwYXRpZW50SWQ6IHBhdGllbnQuaWQsXG4gICAgICAgICAgcHJvdmlkZXI6IGRhdGEuaW5zdXJhbmNlLnByb3ZpZGVyLFxuICAgICAgICAgIG51bWJlcjogZGF0YS5pbnN1cmFuY2UubnVtYmVyIHx8IG51bGwsXG4gICAgICAgICAgdHlwZTogZGF0YS5pbnN1cmFuY2UudHlwZSB8fCBudWxsLFxuICAgICAgICAgIHN0YXR1czogZGF0YS5pbnN1cmFuY2Uuc3RhdHVzIHx8IFwiQWt0aWZcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCBkYXRlcyBiZWZvcmUgc2VuZGluZyByZXNwb25zZVxuICAgIGNvbnN0IGZvcm1hdHRlZFBhdGllbnQgPSB7XG4gICAgICAuLi5wYXRpZW50LFxuICAgICAgYmlydGhEYXRlOiBwYXRpZW50LmJpcnRoRGF0ZVxuICAgICAgICA/IHBhdGllbnQuYmlydGhEYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdXG4gICAgICAgIDogbnVsbCxcbiAgICAgIGNyZWF0ZWRBdDogcGF0aWVudC5jcmVhdGVkQXQgPyBwYXRpZW50LmNyZWF0ZWRBdC50b0lTT1N0cmluZygpIDogbnVsbCxcbiAgICAgIHVwZGF0ZWRBdDogcGF0aWVudC51cGRhdGVkQXQgPyBwYXRpZW50LnVwZGF0ZWRBdC50b0lTT1N0cmluZygpIDogbnVsbCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoZm9ybWF0dGVkUGF0aWVudCksIHtcbiAgICAgIHN0YXR1czogMjAxLFxuICAgICAgaGVhZGVyczogeyBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIiB9LFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjcmVhdGluZyBwYXRpZW50OlwiLCBlcnJvcik7XG5cbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gXCJQMjAwMlwiIHx8IGVycm9yLmNvZGUgPT09IFwiRVJfRFVQX0VOVFJZXCIpIHtcbiAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7IGVycm9yOiBcIk5JSyBzdWRhaCB0ZXJkYWZ0YXJcIiB9KSxcbiAgICAgICAge1xuICAgICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcbiAgICAgIEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6IFwiR2FnYWwgbWVuYW1iYWhrYW4gcGFzaWVuXCIgfSksXG4gICAgICB7XG4gICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInF1ZXJ5IiwiUGF0aWVudCIsIkluc3VyYW5jZSIsImRlbGF5IiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJmZXRjaFdpdGhSZXRyeSIsInVybCIsIm9wdGlvbnMiLCJtYXhSZXRyaWVzIiwiaSIsInJlc3BvbnNlIiwiZmV0Y2giLCJ0aW1lb3V0IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwibWVzc2FnZSIsIk1hdGgiLCJwb3ciLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwic2VhcmNoIiwiZ2V0IiwicGFnZSIsInBhcnNlSW50IiwibGltaXQiLCJhbGxQYXRpZW50cyIsInRvdGFsRnJvbUFQSSIsImN1cnJlbnRQYWdlIiwiaGFzTW9yZURhdGEiLCJiYXRjaFNpemUiLCJkZWxheUJldHdlZW5SZXF1ZXN0cyIsImFwaVVybCIsIm1ldGhvZCIsImhlYWRlcnMiLCJvayIsInN0YXR1cyIsImV4dGVybmFsRGF0YSIsImpzb24iLCJyYXdQYXRpZW50cyIsImRhdGEiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJ0cmFuc2Zvcm1lZFBhdGllbnRzIiwibWFwIiwicGF0aWVudCIsImlkIiwiTm9fTVIiLCJtcm4iLCJuYW1lIiwiTmFtYV9QYXNpZW4iLCJnZW5kZXIiLCJKZW5pc19LZWxhbWluIiwiYmlydGhEYXRlIiwiVGdsX0xhaGlyIiwic3BsaXQiLCJuaWsiLCJJZGVudGl0YXMiLCJmaW5kIiwidHlwZSIsIm5pcCIsInBob25lIiwiYWRkcmVzcyIsIkFsYW1hdF9SdW1haCIsIkFsYW1hdCIsImNpdHkiLCJLb3RhIiwicHJvdmluY2UiLCJQcm9waW5zaSIsImJsb29kVHlwZSIsIkdvbG9uZ2FuX0RhcmFoIiwicmVsaWdpb24iLCJBZ2FtYSIsIm1hcml0YWxTdGF0dXMiLCJTdGF0dXNfTWFyaXRhbCIsIm9jY3VwYXRpb24iLCJQZWtlcmphYW4iLCJlZHVjYXRpb24iLCJQZW5kaWRpa2FuIiwiY3JlYXRlZF9hdCIsImF1ZGl0dHJhaWwiLCJDcmVhdGVkRGF0ZSIsInVwZGF0ZWRfYXQiLCJMYXN0TW9kaWZpZWREYXRlIiwicHVzaCIsImZldGNoRXJyb3IiLCJmYWxsYmFja1VybCIsImZhbGxiYWNrUmVzcG9uc2UiLCJmYWxsYmFja0RhdGEiLCJmYWxsYmFja0Vycm9yIiwicGFnaW5hdGlvbiIsInRvdGFsIiwidG90YWxQYWdlcyIsImZpbHRlcmVkUGF0aWVudHMiLCJmaWx0ZXIiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwic3RhcnRJbmRleCIsImVuZEluZGV4IiwicGFnaW5hdGVkUGF0aWVudHMiLCJzbGljZSIsImNlaWwiLCJFcnJvciIsInN0YXR1c1RleHQiLCJwYXRpZW50cyIsIlBPU1QiLCJKU09OIiwic3RyaW5naWZ5IiwieWVhciIsIkRhdGUiLCJnZXRGdWxsWWVhciIsImxhc3RQYXRpZW50IiwiZmluZEZpcnN0Iiwid2hlcmUiLCJtck51bWJlciIsInN0YXJ0c1dpdGgiLCJvcmRlckJ5Iiwic2VxdWVuY2UiLCJ0b1N0cmluZyIsInBhZFN0YXJ0IiwiY3JlYXRlIiwidHJpbSIsImNpdGl6ZW5zaGlwIiwiZW1haWwiLCJwcm92aW5jZUlkIiwicHJvdmluY2VOYW1lIiwiY2l0eUlkIiwiY2l0eU5hbWUiLCJkaXN0cmljdElkIiwiZGlzdHJpY3ROYW1lIiwidmlsbGFnZUlkIiwidmlsbGFnZU5hbWUiLCJwb3N0YWxDb2RlIiwiY29tcGFueUlkIiwiaW5zdXJhbmNlIiwicGF0aWVudElkIiwicHJvdmlkZXIiLCJudW1iZXIiLCJmb3JtYXR0ZWRQYXRpZW50IiwidG9JU09TdHJpbmciLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJjb2RlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/patients/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/db.js":
/*!*******************!*\
  !*** ./lib/db.js ***!
  \*******************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getConnection: () => (/* binding */ getConnection),\n/* harmony export */   query: () => (/* binding */ query),\n/* harmony export */   rawQuery: () => (/* binding */ rawQuery),\n/* harmony export */   validateConnection: () => (/* binding */ validateConnection)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/mysql2/promise.js\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! dotenv */ \"(rsc)/./node_modules/dotenv/lib/main.js\");\n/* harmony import */ var url__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! url */ \"url\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n\n\n\n\n// Dapatkan path absolut ke root project\nconst __filename = (0,url__WEBPACK_IMPORTED_MODULE_2__.fileURLToPath)(\"file:///Volumes/Data-2/PHC/Project/dash-app/lib/db.js\");\nconst __dirname = (0,path__WEBPACK_IMPORTED_MODULE_3__.dirname)(__filename);\nconst rootDir = (0,path__WEBPACK_IMPORTED_MODULE_3__.resolve)(__dirname, \"..\");\n// Load environment variables dengan path absolut\ndotenv__WEBPACK_IMPORTED_MODULE_1__.config({\n    path: (0,path__WEBPACK_IMPORTED_MODULE_3__.resolve)(rootDir, \".env\")\n});\n// Log database configuration for debugging\nconsole.log(\"Database configuration:\", {\n    host: \"localhost\" || 0,\n    user: \"root\" || 0,\n    database: \"phc_dashboard\" || 0\n});\n// Konfigurasi database\nconst dbConfig = {\n    host: \"localhost\" || 0,\n    user: \"root\" || 0,\n    password: \"pr1k1t1w\" || 0,\n    database: \"phc_dashboard\" || 0,\n    waitForConnections: true,\n    connectionLimit: 10,\n    queueLimit: 0,\n    // Enable debug mode in development\n    debug: \"development\" === \"development\",\n    // Add connection timeout and error handling\n    connectTimeout: 10000,\n    // Convert LIMIT/OFFSET params to numbers\n    typeCast: function(field, next) {\n        if (field.type === \"TINY\" && field.length === 1) {\n            return field.string() === \"1\"; // convert to boolean\n        }\n        return next();\n    }\n};\n// Pool koneksi untuk digunakan di seluruh aplikasi\nconst pool = mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createPool(dbConfig);\n// Function untuk mendapatkan koneksi dari pool\nasync function getConnection() {\n    try {\n        return await pool.getConnection();\n    } catch (error) {\n        console.error(\"Error getting DB connection:\", error);\n        throw new Error(\"Database connection failed\");\n    }\n}\n// Query helper dengan error handling (menggunakan prepared statements)\nasync function query(sql, params = []) {\n    try {\n        // Ensure all parameters are properly formatted\n        const formattedParams = params.map((param)=>{\n            if (typeof param === \"number\") {\n                return Number(param); // Make sure number params are properly cast\n            }\n            return param;\n        });\n        console.log(\"Executing SQL with params:\", {\n            sql,\n            formattedParams\n        });\n        const [results] = await pool.execute(sql, formattedParams);\n        return results;\n    } catch (error) {\n        console.error(\"Database query error:\", error);\n        throw error;\n    }\n}\n// Query helper tanpa prepared statements untuk perintah seperti USE DATABASE\nasync function rawQuery(sql) {\n    try {\n        const connection = await getConnection();\n        try {\n            const [results] = await connection.query(sql);\n            return results;\n        } finally{\n            connection.release();\n        }\n    } catch (error) {\n        console.error(\"Database raw query error:\", error);\n        throw error;\n    }\n}\n// Validasi koneksi database pada startup\nasync function validateConnection() {\n    try {\n        const connection = await getConnection();\n        connection.release();\n        console.log(\"Database connection successful\");\n        return true;\n    } catch (error) {\n        console.error(\"Database connection failed:\", error);\n        return false;\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    query,\n    rawQuery,\n    getConnection,\n    validateConnection\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QywrQkFBK0JBO1FBQzdDLE9BQU87SUFDVDtBQUNGO0FBRUEsaUVBQWU7SUFDYkU7SUFDQVM7SUFDQVo7SUFDQWU7QUFDRixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIi9Wb2x1bWVzL0RhdGEtMi9QSEMvUHJvamVjdC9kYXNoLWFwcC9saWIvZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG15c3FsIGZyb20gXCJteXNxbDIvcHJvbWlzZVwiO1xuaW1wb3J0IGRvdGVudiBmcm9tIFwiZG90ZW52XCI7XG5pbXBvcnQgeyBmaWxlVVJMVG9QYXRoIH0gZnJvbSBcInVybFwiO1xuaW1wb3J0IHsgZGlybmFtZSwgcmVzb2x2ZSB9IGZyb20gXCJwYXRoXCI7XG5cbi8vIERhcGF0a2FuIHBhdGggYWJzb2x1dCBrZSByb290IHByb2plY3RcbmNvbnN0IF9fZmlsZW5hbWUgPSBmaWxlVVJMVG9QYXRoKGltcG9ydC5tZXRhLnVybCk7XG5jb25zdCBfX2Rpcm5hbWUgPSBkaXJuYW1lKF9fZmlsZW5hbWUpO1xuY29uc3Qgcm9vdERpciA9IHJlc29sdmUoX19kaXJuYW1lLCBcIi4uXCIpO1xuXG4vLyBMb2FkIGVudmlyb25tZW50IHZhcmlhYmxlcyBkZW5nYW4gcGF0aCBhYnNvbHV0XG5kb3RlbnYuY29uZmlnKHsgcGF0aDogcmVzb2x2ZShyb290RGlyLCBcIi5lbnZcIikgfSk7XG5cbi8vIExvZyBkYXRhYmFzZSBjb25maWd1cmF0aW9uIGZvciBkZWJ1Z2dpbmdcbmNvbnNvbGUubG9nKFwiRGF0YWJhc2UgY29uZmlndXJhdGlvbjpcIiwge1xuICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUIHx8IFwibG9jYWxob3N0XCIsXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgXCJyb290XCIsXG4gIGRhdGFiYXNlOiBwcm9jZXNzLmVudi5EQl9OQU1FIHx8IFwicGhjX2Rhc2hib2FyZFwiLFxuICAvLyBEb24ndCBsb2cgdGhlIHBhc3N3b3JkIGZvciBzZWN1cml0eSByZWFzb25zXG59KTtcblxuLy8gS29uZmlndXJhc2kgZGF0YWJhc2VcbmNvbnN0IGRiQ29uZmlnID0ge1xuICBob3N0OiBwcm9jZXNzLmVudi5EQl9IT1NUIHx8IFwibG9jYWxob3N0XCIsXG4gIHVzZXI6IHByb2Nlc3MuZW52LkRCX1VTRVIgfHwgXCJyb290XCIsXG4gIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCB8fCBcIlwiLFxuICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRSB8fCBcInBoY19kYXNoYm9hcmRcIixcbiAgd2FpdEZvckNvbm5lY3Rpb25zOiB0cnVlLFxuICBjb25uZWN0aW9uTGltaXQ6IDEwLFxuICBxdWV1ZUxpbWl0OiAwLFxuICAvLyBFbmFibGUgZGVidWcgbW9kZSBpbiBkZXZlbG9wbWVudFxuICBkZWJ1ZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIixcbiAgLy8gQWRkIGNvbm5lY3Rpb24gdGltZW91dCBhbmQgZXJyb3IgaGFuZGxpbmdcbiAgY29ubmVjdFRpbWVvdXQ6IDEwMDAwLCAvLyAxMCBzZWNvbmRzXG4gIC8vIENvbnZlcnQgTElNSVQvT0ZGU0VUIHBhcmFtcyB0byBudW1iZXJzXG4gIHR5cGVDYXN0OiBmdW5jdGlvbiAoZmllbGQsIG5leHQpIHtcbiAgICBpZiAoZmllbGQudHlwZSA9PT0gXCJUSU5ZXCIgJiYgZmllbGQubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gZmllbGQuc3RyaW5nKCkgPT09IFwiMVwiOyAvLyBjb252ZXJ0IHRvIGJvb2xlYW5cbiAgICB9XG4gICAgcmV0dXJuIG5leHQoKTtcbiAgfSxcbn07XG5cbi8vIFBvb2wga29uZWtzaSB1bnR1ayBkaWd1bmFrYW4gZGkgc2VsdXJ1aCBhcGxpa2FzaVxuY29uc3QgcG9vbCA9IG15c3FsLmNyZWF0ZVBvb2woZGJDb25maWcpO1xuXG4vLyBGdW5jdGlvbiB1bnR1ayBtZW5kYXBhdGthbiBrb25la3NpIGRhcmkgcG9vbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbm5lY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHBvb2wuZ2V0Q29ubmVjdGlvbigpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIERCIGNvbm5lY3Rpb246XCIsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZFwiKTtcbiAgfVxufVxuXG4vLyBRdWVyeSBoZWxwZXIgZGVuZ2FuIGVycm9yIGhhbmRsaW5nIChtZW5nZ3VuYWthbiBwcmVwYXJlZCBzdGF0ZW1lbnRzKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHF1ZXJ5KHNxbCwgcGFyYW1zID0gW10pIHtcbiAgdHJ5IHtcbiAgICAvLyBFbnN1cmUgYWxsIHBhcmFtZXRlcnMgYXJlIHByb3Blcmx5IGZvcm1hdHRlZFxuICAgIGNvbnN0IGZvcm1hdHRlZFBhcmFtcyA9IHBhcmFtcy5tYXAoKHBhcmFtKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHBhcmFtID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiBOdW1iZXIocGFyYW0pOyAvLyBNYWtlIHN1cmUgbnVtYmVyIHBhcmFtcyBhcmUgcHJvcGVybHkgY2FzdFxuICAgICAgfVxuICAgICAgcmV0dXJuIHBhcmFtO1xuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coXCJFeGVjdXRpbmcgU1FMIHdpdGggcGFyYW1zOlwiLCB7IHNxbCwgZm9ybWF0dGVkUGFyYW1zIH0pO1xuICAgIGNvbnN0IFtyZXN1bHRzXSA9IGF3YWl0IHBvb2wuZXhlY3V0ZShzcWwsIGZvcm1hdHRlZFBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIHF1ZXJ5IGVycm9yOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gUXVlcnkgaGVscGVyIHRhbnBhIHByZXBhcmVkIHN0YXRlbWVudHMgdW50dWsgcGVyaW50YWggc2VwZXJ0aSBVU0UgREFUQUJBU0VcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByYXdRdWVyeShzcWwpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgZ2V0Q29ubmVjdGlvbigpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBbcmVzdWx0c10gPSBhd2FpdCBjb25uZWN0aW9uLnF1ZXJ5KHNxbCk7XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9IGZpbmFsbHkge1xuICAgICAgY29ubmVjdGlvbi5yZWxlYXNlKCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSByYXcgcXVlcnkgZXJyb3I6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBWYWxpZGFzaSBrb25la3NpIGRhdGFiYXNlIHBhZGEgc3RhcnR1cFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlQ29ubmVjdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgZ2V0Q29ubmVjdGlvbigpO1xuICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICAgIGNvbnNvbGUubG9nKFwiRGF0YWJhc2UgY29ubmVjdGlvbiBzdWNjZXNzZnVsXCIpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJEYXRhYmFzZSBjb25uZWN0aW9uIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gIHF1ZXJ5LFxuICByYXdRdWVyeSxcbiAgZ2V0Q29ubmVjdGlvbixcbiAgdmFsaWRhdGVDb25uZWN0aW9uLFxufTtcbiJdLCJuYW1lcyI6WyJteXNxbCIsImRvdGVudiIsImZpbGVVUkxUb1BhdGgiLCJkaXJuYW1lIiwicmVzb2x2ZSIsIl9fZmlsZW5hbWUiLCJ1cmwiLCJfX2Rpcm5hbWUiLCJyb290RGlyIiwiY29uZmlnIiwicGF0aCIsImNvbnNvbGUiLCJsb2ciLCJob3N0IiwicHJvY2VzcyIsImVudiIsIkRCX0hPU1QiLCJ1c2VyIiwiREJfVVNFUiIsImRhdGFiYXNlIiwiREJfTkFNRSIsImRiQ29uZmlnIiwicGFzc3dvcmQiLCJEQl9QQVNTV09SRCIsIndhaXRGb3JDb25uZWN0aW9ucyIsImNvbm5lY3Rpb25MaW1pdCIsInF1ZXVlTGltaXQiLCJkZWJ1ZyIsImNvbm5lY3RUaW1lb3V0IiwidHlwZUNhc3QiLCJmaWVsZCIsIm5leHQiLCJ0eXBlIiwibGVuZ3RoIiwic3RyaW5nIiwicG9vbCIsImNyZWF0ZVBvb2wiLCJnZXRDb25uZWN0aW9uIiwiZXJyb3IiLCJFcnJvciIsInF1ZXJ5Iiwic3FsIiwicGFyYW1zIiwiZm9ybWF0dGVkUGFyYW1zIiwibWFwIiwicGFyYW0iLCJOdW1iZXIiLCJyZXN1bHRzIiwiZXhlY3V0ZSIsInJhd1F1ZXJ5IiwiY29ubmVjdGlvbiIsInJlbGVhc2UiLCJ2YWxpZGF0ZUNvbm5lY3Rpb24iXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.js\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.js":
/*!***********************!*\
  !*** ./lib/prisma.js ***!
  \***********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $transaction: () => (/* binding */ $transaction),\n/* harmony export */   Company: () => (/* binding */ Company),\n/* harmony export */   Doctor: () => (/* binding */ Doctor),\n/* harmony export */   ICD: () => (/* binding */ ICD),\n/* harmony export */   Insurance: () => (/* binding */ Insurance),\n/* harmony export */   Patient: () => (/* binding */ Patient),\n/* harmony export */   Polyclinic: () => (/* binding */ Polyclinic),\n/* harmony export */   PostalCode: () => (/* binding */ PostalCode),\n/* harmony export */   Treatment: () => (/* binding */ Treatment),\n/* harmony export */   User: () => (/* binding */ User),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getPatients: () => (/* binding */ getPatients),\n/* harmony export */   query: () => (/* reexport safe */ _db_js__WEBPACK_IMPORTED_MODULE_0__.query),\n/* harmony export */   rawQuery: () => (/* reexport safe */ _db_js__WEBPACK_IMPORTED_MODULE_0__.rawQuery)\n/* harmony export */ });\n/* harmony import */ var _db_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db.js */ \"(rsc)/./lib/db.js\");\n\n// Export fungsi query untuk digunakan di route API\n\n// Helper functions untuk User operations\nconst User = {\n    async findUnique (where) {\n        const conditions = [];\n        const params = [];\n        if (where.id) {\n            conditions.push(\"id = ?\");\n            params.push(where.id);\n        }\n        if (where.email) {\n            conditions.push(\"email = ?\");\n            params.push(where.email);\n        }\n        const sql = `SELECT * FROM users WHERE ${conditions.join(\" AND \")} LIMIT 1`;\n        const results = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return results[0] || null;\n    },\n    async findMany (options = {}) {\n        let sql = \"SELECT * FROM users\";\n        const params = [];\n        if (options.where) {\n            const conditions = [];\n            if (options.where.role) {\n                conditions.push(\"role = ?\");\n                params.push(options.where.role);\n            }\n            if (conditions.length > 0) {\n                sql += ` WHERE ${conditions.join(\" AND \")}`;\n            }\n        }\n        if (options.orderBy) {\n            if (options.orderBy.createdAt) {\n                sql += ` ORDER BY created_at ${options.orderBy.createdAt.toUpperCase()}`;\n            }\n        }\n        return await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n    },\n    async create (data) {\n        const sql = `\n      INSERT INTO users (email, password, name, role, created_at, updated_at)\n      VALUES (?, ?, ?, ?, NOW(), NOW())\n    `;\n        const params = [\n            data.email,\n            data.password,\n            data.name,\n            data.role || \"user\"\n        ];\n        const result = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        // Return the created user\n        return await this.findUnique({\n            id: result.insertId\n        });\n    },\n    async update (where, data) {\n        const setClauses = [];\n        const params = [];\n        if (data.name !== undefined) {\n            setClauses.push(\"name = ?\");\n            params.push(data.name);\n        }\n        if (data.email !== undefined) {\n            setClauses.push(\"email = ?\");\n            params.push(data.email);\n        }\n        if (data.password !== undefined) {\n            setClauses.push(\"password = ?\");\n            params.push(data.password);\n        }\n        if (data.role !== undefined) {\n            setClauses.push(\"role = ?\");\n            params.push(data.role);\n        }\n        setClauses.push(\"updated_at = NOW()\");\n        const sql = `UPDATE users SET ${setClauses.join(\", \")} WHERE id = ?`;\n        params.push(where.id);\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique(where);\n    }\n};\n// Helper functions untuk Patient operations\nconst Patient = {\n    async findUnique (where) {\n        const conditions = [];\n        const params = [];\n        if (where.id) {\n            conditions.push(\"id = ?\");\n            params.push(where.id);\n        }\n        if (where.mrNumber) {\n            conditions.push(\"mr_number = ?\");\n            params.push(where.mrNumber);\n        }\n        const sql = `SELECT * FROM patients WHERE ${conditions.join(\" AND \")} LIMIT 1`;\n        const results = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return results[0] || null;\n    },\n    async findMany (options = {}) {\n        let sql = \"SELECT * FROM patients\";\n        const params = [];\n        if (options.where) {\n            const conditions = [];\n            if (options.where.OR) {\n                const orConditions = [];\n                options.where.OR.forEach((condition)=>{\n                    if (condition.name && condition.name.contains) {\n                        orConditions.push(\"name LIKE ?\");\n                        params.push(`%${condition.name.contains}%`);\n                    }\n                    if (condition.nik && condition.nik.contains) {\n                        orConditions.push(\"nik LIKE ?\");\n                        params.push(`%${condition.nik.contains}%`);\n                    }\n                    if (condition.mrNumber && condition.mrNumber.contains) {\n                        orConditions.push(\"mr_number LIKE ?\");\n                        params.push(`%${condition.mrNumber.contains}%`);\n                    }\n                });\n                if (orConditions.length > 0) {\n                    conditions.push(`(${orConditions.join(\" OR \")})`);\n                }\n            }\n            if (conditions.length > 0) {\n                sql += ` WHERE ${conditions.join(\" AND \")}`;\n            }\n        }\n        if (options.include && options.include.insurance) {\n        // For now, just return patients without insurance data\n        // You can implement JOIN if needed\n        }\n        if (options.take) {\n            sql += ` LIMIT ${options.take}`;\n        }\n        return await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n    },\n    async create (data) {\n        const sql = `\n      INSERT INTO patients (\n        mr_number, name, nik, birth_date, gender, blood_type, \n        occupation, marital_status, nip, citizenship, address, \n        phone, email, province_id, province_name, city_id, city_name, \n        district_id, district_name, village_id, village_name, \n        postal_code, company_id, created_at, updated_at\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, NOW(), NOW())\n    `;\n        const params = [\n            data.mrNumber,\n            data.name,\n            data.nik,\n            data.birthDate,\n            data.gender,\n            data.bloodType,\n            data.occupation,\n            data.maritalStatus,\n            data.nip,\n            data.citizenship || \"WNI\",\n            data.address,\n            data.phone,\n            data.email,\n            data.provinceId,\n            data.provinceName,\n            data.cityId,\n            data.cityName,\n            data.districtId,\n            data.districtName,\n            data.villageId,\n            data.villageName,\n            data.postalCode,\n            data.companyId\n        ];\n        const result = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique({\n            id: result.insertId\n        });\n    },\n    async update (where, data) {\n        const setClauses = [];\n        const params = [];\n        Object.keys(data).forEach((key)=>{\n            if (data[key] !== undefined && key !== \"insurance\") {\n                const dbKey = key === \"mrNumber\" ? \"mr_number\" : key === \"birthDate\" ? \"birth_date\" : key === \"bloodType\" ? \"blood_type\" : key === \"maritalStatus\" ? \"marital_status\" : key === \"provinceId\" ? \"province_id\" : key === \"provinceName\" ? \"province_name\" : key === \"cityId\" ? \"city_id\" : key === \"cityName\" ? \"city_name\" : key === \"districtId\" ? \"district_id\" : key === \"districtName\" ? \"district_name\" : key === \"villageId\" ? \"village_id\" : key === \"villageName\" ? \"village_name\" : key === \"postalCode\" ? \"postal_code\" : key === \"companyId\" ? \"company_id\" : key;\n                setClauses.push(`${dbKey} = ?`);\n                params.push(data[key]);\n            }\n        });\n        setClauses.push(\"updated_at = NOW()\");\n        const sql = `UPDATE patients SET ${setClauses.join(\", \")} WHERE id = ?`;\n        params.push(where.id);\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique(where);\n    },\n    async delete (where) {\n        const sql = \"DELETE FROM patients WHERE id = ?\";\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return {\n            id: where.id\n        };\n    },\n    async findFirst (options) {\n        let sql = \"SELECT * FROM patients\";\n        const params = [];\n        if (options.where) {\n            const conditions = [];\n            // Handle mrNumber startsWith\n            if (options.where.mrNumber && options.where.mrNumber.startsWith) {\n                conditions.push(\"mr_number LIKE ?\");\n                params.push(`${options.where.mrNumber.startsWith}%`);\n            }\n            if (conditions.length > 0) {\n                sql += ` WHERE ${conditions.join(\" AND \")}`;\n            }\n        }\n        // Handle orderBy\n        if (options.orderBy) {\n            if (options.orderBy.mrNumber) {\n                sql += ` ORDER BY mr_number ${options.orderBy.mrNumber.toUpperCase()}`;\n            }\n        }\n        sql += \" LIMIT 1\";\n        const results = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return results[0] || null;\n    }\n};\n// Helper functions untuk Company operations\nconst Company = {\n    async findUnique (where) {\n        const sql = \"SELECT * FROM companies WHERE id = ? LIMIT 1\";\n        const results = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return results[0] || null;\n    },\n    async findMany (options = {}) {\n        let sql = \"SELECT * FROM companies\";\n        if (options.orderBy && options.orderBy.name) {\n            sql += ` ORDER BY name ${options.orderBy.name.toUpperCase()}`;\n        }\n        return await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql);\n    },\n    async create (data) {\n        const sql = `\n      INSERT INTO companies (name, address, phone, email, created_at, updated_at)\n      VALUES (?, ?, ?, ?, NOW(), NOW())\n    `;\n        const params = [\n            data.name,\n            data.address,\n            data.phone,\n            data.email\n        ];\n        const result = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique({\n            id: result.insertId\n        });\n    },\n    async update (where, data) {\n        const setClauses = [];\n        const params = [];\n        [\n            \"name\",\n            \"address\",\n            \"phone\",\n            \"email\"\n        ].forEach((field)=>{\n            if (data[field] !== undefined) {\n                setClauses.push(`${field} = ?`);\n                params.push(data[field]);\n            }\n        });\n        setClauses.push(\"updated_at = NOW()\");\n        const sql = `UPDATE companies SET ${setClauses.join(\", \")} WHERE id = ?`;\n        params.push(where.id);\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique(where);\n    },\n    async delete (where) {\n        const sql = \"DELETE FROM companies WHERE id = ?\";\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return {\n            id: where.id\n        };\n    }\n};\n// Helper functions untuk Doctor operations\nconst Doctor = {\n    async findUnique (where) {\n        const sql = \"SELECT * FROM doctors WHERE id = ? LIMIT 1\";\n        const results = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return results[0] || null;\n    },\n    async findMany (options = {}) {\n        let sql = \"SELECT * FROM doctors\";\n        if (options.orderBy && options.orderBy.name) {\n            sql += ` ORDER BY name ${options.orderBy.name.toUpperCase()}`;\n        }\n        return await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql);\n    },\n    async create (data) {\n        const sql = `\n      INSERT INTO doctors (name, license_number, specialization, phone, email, created_at, updated_at)\n      VALUES (?, ?, ?, ?, ?, NOW(), NOW())\n    `;\n        const params = [\n            data.name,\n            data.licenseNumber,\n            data.specialization,\n            data.phone,\n            data.email\n        ];\n        const result = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique({\n            id: result.insertId\n        });\n    },\n    async update (where, data) {\n        const setClauses = [];\n        const params = [];\n        [\n            \"name\",\n            \"licenseNumber\",\n            \"specialization\",\n            \"phone\",\n            \"email\"\n        ].forEach((field)=>{\n            if (data[field] !== undefined) {\n                const dbField = field === \"licenseNumber\" ? \"license_number\" : field;\n                setClauses.push(`${dbField} = ?`);\n                params.push(data[field]);\n            }\n        });\n        setClauses.push(\"updated_at = NOW()\");\n        const sql = `UPDATE doctors SET ${setClauses.join(\", \")} WHERE id = ?`;\n        params.push(where.id);\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique(where);\n    },\n    async delete (where) {\n        const sql = \"DELETE FROM doctors WHERE id = ?\";\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return {\n            id: where.id\n        };\n    }\n};\n// Helper functions untuk Insurance operations\nconst Insurance = {\n    async findUnique (where) {\n        const conditions = [];\n        const params = [];\n        if (where.id) {\n            conditions.push(\"id = ?\");\n            params.push(where.id);\n        }\n        if (where.patientId) {\n            conditions.push(\"patient_id = ?\");\n            params.push(where.patientId);\n        }\n        const sql = `SELECT * FROM insurance WHERE ${conditions.join(\" AND \")} LIMIT 1`;\n        const results = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return results[0] || null;\n    },\n    async findMany (options = {}) {\n        let sql = \"SELECT * FROM insurance\";\n        if (options.orderBy && options.orderBy.provider) {\n            sql += ` ORDER BY provider ${options.orderBy.provider.toUpperCase()}`;\n        }\n        return await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql);\n    },\n    async create (data) {\n        const sql = `\n      INSERT INTO insurance (provider, number, type, status, patient_id, created_at, updated_at)\n      VALUES (?, ?, ?, ?, ?, NOW(), NOW())\n    `;\n        const params = [\n            data.provider,\n            data.number,\n            data.type,\n            data.status,\n            data.patientId\n        ];\n        const result = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique({\n            id: result.insertId\n        });\n    },\n    async update (where, data) {\n        const setClauses = [];\n        const params = [];\n        [\n            \"provider\",\n            \"number\",\n            \"type\",\n            \"status\"\n        ].forEach((field)=>{\n            if (data[field] !== undefined) {\n                setClauses.push(`${field} = ?`);\n                params.push(data[field]);\n            }\n        });\n        setClauses.push(\"updated_at = NOW()\");\n        const sql = `UPDATE insurance SET ${setClauses.join(\", \")} WHERE id = ?`;\n        params.push(where.id);\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique(where);\n    },\n    async delete (where) {\n        const sql = \"DELETE FROM insurance WHERE id = ?\";\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return {\n            id: where.id\n        };\n    },\n    async deleteMany (where) {\n        const sql = \"DELETE FROM insurance WHERE patient_id = ?\";\n        return await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.patientId\n        ]);\n    }\n};\n// Helper functions untuk ICD operations\nconst ICD = {\n    async findUnique (where) {\n        const sql = \"SELECT * FROM icd_codes WHERE id = ? LIMIT 1\";\n        const results = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return results[0] || null;\n    },\n    async findMany (options = {}) {\n        let sql = \"SELECT * FROM icd_codes\";\n        if (options.orderBy && options.orderBy.code) {\n            sql += ` ORDER BY code ${options.orderBy.code.toUpperCase()}`;\n        }\n        return await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql);\n    },\n    async create (data) {\n        const sql = `\n      INSERT INTO icd_codes (code, description, created_at, updated_at)\n      VALUES (?, ?, NOW(), NOW())\n    `;\n        const params = [\n            data.code,\n            data.description\n        ];\n        const result = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique({\n            id: result.insertId\n        });\n    },\n    async update (where, data) {\n        const setClauses = [];\n        const params = [];\n        [\n            \"code\",\n            \"description\"\n        ].forEach((field)=>{\n            if (data[field] !== undefined) {\n                setClauses.push(`${field} = ?`);\n                params.push(data[field]);\n            }\n        });\n        setClauses.push(\"updated_at = NOW()\");\n        const sql = `UPDATE icd_codes SET ${setClauses.join(\", \")} WHERE id = ?`;\n        params.push(where.id);\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique(where);\n    },\n    async delete (where) {\n        const sql = \"DELETE FROM icd_codes WHERE id = ?\";\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return {\n            id: where.id\n        };\n    }\n};\n// Helper functions untuk Treatment operations\nconst Treatment = {\n    async findUnique (where) {\n        const sql = \"SELECT * FROM treatments WHERE id = ? LIMIT 1\";\n        const results = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return results[0] || null;\n    },\n    async findMany (options = {}) {\n        let sql = \"SELECT * FROM treatments\";\n        if (options.orderBy && options.orderBy.name) {\n            sql += ` ORDER BY name ${options.orderBy.name.toUpperCase()}`;\n        }\n        return await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql);\n    },\n    async create (data) {\n        const sql = `\n      INSERT INTO treatments (name, code, price, created_at, updated_at)\n      VALUES (?, ?, ?, NOW(), NOW())\n    `;\n        const params = [\n            data.name,\n            data.code,\n            data.price\n        ];\n        const result = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique({\n            id: result.insertId\n        });\n    },\n    async update (where, data) {\n        const setClauses = [];\n        const params = [];\n        [\n            \"name\",\n            \"code\",\n            \"price\"\n        ].forEach((field)=>{\n            if (data[field] !== undefined) {\n                setClauses.push(`${field} = ?`);\n                params.push(data[field]);\n            }\n        });\n        setClauses.push(\"updated_at = NOW()\");\n        const sql = `UPDATE treatments SET ${setClauses.join(\", \")} WHERE id = ?`;\n        params.push(where.id);\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique(where);\n    },\n    async delete (where) {\n        const sql = \"DELETE FROM treatments WHERE id = ?\";\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return {\n            id: where.id\n        };\n    }\n};\n// Helper functions untuk Polyclinic operations\nconst Polyclinic = {\n    async findUnique (where) {\n        const sql = \"SELECT * FROM polyclinics WHERE id = ? LIMIT 1\";\n        const results = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return results[0] || null;\n    },\n    async findMany (options = {}) {\n        let sql = \"SELECT * FROM polyclinics\";\n        if (options.orderBy && options.orderBy.name) {\n            sql += ` ORDER BY name ${options.orderBy.name.toUpperCase()}`;\n        }\n        return await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql);\n    },\n    async create (data) {\n        const sql = `\n      INSERT INTO polyclinics (name, description, created_at, updated_at)\n      VALUES (?, ?, NOW(), NOW())\n    `;\n        const params = [\n            data.name,\n            data.description\n        ];\n        const result = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique({\n            id: result.insertId\n        });\n    },\n    async update (where, data) {\n        const setClauses = [];\n        const params = [];\n        [\n            \"name\",\n            \"description\"\n        ].forEach((field)=>{\n            if (data[field] !== undefined) {\n                setClauses.push(`${field} = ?`);\n                params.push(data[field]);\n            }\n        });\n        setClauses.push(\"updated_at = NOW()\");\n        const sql = `UPDATE polyclinics SET ${setClauses.join(\", \")} WHERE id = ?`;\n        params.push(where.id);\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findUnique(where);\n    },\n    async delete (where) {\n        const sql = \"DELETE FROM polyclinics WHERE id = ?\";\n        await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, [\n            where.id\n        ]);\n        return {\n            id: where.id\n        };\n    }\n};\n// Helper functions untuk PostalCode operations\nconst PostalCode = {\n    async findFirst (where) {\n        const conditions = [];\n        const params = [];\n        if (where.code) {\n            conditions.push(\"code = ?\");\n            params.push(where.code);\n        }\n        const sql = `SELECT * FROM postal_codes WHERE ${conditions.join(\" AND \")} LIMIT 1`;\n        const results = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return results[0] || null;\n    },\n    async create (data) {\n        const sql = `\n      INSERT INTO postal_codes (code, city, province, created_at, updated_at)\n      VALUES (?, ?, ?, NOW(), NOW())\n    `;\n        const params = [\n            data.code,\n            data.city,\n            data.province\n        ];\n        const result = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n        return await this.findFirst({\n            code: data.code\n        });\n    }\n};\n// Transaction helper\nasync function $transaction(operations) {\n    const connection = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.getConnection)();\n    try {\n        await connection.beginTransaction();\n        const results = [];\n        for (const operation of operations){\n            // Execute each operation within the transaction\n            if (typeof operation === \"function\") {\n                const result = await operation();\n                results.push(result);\n            }\n        }\n        await connection.commit();\n        return results;\n    } catch (error) {\n        await connection.rollback();\n        throw error;\n    } finally{\n        connection.release();\n    }\n}\n// Fungsi helper untuk operasi CRUD pasien (backward compatibility)\nasync function getPatients(search = \"\", page = 1, limit = 10) {\n    const offset = (page - 1) * limit;\n    let sql = \"SELECT * FROM patients\";\n    let params = [];\n    if (search) {\n        sql += \" WHERE name LIKE ? OR mrn LIKE ?\";\n        params = [\n            `%${search}%`,\n            `%${search}%`\n        ];\n    }\n    sql += \" ORDER BY created_at DESC LIMIT ? OFFSET ?\";\n    params.push(parseInt(limit), parseInt(offset));\n    const patients = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(sql, params);\n    // Dapatkan total\n    let countSql = \"SELECT COUNT(*) as total FROM patients\";\n    if (search) {\n        countSql += \" WHERE name LIKE ? OR mrn LIKE ?\";\n    }\n    const countResults = await (0,_db_js__WEBPACK_IMPORTED_MODULE_0__.query)(countSql, search ? [\n        `%${search}%`,\n        `%${search}%`\n    ] : []);\n    const total = countResults[0]?.total || 0;\n    return {\n        data: patients,\n        pagination: {\n            total,\n            page: parseInt(page),\n            limit: parseInt(limit),\n            totalPages: Math.ceil(total / limit)\n        }\n    };\n}\n// Export default object untuk kompatibilitas dengan code yang mungkin masih menggunakan prisma.* syntax\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    user: User,\n    patient: Patient,\n    company: Company,\n    doctor: Doctor,\n    insurance: Insurance,\n    icd: ICD,\n    treatment: Treatment,\n    polyclinic: Polyclinic,\n    postalCode: PostalCode,\n    $transaction,\n    $disconnect: ()=>Promise.resolve()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7S0FBQyxHQUFHLEVBQUU7SUFFOUMsTUFBTVEsUUFBUUQsWUFBWSxDQUFDLEVBQUUsRUFBRUMsU0FBUztJQUV4QyxPQUFPO1FBQ0xyRixNQUFNa0Y7UUFDTkksWUFBWTtZQUNWRDtZQUNBUCxNQUFNRyxTQUFTSDtZQUNmQyxPQUFPRSxTQUFTRjtZQUNoQlEsWUFBWUMsS0FBS0MsSUFBSSxDQUFDSixRQUFRTjtRQUNoQztJQUNGO0FBQ0Y7QUFFQSx3R0FBd0c7QUFDeEcsaUVBQWU7SUFDYlcsTUFBTTdHO0lBQ044RyxTQUFTbkY7SUFDVG9GLFNBQVMvQztJQUNUZ0QsUUFBUTlDO0lBQ1I5QixXQUFXa0M7SUFDWDJDLEtBQUtwQztJQUNMcUMsV0FBV2xDO0lBQ1htQyxZQUFZakM7SUFDWjNCLFlBQVk0QjtJQUNaRztJQUNBOEIsYUFBYSxJQUFNQyxRQUFRQyxPQUFPO0FBQ3BDLENBQUMsRUFBQyIsInNvdXJjZXMiOlsiL1ZvbHVtZXMvRGF0YS0yL1BIQy9Qcm9qZWN0L2Rhc2gtYXBwL2xpYi9wcmlzbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcXVlcnksIHJhd1F1ZXJ5LCBnZXRDb25uZWN0aW9uIH0gZnJvbSBcIi4vZGIuanNcIjtcblxuLy8gRXhwb3J0IGZ1bmdzaSBxdWVyeSB1bnR1ayBkaWd1bmFrYW4gZGkgcm91dGUgQVBJXG5leHBvcnQgeyBxdWVyeSwgcmF3UXVlcnkgfTtcblxuLy8gSGVscGVyIGZ1bmN0aW9ucyB1bnR1ayBVc2VyIG9wZXJhdGlvbnNcbmV4cG9ydCBjb25zdCBVc2VyID0ge1xuICBhc3luYyBmaW5kVW5pcXVlKHdoZXJlKSB7XG4gICAgY29uc3QgY29uZGl0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gICAgaWYgKHdoZXJlLmlkKSB7XG4gICAgICBjb25kaXRpb25zLnB1c2goXCJpZCA9ID9cIik7XG4gICAgICBwYXJhbXMucHVzaCh3aGVyZS5pZCk7XG4gICAgfVxuICAgIGlmICh3aGVyZS5lbWFpbCkge1xuICAgICAgY29uZGl0aW9ucy5wdXNoKFwiZW1haWwgPSA/XCIpO1xuICAgICAgcGFyYW1zLnB1c2god2hlcmUuZW1haWwpO1xuICAgIH1cblxuICAgIGNvbnN0IHNxbCA9IGBTRUxFQ1QgKiBGUk9NIHVzZXJzIFdIRVJFICR7Y29uZGl0aW9ucy5qb2luKFwiIEFORCBcIil9IExJTUlUIDFgO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBxdWVyeShzcWwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdHNbMF0gfHwgbnVsbDtcbiAgfSxcblxuICBhc3luYyBmaW5kTWFueShvcHRpb25zID0ge30pIHtcbiAgICBsZXQgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIHVzZXJzXCI7XG4gICAgY29uc3QgcGFyYW1zID0gW107XG5cbiAgICBpZiAob3B0aW9ucy53aGVyZSkge1xuICAgICAgY29uc3QgY29uZGl0aW9ucyA9IFtdO1xuICAgICAgaWYgKG9wdGlvbnMud2hlcmUucm9sZSkge1xuICAgICAgICBjb25kaXRpb25zLnB1c2goXCJyb2xlID0gP1wiKTtcbiAgICAgICAgcGFyYW1zLnB1c2gob3B0aW9ucy53aGVyZS5yb2xlKTtcbiAgICAgIH1cbiAgICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3FsICs9IGAgV0hFUkUgJHtjb25kaXRpb25zLmpvaW4oXCIgQU5EIFwiKX1gO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLm9yZGVyQnkpIHtcbiAgICAgIGlmIChvcHRpb25zLm9yZGVyQnkuY3JlYXRlZEF0KSB7XG4gICAgICAgIHNxbCArPSBgIE9SREVSIEJZIGNyZWF0ZWRfYXQgJHtvcHRpb25zLm9yZGVyQnkuY3JlYXRlZEF0LnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgcXVlcnkoc3FsLCBwYXJhbXMpO1xuICB9LFxuXG4gIGFzeW5jIGNyZWF0ZShkYXRhKSB7XG4gICAgY29uc3Qgc3FsID0gYFxuICAgICAgSU5TRVJUIElOVE8gdXNlcnMgKGVtYWlsLCBwYXNzd29yZCwgbmFtZSwgcm9sZSwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdClcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPywgTk9XKCksIE5PVygpKVxuICAgIGA7XG4gICAgY29uc3QgcGFyYW1zID0gW2RhdGEuZW1haWwsIGRhdGEucGFzc3dvcmQsIGRhdGEubmFtZSwgZGF0YS5yb2xlIHx8IFwidXNlclwiXTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeShzcWwsIHBhcmFtcyk7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGNyZWF0ZWQgdXNlclxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRVbmlxdWUoeyBpZDogcmVzdWx0Lmluc2VydElkIH0pO1xuICB9LFxuXG4gIGFzeW5jIHVwZGF0ZSh3aGVyZSwgZGF0YSkge1xuICAgIGNvbnN0IHNldENsYXVzZXMgPSBbXTtcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcblxuICAgIGlmIChkYXRhLm5hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2V0Q2xhdXNlcy5wdXNoKFwibmFtZSA9ID9cIik7XG4gICAgICBwYXJhbXMucHVzaChkYXRhLm5hbWUpO1xuICAgIH1cbiAgICBpZiAoZGF0YS5lbWFpbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBzZXRDbGF1c2VzLnB1c2goXCJlbWFpbCA9ID9cIik7XG4gICAgICBwYXJhbXMucHVzaChkYXRhLmVtYWlsKTtcbiAgICB9XG4gICAgaWYgKGRhdGEucGFzc3dvcmQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2V0Q2xhdXNlcy5wdXNoKFwicGFzc3dvcmQgPSA/XCIpO1xuICAgICAgcGFyYW1zLnB1c2goZGF0YS5wYXNzd29yZCk7XG4gICAgfVxuICAgIGlmIChkYXRhLnJvbGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgc2V0Q2xhdXNlcy5wdXNoKFwicm9sZSA9ID9cIik7XG4gICAgICBwYXJhbXMucHVzaChkYXRhLnJvbGUpO1xuICAgIH1cblxuICAgIHNldENsYXVzZXMucHVzaChcInVwZGF0ZWRfYXQgPSBOT1coKVwiKTtcblxuICAgIGNvbnN0IHNxbCA9IGBVUERBVEUgdXNlcnMgU0VUICR7c2V0Q2xhdXNlcy5qb2luKFwiLCBcIil9IFdIRVJFIGlkID0gP2A7XG4gICAgcGFyYW1zLnB1c2god2hlcmUuaWQpO1xuXG4gICAgYXdhaXQgcXVlcnkoc3FsLCBwYXJhbXMpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRVbmlxdWUod2hlcmUpO1xuICB9LFxufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9ucyB1bnR1ayBQYXRpZW50IG9wZXJhdGlvbnNcbmV4cG9ydCBjb25zdCBQYXRpZW50ID0ge1xuICBhc3luYyBmaW5kVW5pcXVlKHdoZXJlKSB7XG4gICAgY29uc3QgY29uZGl0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gICAgaWYgKHdoZXJlLmlkKSB7XG4gICAgICBjb25kaXRpb25zLnB1c2goXCJpZCA9ID9cIik7XG4gICAgICBwYXJhbXMucHVzaCh3aGVyZS5pZCk7XG4gICAgfVxuICAgIGlmICh3aGVyZS5tck51bWJlcikge1xuICAgICAgY29uZGl0aW9ucy5wdXNoKFwibXJfbnVtYmVyID0gP1wiKTtcbiAgICAgIHBhcmFtcy5wdXNoKHdoZXJlLm1yTnVtYmVyKTtcbiAgICB9XG5cbiAgICBjb25zdCBzcWwgPSBgU0VMRUNUICogRlJPTSBwYXRpZW50cyBXSEVSRSAke2NvbmRpdGlvbnMuam9pbihcbiAgICAgIFwiIEFORCBcIlxuICAgICl9IExJTUlUIDFgO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBxdWVyeShzcWwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdHNbMF0gfHwgbnVsbDtcbiAgfSxcblxuICBhc3luYyBmaW5kTWFueShvcHRpb25zID0ge30pIHtcbiAgICBsZXQgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIHBhdGllbnRzXCI7XG4gICAgY29uc3QgcGFyYW1zID0gW107XG5cbiAgICBpZiAob3B0aW9ucy53aGVyZSkge1xuICAgICAgY29uc3QgY29uZGl0aW9ucyA9IFtdO1xuICAgICAgaWYgKG9wdGlvbnMud2hlcmUuT1IpIHtcbiAgICAgICAgY29uc3Qgb3JDb25kaXRpb25zID0gW107XG4gICAgICAgIG9wdGlvbnMud2hlcmUuT1IuZm9yRWFjaCgoY29uZGl0aW9uKSA9PiB7XG4gICAgICAgICAgaWYgKGNvbmRpdGlvbi5uYW1lICYmIGNvbmRpdGlvbi5uYW1lLmNvbnRhaW5zKSB7XG4gICAgICAgICAgICBvckNvbmRpdGlvbnMucHVzaChcIm5hbWUgTElLRSA/XCIpO1xuICAgICAgICAgICAgcGFyYW1zLnB1c2goYCUke2NvbmRpdGlvbi5uYW1lLmNvbnRhaW5zfSVgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbmRpdGlvbi5uaWsgJiYgY29uZGl0aW9uLm5pay5jb250YWlucykge1xuICAgICAgICAgICAgb3JDb25kaXRpb25zLnB1c2goXCJuaWsgTElLRSA/XCIpO1xuICAgICAgICAgICAgcGFyYW1zLnB1c2goYCUke2NvbmRpdGlvbi5uaWsuY29udGFpbnN9JWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29uZGl0aW9uLm1yTnVtYmVyICYmIGNvbmRpdGlvbi5tck51bWJlci5jb250YWlucykge1xuICAgICAgICAgICAgb3JDb25kaXRpb25zLnB1c2goXCJtcl9udW1iZXIgTElLRSA/XCIpO1xuICAgICAgICAgICAgcGFyYW1zLnB1c2goYCUke2NvbmRpdGlvbi5tck51bWJlci5jb250YWluc30lYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG9yQ29uZGl0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uZGl0aW9ucy5wdXNoKGAoJHtvckNvbmRpdGlvbnMuam9pbihcIiBPUiBcIil9KWApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjb25kaXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc3FsICs9IGAgV0hFUkUgJHtjb25kaXRpb25zLmpvaW4oXCIgQU5EIFwiKX1gO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcHRpb25zLmluY2x1ZGUgJiYgb3B0aW9ucy5pbmNsdWRlLmluc3VyYW5jZSkge1xuICAgICAgLy8gRm9yIG5vdywganVzdCByZXR1cm4gcGF0aWVudHMgd2l0aG91dCBpbnN1cmFuY2UgZGF0YVxuICAgICAgLy8gWW91IGNhbiBpbXBsZW1lbnQgSk9JTiBpZiBuZWVkZWRcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy50YWtlKSB7XG4gICAgICBzcWwgKz0gYCBMSU1JVCAke29wdGlvbnMudGFrZX1gO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBxdWVyeShzcWwsIHBhcmFtcyk7XG4gIH0sXG5cbiAgYXN5bmMgY3JlYXRlKGRhdGEpIHtcbiAgICBjb25zdCBzcWwgPSBgXG4gICAgICBJTlNFUlQgSU5UTyBwYXRpZW50cyAoXG4gICAgICAgIG1yX251bWJlciwgbmFtZSwgbmlrLCBiaXJ0aF9kYXRlLCBnZW5kZXIsIGJsb29kX3R5cGUsIFxuICAgICAgICBvY2N1cGF0aW9uLCBtYXJpdGFsX3N0YXR1cywgbmlwLCBjaXRpemVuc2hpcCwgYWRkcmVzcywgXG4gICAgICAgIHBob25lLCBlbWFpbCwgcHJvdmluY2VfaWQsIHByb3ZpbmNlX25hbWUsIGNpdHlfaWQsIGNpdHlfbmFtZSwgXG4gICAgICAgIGRpc3RyaWN0X2lkLCBkaXN0cmljdF9uYW1lLCB2aWxsYWdlX2lkLCB2aWxsYWdlX25hbWUsIFxuICAgICAgICBwb3N0YWxfY29kZSwgY29tcGFueV9pZCwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdFxuICAgICAgKSBWQUxVRVMgKD8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sID8sIE5PVygpLCBOT1coKSlcbiAgICBgO1xuXG4gICAgY29uc3QgcGFyYW1zID0gW1xuICAgICAgZGF0YS5tck51bWJlcixcbiAgICAgIGRhdGEubmFtZSxcbiAgICAgIGRhdGEubmlrLFxuICAgICAgZGF0YS5iaXJ0aERhdGUsXG4gICAgICBkYXRhLmdlbmRlcixcbiAgICAgIGRhdGEuYmxvb2RUeXBlLFxuICAgICAgZGF0YS5vY2N1cGF0aW9uLFxuICAgICAgZGF0YS5tYXJpdGFsU3RhdHVzLFxuICAgICAgZGF0YS5uaXAsXG4gICAgICBkYXRhLmNpdGl6ZW5zaGlwIHx8IFwiV05JXCIsXG4gICAgICBkYXRhLmFkZHJlc3MsXG4gICAgICBkYXRhLnBob25lLFxuICAgICAgZGF0YS5lbWFpbCxcbiAgICAgIGRhdGEucHJvdmluY2VJZCxcbiAgICAgIGRhdGEucHJvdmluY2VOYW1lLFxuICAgICAgZGF0YS5jaXR5SWQsXG4gICAgICBkYXRhLmNpdHlOYW1lLFxuICAgICAgZGF0YS5kaXN0cmljdElkLFxuICAgICAgZGF0YS5kaXN0cmljdE5hbWUsXG4gICAgICBkYXRhLnZpbGxhZ2VJZCxcbiAgICAgIGRhdGEudmlsbGFnZU5hbWUsXG4gICAgICBkYXRhLnBvc3RhbENvZGUsXG4gICAgICBkYXRhLmNvbXBhbnlJZCxcbiAgICBdO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCBwYXJhbXMpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRVbmlxdWUoeyBpZDogcmVzdWx0Lmluc2VydElkIH0pO1xuICB9LFxuXG4gIGFzeW5jIHVwZGF0ZSh3aGVyZSwgZGF0YSkge1xuICAgIGNvbnN0IHNldENsYXVzZXMgPSBbXTtcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcblxuICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgaWYgKGRhdGFba2V5XSAhPT0gdW5kZWZpbmVkICYmIGtleSAhPT0gXCJpbnN1cmFuY2VcIikge1xuICAgICAgICBjb25zdCBkYktleSA9XG4gICAgICAgICAga2V5ID09PSBcIm1yTnVtYmVyXCJcbiAgICAgICAgICAgID8gXCJtcl9udW1iZXJcIlxuICAgICAgICAgICAgOiBrZXkgPT09IFwiYmlydGhEYXRlXCJcbiAgICAgICAgICAgID8gXCJiaXJ0aF9kYXRlXCJcbiAgICAgICAgICAgIDoga2V5ID09PSBcImJsb29kVHlwZVwiXG4gICAgICAgICAgICA/IFwiYmxvb2RfdHlwZVwiXG4gICAgICAgICAgICA6IGtleSA9PT0gXCJtYXJpdGFsU3RhdHVzXCJcbiAgICAgICAgICAgID8gXCJtYXJpdGFsX3N0YXR1c1wiXG4gICAgICAgICAgICA6IGtleSA9PT0gXCJwcm92aW5jZUlkXCJcbiAgICAgICAgICAgID8gXCJwcm92aW5jZV9pZFwiXG4gICAgICAgICAgICA6IGtleSA9PT0gXCJwcm92aW5jZU5hbWVcIlxuICAgICAgICAgICAgPyBcInByb3ZpbmNlX25hbWVcIlxuICAgICAgICAgICAgOiBrZXkgPT09IFwiY2l0eUlkXCJcbiAgICAgICAgICAgID8gXCJjaXR5X2lkXCJcbiAgICAgICAgICAgIDoga2V5ID09PSBcImNpdHlOYW1lXCJcbiAgICAgICAgICAgID8gXCJjaXR5X25hbWVcIlxuICAgICAgICAgICAgOiBrZXkgPT09IFwiZGlzdHJpY3RJZFwiXG4gICAgICAgICAgICA/IFwiZGlzdHJpY3RfaWRcIlxuICAgICAgICAgICAgOiBrZXkgPT09IFwiZGlzdHJpY3ROYW1lXCJcbiAgICAgICAgICAgID8gXCJkaXN0cmljdF9uYW1lXCJcbiAgICAgICAgICAgIDoga2V5ID09PSBcInZpbGxhZ2VJZFwiXG4gICAgICAgICAgICA/IFwidmlsbGFnZV9pZFwiXG4gICAgICAgICAgICA6IGtleSA9PT0gXCJ2aWxsYWdlTmFtZVwiXG4gICAgICAgICAgICA/IFwidmlsbGFnZV9uYW1lXCJcbiAgICAgICAgICAgIDoga2V5ID09PSBcInBvc3RhbENvZGVcIlxuICAgICAgICAgICAgPyBcInBvc3RhbF9jb2RlXCJcbiAgICAgICAgICAgIDoga2V5ID09PSBcImNvbXBhbnlJZFwiXG4gICAgICAgICAgICA/IFwiY29tcGFueV9pZFwiXG4gICAgICAgICAgICA6IGtleTtcblxuICAgICAgICBzZXRDbGF1c2VzLnB1c2goYCR7ZGJLZXl9ID0gP2ApO1xuICAgICAgICBwYXJhbXMucHVzaChkYXRhW2tleV0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2V0Q2xhdXNlcy5wdXNoKFwidXBkYXRlZF9hdCA9IE5PVygpXCIpO1xuXG4gICAgY29uc3Qgc3FsID0gYFVQREFURSBwYXRpZW50cyBTRVQgJHtzZXRDbGF1c2VzLmpvaW4oXCIsIFwiKX0gV0hFUkUgaWQgPSA/YDtcbiAgICBwYXJhbXMucHVzaCh3aGVyZS5pZCk7XG5cbiAgICBhd2FpdCBxdWVyeShzcWwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZFVuaXF1ZSh3aGVyZSk7XG4gIH0sXG5cbiAgYXN5bmMgZGVsZXRlKHdoZXJlKSB7XG4gICAgY29uc3Qgc3FsID0gXCJERUxFVEUgRlJPTSBwYXRpZW50cyBXSEVSRSBpZCA9ID9cIjtcbiAgICBhd2FpdCBxdWVyeShzcWwsIFt3aGVyZS5pZF0pO1xuICAgIHJldHVybiB7IGlkOiB3aGVyZS5pZCB9O1xuICB9LFxuXG4gIGFzeW5jIGZpbmRGaXJzdChvcHRpb25zKSB7XG4gICAgbGV0IHNxbCA9IFwiU0VMRUNUICogRlJPTSBwYXRpZW50c1wiO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnMud2hlcmUpIHtcbiAgICAgIGNvbnN0IGNvbmRpdGlvbnMgPSBbXTtcblxuICAgICAgLy8gSGFuZGxlIG1yTnVtYmVyIHN0YXJ0c1dpdGhcbiAgICAgIGlmIChvcHRpb25zLndoZXJlLm1yTnVtYmVyICYmIG9wdGlvbnMud2hlcmUubXJOdW1iZXIuc3RhcnRzV2l0aCkge1xuICAgICAgICBjb25kaXRpb25zLnB1c2goXCJtcl9udW1iZXIgTElLRSA/XCIpO1xuICAgICAgICBwYXJhbXMucHVzaChgJHtvcHRpb25zLndoZXJlLm1yTnVtYmVyLnN0YXJ0c1dpdGh9JWApO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29uZGl0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNxbCArPSBgIFdIRVJFICR7Y29uZGl0aW9ucy5qb2luKFwiIEFORCBcIil9YDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgb3JkZXJCeVxuICAgIGlmIChvcHRpb25zLm9yZGVyQnkpIHtcbiAgICAgIGlmIChvcHRpb25zLm9yZGVyQnkubXJOdW1iZXIpIHtcbiAgICAgICAgc3FsICs9IGAgT1JERVIgQlkgbXJfbnVtYmVyICR7b3B0aW9ucy5vcmRlckJ5Lm1yTnVtYmVyLnRvVXBwZXJDYXNlKCl9YDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzcWwgKz0gXCIgTElNSVQgMVwiO1xuXG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHF1ZXJ5KHNxbCwgcGFyYW1zKTtcbiAgICByZXR1cm4gcmVzdWx0c1swXSB8fCBudWxsO1xuICB9LFxufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9ucyB1bnR1ayBDb21wYW55IG9wZXJhdGlvbnNcbmV4cG9ydCBjb25zdCBDb21wYW55ID0ge1xuICBhc3luYyBmaW5kVW5pcXVlKHdoZXJlKSB7XG4gICAgY29uc3Qgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIGNvbXBhbmllcyBXSEVSRSBpZCA9ID8gTElNSVQgMVwiO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBxdWVyeShzcWwsIFt3aGVyZS5pZF0pO1xuICAgIHJldHVybiByZXN1bHRzWzBdIHx8IG51bGw7XG4gIH0sXG5cbiAgYXN5bmMgZmluZE1hbnkob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IHNxbCA9IFwiU0VMRUNUICogRlJPTSBjb21wYW5pZXNcIjtcblxuICAgIGlmIChvcHRpb25zLm9yZGVyQnkgJiYgb3B0aW9ucy5vcmRlckJ5Lm5hbWUpIHtcbiAgICAgIHNxbCArPSBgIE9SREVSIEJZIG5hbWUgJHtvcHRpb25zLm9yZGVyQnkubmFtZS50b1VwcGVyQ2FzZSgpfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHF1ZXJ5KHNxbCk7XG4gIH0sXG5cbiAgYXN5bmMgY3JlYXRlKGRhdGEpIHtcbiAgICBjb25zdCBzcWwgPSBgXG4gICAgICBJTlNFUlQgSU5UTyBjb21wYW5pZXMgKG5hbWUsIGFkZHJlc3MsIHBob25lLCBlbWFpbCwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdClcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPywgTk9XKCksIE5PVygpKVxuICAgIGA7XG4gICAgY29uc3QgcGFyYW1zID0gW2RhdGEubmFtZSwgZGF0YS5hZGRyZXNzLCBkYXRhLnBob25lLCBkYXRhLmVtYWlsXTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBxdWVyeShzcWwsIHBhcmFtcyk7XG5cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kVW5pcXVlKHsgaWQ6IHJlc3VsdC5pbnNlcnRJZCB9KTtcbiAgfSxcblxuICBhc3luYyB1cGRhdGUod2hlcmUsIGRhdGEpIHtcbiAgICBjb25zdCBzZXRDbGF1c2VzID0gW107XG4gICAgY29uc3QgcGFyYW1zID0gW107XG5cbiAgICBbXCJuYW1lXCIsIFwiYWRkcmVzc1wiLCBcInBob25lXCIsIFwiZW1haWxcIl0uZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgIGlmIChkYXRhW2ZpZWxkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNldENsYXVzZXMucHVzaChgJHtmaWVsZH0gPSA/YCk7XG4gICAgICAgIHBhcmFtcy5wdXNoKGRhdGFbZmllbGRdKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHNldENsYXVzZXMucHVzaChcInVwZGF0ZWRfYXQgPSBOT1coKVwiKTtcblxuICAgIGNvbnN0IHNxbCA9IGBVUERBVEUgY29tcGFuaWVzIFNFVCAke3NldENsYXVzZXMuam9pbihcIiwgXCIpfSBXSEVSRSBpZCA9ID9gO1xuICAgIHBhcmFtcy5wdXNoKHdoZXJlLmlkKTtcblxuICAgIGF3YWl0IHF1ZXJ5KHNxbCwgcGFyYW1zKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kVW5pcXVlKHdoZXJlKTtcbiAgfSxcblxuICBhc3luYyBkZWxldGUod2hlcmUpIHtcbiAgICBjb25zdCBzcWwgPSBcIkRFTEVURSBGUk9NIGNvbXBhbmllcyBXSEVSRSBpZCA9ID9cIjtcbiAgICBhd2FpdCBxdWVyeShzcWwsIFt3aGVyZS5pZF0pO1xuICAgIHJldHVybiB7IGlkOiB3aGVyZS5pZCB9O1xuICB9LFxufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9ucyB1bnR1ayBEb2N0b3Igb3BlcmF0aW9uc1xuZXhwb3J0IGNvbnN0IERvY3RvciA9IHtcbiAgYXN5bmMgZmluZFVuaXF1ZSh3aGVyZSkge1xuICAgIGNvbnN0IHNxbCA9IFwiU0VMRUNUICogRlJPTSBkb2N0b3JzIFdIRVJFIGlkID0gPyBMSU1JVCAxXCI7XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHF1ZXJ5KHNxbCwgW3doZXJlLmlkXSk7XG4gICAgcmV0dXJuIHJlc3VsdHNbMF0gfHwgbnVsbDtcbiAgfSxcblxuICBhc3luYyBmaW5kTWFueShvcHRpb25zID0ge30pIHtcbiAgICBsZXQgc3FsID0gXCJTRUxFQ1QgKiBGUk9NIGRvY3RvcnNcIjtcblxuICAgIGlmIChvcHRpb25zLm9yZGVyQnkgJiYgb3B0aW9ucy5vcmRlckJ5Lm5hbWUpIHtcbiAgICAgIHNxbCArPSBgIE9SREVSIEJZIG5hbWUgJHtvcHRpb25zLm9yZGVyQnkubmFtZS50b1VwcGVyQ2FzZSgpfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHF1ZXJ5KHNxbCk7XG4gIH0sXG5cbiAgYXN5bmMgY3JlYXRlKGRhdGEpIHtcbiAgICBjb25zdCBzcWwgPSBgXG4gICAgICBJTlNFUlQgSU5UTyBkb2N0b3JzIChuYW1lLCBsaWNlbnNlX251bWJlciwgc3BlY2lhbGl6YXRpb24sIHBob25lLCBlbWFpbCwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdClcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgTk9XKCksIE5PVygpKVxuICAgIGA7XG4gICAgY29uc3QgcGFyYW1zID0gW1xuICAgICAgZGF0YS5uYW1lLFxuICAgICAgZGF0YS5saWNlbnNlTnVtYmVyLFxuICAgICAgZGF0YS5zcGVjaWFsaXphdGlvbixcbiAgICAgIGRhdGEucGhvbmUsXG4gICAgICBkYXRhLmVtYWlsLFxuICAgIF07XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCBwYXJhbXMpO1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZFVuaXF1ZSh7IGlkOiByZXN1bHQuaW5zZXJ0SWQgfSk7XG4gIH0sXG5cbiAgYXN5bmMgdXBkYXRlKHdoZXJlLCBkYXRhKSB7XG4gICAgY29uc3Qgc2V0Q2xhdXNlcyA9IFtdO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gICAgW1wibmFtZVwiLCBcImxpY2Vuc2VOdW1iZXJcIiwgXCJzcGVjaWFsaXphdGlvblwiLCBcInBob25lXCIsIFwiZW1haWxcIl0uZm9yRWFjaChcbiAgICAgIChmaWVsZCkgPT4ge1xuICAgICAgICBpZiAoZGF0YVtmaWVsZF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGNvbnN0IGRiRmllbGQgPSBmaWVsZCA9PT0gXCJsaWNlbnNlTnVtYmVyXCIgPyBcImxpY2Vuc2VfbnVtYmVyXCIgOiBmaWVsZDtcbiAgICAgICAgICBzZXRDbGF1c2VzLnB1c2goYCR7ZGJGaWVsZH0gPSA/YCk7XG4gICAgICAgICAgcGFyYW1zLnB1c2goZGF0YVtmaWVsZF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcblxuICAgIHNldENsYXVzZXMucHVzaChcInVwZGF0ZWRfYXQgPSBOT1coKVwiKTtcblxuICAgIGNvbnN0IHNxbCA9IGBVUERBVEUgZG9jdG9ycyBTRVQgJHtzZXRDbGF1c2VzLmpvaW4oXCIsIFwiKX0gV0hFUkUgaWQgPSA/YDtcbiAgICBwYXJhbXMucHVzaCh3aGVyZS5pZCk7XG5cbiAgICBhd2FpdCBxdWVyeShzcWwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZFVuaXF1ZSh3aGVyZSk7XG4gIH0sXG5cbiAgYXN5bmMgZGVsZXRlKHdoZXJlKSB7XG4gICAgY29uc3Qgc3FsID0gXCJERUxFVEUgRlJPTSBkb2N0b3JzIFdIRVJFIGlkID0gP1wiO1xuICAgIGF3YWl0IHF1ZXJ5KHNxbCwgW3doZXJlLmlkXSk7XG4gICAgcmV0dXJuIHsgaWQ6IHdoZXJlLmlkIH07XG4gIH0sXG59O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIHVudHVrIEluc3VyYW5jZSBvcGVyYXRpb25zXG5leHBvcnQgY29uc3QgSW5zdXJhbmNlID0ge1xuICBhc3luYyBmaW5kVW5pcXVlKHdoZXJlKSB7XG4gICAgY29uc3QgY29uZGl0aW9ucyA9IFtdO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gICAgaWYgKHdoZXJlLmlkKSB7XG4gICAgICBjb25kaXRpb25zLnB1c2goXCJpZCA9ID9cIik7XG4gICAgICBwYXJhbXMucHVzaCh3aGVyZS5pZCk7XG4gICAgfVxuICAgIGlmICh3aGVyZS5wYXRpZW50SWQpIHtcbiAgICAgIGNvbmRpdGlvbnMucHVzaChcInBhdGllbnRfaWQgPSA/XCIpO1xuICAgICAgcGFyYW1zLnB1c2god2hlcmUucGF0aWVudElkKTtcbiAgICB9XG5cbiAgICBjb25zdCBzcWwgPSBgU0VMRUNUICogRlJPTSBpbnN1cmFuY2UgV0hFUkUgJHtjb25kaXRpb25zLmpvaW4oXG4gICAgICBcIiBBTkQgXCJcbiAgICApfSBMSU1JVCAxYDtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgcXVlcnkoc3FsLCBwYXJhbXMpO1xuICAgIHJldHVybiByZXN1bHRzWzBdIHx8IG51bGw7XG4gIH0sXG5cbiAgYXN5bmMgZmluZE1hbnkob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IHNxbCA9IFwiU0VMRUNUICogRlJPTSBpbnN1cmFuY2VcIjtcblxuICAgIGlmIChvcHRpb25zLm9yZGVyQnkgJiYgb3B0aW9ucy5vcmRlckJ5LnByb3ZpZGVyKSB7XG4gICAgICBzcWwgKz0gYCBPUkRFUiBCWSBwcm92aWRlciAke29wdGlvbnMub3JkZXJCeS5wcm92aWRlci50b1VwcGVyQ2FzZSgpfWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHF1ZXJ5KHNxbCk7XG4gIH0sXG5cbiAgYXN5bmMgY3JlYXRlKGRhdGEpIHtcbiAgICBjb25zdCBzcWwgPSBgXG4gICAgICBJTlNFUlQgSU5UTyBpbnN1cmFuY2UgKHByb3ZpZGVyLCBudW1iZXIsIHR5cGUsIHN0YXR1cywgcGF0aWVudF9pZCwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdClcbiAgICAgIFZBTFVFUyAoPywgPywgPywgPywgPywgTk9XKCksIE5PVygpKVxuICAgIGA7XG4gICAgY29uc3QgcGFyYW1zID0gW1xuICAgICAgZGF0YS5wcm92aWRlcixcbiAgICAgIGRhdGEubnVtYmVyLFxuICAgICAgZGF0YS50eXBlLFxuICAgICAgZGF0YS5zdGF0dXMsXG4gICAgICBkYXRhLnBhdGllbnRJZCxcbiAgICBdO1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHF1ZXJ5KHNxbCwgcGFyYW1zKTtcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRVbmlxdWUoeyBpZDogcmVzdWx0Lmluc2VydElkIH0pO1xuICB9LFxuXG4gIGFzeW5jIHVwZGF0ZSh3aGVyZSwgZGF0YSkge1xuICAgIGNvbnN0IHNldENsYXVzZXMgPSBbXTtcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcblxuICAgIFtcInByb3ZpZGVyXCIsIFwibnVtYmVyXCIsIFwidHlwZVwiLCBcInN0YXR1c1wiXS5mb3JFYWNoKChmaWVsZCkgPT4ge1xuICAgICAgaWYgKGRhdGFbZmllbGRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2V0Q2xhdXNlcy5wdXNoKGAke2ZpZWxkfSA9ID9gKTtcbiAgICAgICAgcGFyYW1zLnB1c2goZGF0YVtmaWVsZF0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2V0Q2xhdXNlcy5wdXNoKFwidXBkYXRlZF9hdCA9IE5PVygpXCIpO1xuXG4gICAgY29uc3Qgc3FsID0gYFVQREFURSBpbnN1cmFuY2UgU0VUICR7c2V0Q2xhdXNlcy5qb2luKFwiLCBcIil9IFdIRVJFIGlkID0gP2A7XG4gICAgcGFyYW1zLnB1c2god2hlcmUuaWQpO1xuXG4gICAgYXdhaXQgcXVlcnkoc3FsLCBwYXJhbXMpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmZpbmRVbmlxdWUod2hlcmUpO1xuICB9LFxuXG4gIGFzeW5jIGRlbGV0ZSh3aGVyZSkge1xuICAgIGNvbnN0IHNxbCA9IFwiREVMRVRFIEZST00gaW5zdXJhbmNlIFdIRVJFIGlkID0gP1wiO1xuICAgIGF3YWl0IHF1ZXJ5KHNxbCwgW3doZXJlLmlkXSk7XG4gICAgcmV0dXJuIHsgaWQ6IHdoZXJlLmlkIH07XG4gIH0sXG5cbiAgYXN5bmMgZGVsZXRlTWFueSh3aGVyZSkge1xuICAgIGNvbnN0IHNxbCA9IFwiREVMRVRFIEZST00gaW5zdXJhbmNlIFdIRVJFIHBhdGllbnRfaWQgPSA/XCI7XG4gICAgcmV0dXJuIGF3YWl0IHF1ZXJ5KHNxbCwgW3doZXJlLnBhdGllbnRJZF0pO1xuICB9LFxufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9ucyB1bnR1ayBJQ0Qgb3BlcmF0aW9uc1xuZXhwb3J0IGNvbnN0IElDRCA9IHtcbiAgYXN5bmMgZmluZFVuaXF1ZSh3aGVyZSkge1xuICAgIGNvbnN0IHNxbCA9IFwiU0VMRUNUICogRlJPTSBpY2RfY29kZXMgV0hFUkUgaWQgPSA/IExJTUlUIDFcIjtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgcXVlcnkoc3FsLCBbd2hlcmUuaWRdKTtcbiAgICByZXR1cm4gcmVzdWx0c1swXSB8fCBudWxsO1xuICB9LFxuXG4gIGFzeW5jIGZpbmRNYW55KG9wdGlvbnMgPSB7fSkge1xuICAgIGxldCBzcWwgPSBcIlNFTEVDVCAqIEZST00gaWNkX2NvZGVzXCI7XG5cbiAgICBpZiAob3B0aW9ucy5vcmRlckJ5ICYmIG9wdGlvbnMub3JkZXJCeS5jb2RlKSB7XG4gICAgICBzcWwgKz0gYCBPUkRFUiBCWSBjb2RlICR7b3B0aW9ucy5vcmRlckJ5LmNvZGUudG9VcHBlckNhc2UoKX1gO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBxdWVyeShzcWwpO1xuICB9LFxuXG4gIGFzeW5jIGNyZWF0ZShkYXRhKSB7XG4gICAgY29uc3Qgc3FsID0gYFxuICAgICAgSU5TRVJUIElOVE8gaWNkX2NvZGVzIChjb2RlLCBkZXNjcmlwdGlvbiwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdClcbiAgICAgIFZBTFVFUyAoPywgPywgTk9XKCksIE5PVygpKVxuICAgIGA7XG4gICAgY29uc3QgcGFyYW1zID0gW2RhdGEuY29kZSwgZGF0YS5kZXNjcmlwdGlvbl07XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCBwYXJhbXMpO1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZFVuaXF1ZSh7IGlkOiByZXN1bHQuaW5zZXJ0SWQgfSk7XG4gIH0sXG5cbiAgYXN5bmMgdXBkYXRlKHdoZXJlLCBkYXRhKSB7XG4gICAgY29uc3Qgc2V0Q2xhdXNlcyA9IFtdO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gICAgW1wiY29kZVwiLCBcImRlc2NyaXB0aW9uXCJdLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgICBpZiAoZGF0YVtmaWVsZF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZXRDbGF1c2VzLnB1c2goYCR7ZmllbGR9ID0gP2ApO1xuICAgICAgICBwYXJhbXMucHVzaChkYXRhW2ZpZWxkXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzZXRDbGF1c2VzLnB1c2goXCJ1cGRhdGVkX2F0ID0gTk9XKClcIik7XG5cbiAgICBjb25zdCBzcWwgPSBgVVBEQVRFIGljZF9jb2RlcyBTRVQgJHtzZXRDbGF1c2VzLmpvaW4oXCIsIFwiKX0gV0hFUkUgaWQgPSA/YDtcbiAgICBwYXJhbXMucHVzaCh3aGVyZS5pZCk7XG5cbiAgICBhd2FpdCBxdWVyeShzcWwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZFVuaXF1ZSh3aGVyZSk7XG4gIH0sXG5cbiAgYXN5bmMgZGVsZXRlKHdoZXJlKSB7XG4gICAgY29uc3Qgc3FsID0gXCJERUxFVEUgRlJPTSBpY2RfY29kZXMgV0hFUkUgaWQgPSA/XCI7XG4gICAgYXdhaXQgcXVlcnkoc3FsLCBbd2hlcmUuaWRdKTtcbiAgICByZXR1cm4geyBpZDogd2hlcmUuaWQgfTtcbiAgfSxcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgdW50dWsgVHJlYXRtZW50IG9wZXJhdGlvbnNcbmV4cG9ydCBjb25zdCBUcmVhdG1lbnQgPSB7XG4gIGFzeW5jIGZpbmRVbmlxdWUod2hlcmUpIHtcbiAgICBjb25zdCBzcWwgPSBcIlNFTEVDVCAqIEZST00gdHJlYXRtZW50cyBXSEVSRSBpZCA9ID8gTElNSVQgMVwiO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBxdWVyeShzcWwsIFt3aGVyZS5pZF0pO1xuICAgIHJldHVybiByZXN1bHRzWzBdIHx8IG51bGw7XG4gIH0sXG5cbiAgYXN5bmMgZmluZE1hbnkob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IHNxbCA9IFwiU0VMRUNUICogRlJPTSB0cmVhdG1lbnRzXCI7XG5cbiAgICBpZiAob3B0aW9ucy5vcmRlckJ5ICYmIG9wdGlvbnMub3JkZXJCeS5uYW1lKSB7XG4gICAgICBzcWwgKz0gYCBPUkRFUiBCWSBuYW1lICR7b3B0aW9ucy5vcmRlckJ5Lm5hbWUudG9VcHBlckNhc2UoKX1gO1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBxdWVyeShzcWwpO1xuICB9LFxuXG4gIGFzeW5jIGNyZWF0ZShkYXRhKSB7XG4gICAgY29uc3Qgc3FsID0gYFxuICAgICAgSU5TRVJUIElOVE8gdHJlYXRtZW50cyAobmFtZSwgY29kZSwgcHJpY2UsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQpXG4gICAgICBWQUxVRVMgKD8sID8sID8sIE5PVygpLCBOT1coKSlcbiAgICBgO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtkYXRhLm5hbWUsIGRhdGEuY29kZSwgZGF0YS5wcmljZV07XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCBwYXJhbXMpO1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZFVuaXF1ZSh7IGlkOiByZXN1bHQuaW5zZXJ0SWQgfSk7XG4gIH0sXG5cbiAgYXN5bmMgdXBkYXRlKHdoZXJlLCBkYXRhKSB7XG4gICAgY29uc3Qgc2V0Q2xhdXNlcyA9IFtdO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gICAgW1wibmFtZVwiLCBcImNvZGVcIiwgXCJwcmljZVwiXS5mb3JFYWNoKChmaWVsZCkgPT4ge1xuICAgICAgaWYgKGRhdGFbZmllbGRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgc2V0Q2xhdXNlcy5wdXNoKGAke2ZpZWxkfSA9ID9gKTtcbiAgICAgICAgcGFyYW1zLnB1c2goZGF0YVtmaWVsZF0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgc2V0Q2xhdXNlcy5wdXNoKFwidXBkYXRlZF9hdCA9IE5PVygpXCIpO1xuXG4gICAgY29uc3Qgc3FsID0gYFVQREFURSB0cmVhdG1lbnRzIFNFVCAke3NldENsYXVzZXMuam9pbihcIiwgXCIpfSBXSEVSRSBpZCA9ID9gO1xuICAgIHBhcmFtcy5wdXNoKHdoZXJlLmlkKTtcblxuICAgIGF3YWl0IHF1ZXJ5KHNxbCwgcGFyYW1zKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kVW5pcXVlKHdoZXJlKTtcbiAgfSxcblxuICBhc3luYyBkZWxldGUod2hlcmUpIHtcbiAgICBjb25zdCBzcWwgPSBcIkRFTEVURSBGUk9NIHRyZWF0bWVudHMgV0hFUkUgaWQgPSA/XCI7XG4gICAgYXdhaXQgcXVlcnkoc3FsLCBbd2hlcmUuaWRdKTtcbiAgICByZXR1cm4geyBpZDogd2hlcmUuaWQgfTtcbiAgfSxcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbnMgdW50dWsgUG9seWNsaW5pYyBvcGVyYXRpb25zXG5leHBvcnQgY29uc3QgUG9seWNsaW5pYyA9IHtcbiAgYXN5bmMgZmluZFVuaXF1ZSh3aGVyZSkge1xuICAgIGNvbnN0IHNxbCA9IFwiU0VMRUNUICogRlJPTSBwb2x5Y2xpbmljcyBXSEVSRSBpZCA9ID8gTElNSVQgMVwiO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBxdWVyeShzcWwsIFt3aGVyZS5pZF0pO1xuICAgIHJldHVybiByZXN1bHRzWzBdIHx8IG51bGw7XG4gIH0sXG5cbiAgYXN5bmMgZmluZE1hbnkob3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IHNxbCA9IFwiU0VMRUNUICogRlJPTSBwb2x5Y2xpbmljc1wiO1xuXG4gICAgaWYgKG9wdGlvbnMub3JkZXJCeSAmJiBvcHRpb25zLm9yZGVyQnkubmFtZSkge1xuICAgICAgc3FsICs9IGAgT1JERVIgQlkgbmFtZSAke29wdGlvbnMub3JkZXJCeS5uYW1lLnRvVXBwZXJDYXNlKCl9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgcXVlcnkoc3FsKTtcbiAgfSxcblxuICBhc3luYyBjcmVhdGUoZGF0YSkge1xuICAgIGNvbnN0IHNxbCA9IGBcbiAgICAgIElOU0VSVCBJTlRPIHBvbHljbGluaWNzIChuYW1lLCBkZXNjcmlwdGlvbiwgY3JlYXRlZF9hdCwgdXBkYXRlZF9hdClcbiAgICAgIFZBTFVFUyAoPywgPywgTk9XKCksIE5PVygpKVxuICAgIGA7XG4gICAgY29uc3QgcGFyYW1zID0gW2RhdGEubmFtZSwgZGF0YS5kZXNjcmlwdGlvbl07XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCBwYXJhbXMpO1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZFVuaXF1ZSh7IGlkOiByZXN1bHQuaW5zZXJ0SWQgfSk7XG4gIH0sXG5cbiAgYXN5bmMgdXBkYXRlKHdoZXJlLCBkYXRhKSB7XG4gICAgY29uc3Qgc2V0Q2xhdXNlcyA9IFtdO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gICAgW1wibmFtZVwiLCBcImRlc2NyaXB0aW9uXCJdLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgICBpZiAoZGF0YVtmaWVsZF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzZXRDbGF1c2VzLnB1c2goYCR7ZmllbGR9ID0gP2ApO1xuICAgICAgICBwYXJhbXMucHVzaChkYXRhW2ZpZWxkXSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBzZXRDbGF1c2VzLnB1c2goXCJ1cGRhdGVkX2F0ID0gTk9XKClcIik7XG5cbiAgICBjb25zdCBzcWwgPSBgVVBEQVRFIHBvbHljbGluaWNzIFNFVCAke3NldENsYXVzZXMuam9pbihcIiwgXCIpfSBXSEVSRSBpZCA9ID9gO1xuICAgIHBhcmFtcy5wdXNoKHdoZXJlLmlkKTtcblxuICAgIGF3YWl0IHF1ZXJ5KHNxbCwgcGFyYW1zKTtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5maW5kVW5pcXVlKHdoZXJlKTtcbiAgfSxcblxuICBhc3luYyBkZWxldGUod2hlcmUpIHtcbiAgICBjb25zdCBzcWwgPSBcIkRFTEVURSBGUk9NIHBvbHljbGluaWNzIFdIRVJFIGlkID0gP1wiO1xuICAgIGF3YWl0IHF1ZXJ5KHNxbCwgW3doZXJlLmlkXSk7XG4gICAgcmV0dXJuIHsgaWQ6IHdoZXJlLmlkIH07XG4gIH0sXG59O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb25zIHVudHVrIFBvc3RhbENvZGUgb3BlcmF0aW9uc1xuZXhwb3J0IGNvbnN0IFBvc3RhbENvZGUgPSB7XG4gIGFzeW5jIGZpbmRGaXJzdCh3aGVyZSkge1xuICAgIGNvbnN0IGNvbmRpdGlvbnMgPSBbXTtcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcblxuICAgIGlmICh3aGVyZS5jb2RlKSB7XG4gICAgICBjb25kaXRpb25zLnB1c2goXCJjb2RlID0gP1wiKTtcbiAgICAgIHBhcmFtcy5wdXNoKHdoZXJlLmNvZGUpO1xuICAgIH1cblxuICAgIGNvbnN0IHNxbCA9IGBTRUxFQ1QgKiBGUk9NIHBvc3RhbF9jb2RlcyBXSEVSRSAke2NvbmRpdGlvbnMuam9pbihcbiAgICAgIFwiIEFORCBcIlxuICAgICl9IExJTUlUIDFgO1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBxdWVyeShzcWwsIHBhcmFtcyk7XG4gICAgcmV0dXJuIHJlc3VsdHNbMF0gfHwgbnVsbDtcbiAgfSxcblxuICBhc3luYyBjcmVhdGUoZGF0YSkge1xuICAgIGNvbnN0IHNxbCA9IGBcbiAgICAgIElOU0VSVCBJTlRPIHBvc3RhbF9jb2RlcyAoY29kZSwgY2l0eSwgcHJvdmluY2UsIGNyZWF0ZWRfYXQsIHVwZGF0ZWRfYXQpXG4gICAgICBWQUxVRVMgKD8sID8sID8sIE5PVygpLCBOT1coKSlcbiAgICBgO1xuICAgIGNvbnN0IHBhcmFtcyA9IFtkYXRhLmNvZGUsIGRhdGEuY2l0eSwgZGF0YS5wcm92aW5jZV07XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcXVlcnkoc3FsLCBwYXJhbXMpO1xuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMuZmluZEZpcnN0KHsgY29kZTogZGF0YS5jb2RlIH0pO1xuICB9LFxufTtcblxuLy8gVHJhbnNhY3Rpb24gaGVscGVyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gJHRyYW5zYWN0aW9uKG9wZXJhdGlvbnMpIHtcbiAgY29uc3QgY29ubmVjdGlvbiA9IGF3YWl0IGdldENvbm5lY3Rpb24oKTtcbiAgdHJ5IHtcbiAgICBhd2FpdCBjb25uZWN0aW9uLmJlZ2luVHJhbnNhY3Rpb24oKTtcblxuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IG9wZXJhdGlvbiBvZiBvcGVyYXRpb25zKSB7XG4gICAgICAvLyBFeGVjdXRlIGVhY2ggb3BlcmF0aW9uIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAgICAgIGlmICh0eXBlb2Ygb3BlcmF0aW9uID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlcmF0aW9uKCk7XG4gICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWl0KCk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgYXdhaXQgY29ubmVjdGlvbi5yb2xsYmFjaygpO1xuICAgIHRocm93IGVycm9yO1xuICB9IGZpbmFsbHkge1xuICAgIGNvbm5lY3Rpb24ucmVsZWFzZSgpO1xuICB9XG59XG5cbi8vIEZ1bmdzaSBoZWxwZXIgdW50dWsgb3BlcmFzaSBDUlVEIHBhc2llbiAoYmFja3dhcmQgY29tcGF0aWJpbGl0eSlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYXRpZW50cyhzZWFyY2ggPSBcIlwiLCBwYWdlID0gMSwgbGltaXQgPSAxMCkge1xuICBjb25zdCBvZmZzZXQgPSAocGFnZSAtIDEpICogbGltaXQ7XG5cbiAgbGV0IHNxbCA9IFwiU0VMRUNUICogRlJPTSBwYXRpZW50c1wiO1xuICBsZXQgcGFyYW1zID0gW107XG5cbiAgaWYgKHNlYXJjaCkge1xuICAgIHNxbCArPSBcIiBXSEVSRSBuYW1lIExJS0UgPyBPUiBtcm4gTElLRSA/XCI7XG4gICAgcGFyYW1zID0gW2AlJHtzZWFyY2h9JWAsIGAlJHtzZWFyY2h9JWBdO1xuICB9XG5cbiAgc3FsICs9IFwiIE9SREVSIEJZIGNyZWF0ZWRfYXQgREVTQyBMSU1JVCA/IE9GRlNFVCA/XCI7XG4gIHBhcmFtcy5wdXNoKHBhcnNlSW50KGxpbWl0KSwgcGFyc2VJbnQob2Zmc2V0KSk7XG5cbiAgY29uc3QgcGF0aWVudHMgPSBhd2FpdCBxdWVyeShzcWwsIHBhcmFtcyk7XG5cbiAgLy8gRGFwYXRrYW4gdG90YWxcbiAgbGV0IGNvdW50U3FsID0gXCJTRUxFQ1QgQ09VTlQoKikgYXMgdG90YWwgRlJPTSBwYXRpZW50c1wiO1xuICBpZiAoc2VhcmNoKSB7XG4gICAgY291bnRTcWwgKz0gXCIgV0hFUkUgbmFtZSBMSUtFID8gT1IgbXJuIExJS0UgP1wiO1xuICB9XG5cbiAgY29uc3QgY291bnRSZXN1bHRzID0gYXdhaXQgcXVlcnkoXG4gICAgY291bnRTcWwsXG4gICAgc2VhcmNoID8gW2AlJHtzZWFyY2h9JWAsIGAlJHtzZWFyY2h9JWBdIDogW11cbiAgKTtcbiAgY29uc3QgdG90YWwgPSBjb3VudFJlc3VsdHNbMF0/LnRvdGFsIHx8IDA7XG5cbiAgcmV0dXJuIHtcbiAgICBkYXRhOiBwYXRpZW50cyxcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICB0b3RhbCxcbiAgICAgIHBhZ2U6IHBhcnNlSW50KHBhZ2UpLFxuICAgICAgbGltaXQ6IHBhcnNlSW50KGxpbWl0KSxcbiAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCh0b3RhbCAvIGxpbWl0KSxcbiAgICB9LFxuICB9O1xufVxuXG4vLyBFeHBvcnQgZGVmYXVsdCBvYmplY3QgdW50dWsga29tcGF0aWJpbGl0YXMgZGVuZ2FuIGNvZGUgeWFuZyBtdW5na2luIG1hc2loIG1lbmdndW5ha2FuIHByaXNtYS4qIHN5bnRheFxuZXhwb3J0IGRlZmF1bHQge1xuICB1c2VyOiBVc2VyLFxuICBwYXRpZW50OiBQYXRpZW50LFxuICBjb21wYW55OiBDb21wYW55LFxuICBkb2N0b3I6IERvY3RvcixcbiAgaW5zdXJhbmNlOiBJbnN1cmFuY2UsXG4gIGljZDogSUNELFxuICB0cmVhdG1lbnQ6IFRyZWF0bWVudCxcbiAgcG9seWNsaW5pYzogUG9seWNsaW5pYyxcbiAgcG9zdGFsQ29kZTogUG9zdGFsQ29kZSxcbiAgJHRyYW5zYWN0aW9uLFxuICAkZGlzY29ubmVjdDogKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksXG59O1xuIl0sIm5hbWVzIjpbInF1ZXJ5IiwicmF3UXVlcnkiLCJnZXRDb25uZWN0aW9uIiwiVXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImNvbmRpdGlvbnMiLCJwYXJhbXMiLCJpZCIsInB1c2giLCJlbWFpbCIsInNxbCIsImpvaW4iLCJyZXN1bHRzIiwiZmluZE1hbnkiLCJvcHRpb25zIiwicm9sZSIsImxlbmd0aCIsIm9yZGVyQnkiLCJjcmVhdGVkQXQiLCJ0b1VwcGVyQ2FzZSIsImNyZWF0ZSIsImRhdGEiLCJwYXNzd29yZCIsIm5hbWUiLCJyZXN1bHQiLCJpbnNlcnRJZCIsInVwZGF0ZSIsInNldENsYXVzZXMiLCJ1bmRlZmluZWQiLCJQYXRpZW50IiwibXJOdW1iZXIiLCJPUiIsIm9yQ29uZGl0aW9ucyIsImZvckVhY2giLCJjb25kaXRpb24iLCJjb250YWlucyIsIm5payIsImluY2x1ZGUiLCJpbnN1cmFuY2UiLCJ0YWtlIiwiYmlydGhEYXRlIiwiZ2VuZGVyIiwiYmxvb2RUeXBlIiwib2NjdXBhdGlvbiIsIm1hcml0YWxTdGF0dXMiLCJuaXAiLCJjaXRpemVuc2hpcCIsImFkZHJlc3MiLCJwaG9uZSIsInByb3ZpbmNlSWQiLCJwcm92aW5jZU5hbWUiLCJjaXR5SWQiLCJjaXR5TmFtZSIsImRpc3RyaWN0SWQiLCJkaXN0cmljdE5hbWUiLCJ2aWxsYWdlSWQiLCJ2aWxsYWdlTmFtZSIsInBvc3RhbENvZGUiLCJjb21wYW55SWQiLCJPYmplY3QiLCJrZXlzIiwia2V5IiwiZGJLZXkiLCJkZWxldGUiLCJmaW5kRmlyc3QiLCJzdGFydHNXaXRoIiwiQ29tcGFueSIsImZpZWxkIiwiRG9jdG9yIiwibGljZW5zZU51bWJlciIsInNwZWNpYWxpemF0aW9uIiwiZGJGaWVsZCIsIkluc3VyYW5jZSIsInBhdGllbnRJZCIsInByb3ZpZGVyIiwibnVtYmVyIiwidHlwZSIsInN0YXR1cyIsImRlbGV0ZU1hbnkiLCJJQ0QiLCJjb2RlIiwiZGVzY3JpcHRpb24iLCJUcmVhdG1lbnQiLCJwcmljZSIsIlBvbHljbGluaWMiLCJQb3N0YWxDb2RlIiwiY2l0eSIsInByb3ZpbmNlIiwiJHRyYW5zYWN0aW9uIiwib3BlcmF0aW9ucyIsImNvbm5lY3Rpb24iLCJiZWdpblRyYW5zYWN0aW9uIiwib3BlcmF0aW9uIiwiY29tbWl0IiwiZXJyb3IiLCJyb2xsYmFjayIsInJlbGVhc2UiLCJnZXRQYXRpZW50cyIsInNlYXJjaCIsInBhZ2UiLCJsaW1pdCIsIm9mZnNldCIsInBhcnNlSW50IiwicGF0aWVudHMiLCJjb3VudFNxbCIsImNvdW50UmVzdWx0cyIsInRvdGFsIiwicGFnaW5hdGlvbiIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsInVzZXIiLCJwYXRpZW50IiwiY29tcGFueSIsImRvY3RvciIsImljZCIsInRyZWF0bWVudCIsInBvbHljbGluaWMiLCIkZGlzY29ubmVjdCIsIlByb21pc2UiLCJyZXNvbHZlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/mysql2","vendor-chunks/aws-ssl-profiles","vendor-chunks/iconv-lite","vendor-chunks/long","vendor-chunks/named-placeholders","vendor-chunks/denque","vendor-chunks/dotenv","vendor-chunks/is-property","vendor-chunks/lru.min","vendor-chunks/sqlstring","vendor-chunks/seq-queue","vendor-chunks/generate-function","vendor-chunks/safer-buffer"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fpatients%2Froute&page=%2Fapi%2Fpatients%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fpatients%2Froute.js&appDir=%2FVolumes%2FData-2%2FPHC%2FProject%2Fdash-app%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FVolumes%2FData-2%2FPHC%2FProject%2Fdash-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();