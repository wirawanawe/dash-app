(()=>{var e={};e.id=289,e.ids=[289],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},53965:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=r(70260),s=r(28203),l=r(25155),n=r.n(l),o=r(67292),i={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let d=["",{children:["doctors",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,29109)),"/Volumes/Data-2/PHC/Project/dash-app/app/doctors/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,38301)),"/Volumes/Data-2/PHC/Project/dash-app/app/layout.js"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Volumes/Data-2/PHC/Project/dash-app/app/doctors/page.js"],m={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/doctors/page",pathname:"/doctors",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63345:(e,t,r)=>{Promise.resolve().then(r.bind(r,29109))},53617:(e,t,r)=>{Promise.resolve().then(r.bind(r,16367))},16367:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(45512),s=r(58009),l=r(52964);function n({doctor:e,onSubmit:t,onCancel:r}){let[l,n]=(0,s.useState)({name:"",specialist:"",license_number:"",phone:"",email:"",address:""}),[o,i]=(0,s.useState)({}),d=e=>{let{name:t,value:r}=e.target;n({...l,[t]:r}),o[t]&&i({...o,[t]:null})},c=()=>{let e={};return l.name.trim()||(e.name="Nama dokter harus diisi"),l.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)&&(e.email="Format email tidak valid"),e};return(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-black",children:e?"Edit Dokter":"Tambah Dokter Baru"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault();let r=c();if(Object.keys(r).length>0){i(r);return}t(l)},children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:["Nama Dokter ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:l.name,onChange:d,className:`w-full p-2 border rounded-md ${o.name?"border-red-500":"border-gray-300"}`}),o.name&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.name})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"specialist",className:"block text-sm font-medium text-gray-700 mb-1",children:"Spesialis"}),(0,a.jsx)("input",{type:"text",id:"specialist",name:"specialist",value:l.specialist,onChange:d,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"license_number",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nomor SIP"}),(0,a.jsx)("input",{type:"text",id:"license_number",name:"license_number",value:l.license_number,onChange:d,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telepon"}),(0,a.jsx)("input",{type:"text",id:"phone",name:"phone",value:l.phone,onChange:d,className:"w-full p-2 border border-gray-300 rounded-md"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:l.email,onChange:d,className:`w-full p-2 border rounded-md ${o.email?"border-red-500":"border-gray-300"}`}),o.email&&(0,a.jsx)("p",{className:"text-red-500 text-xs mt-1",children:o.email})]}),(0,a.jsxs)("div",{className:"mb-4 md:col-span-2",children:[(0,a.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat"}),(0,a.jsx)("textarea",{id:"address",name:"address",value:l.address,onChange:d,rows:"3",className:"w-full p-2 border border-gray-300 rounded-md"})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,a.jsx)("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400",children:"Batal"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-[#E22345] text-white rounded-md hover:bg-red-600",children:e?"Update":"Simpan"})]})]})]})}var o=r(22403),i=r(44098);function d(){let[e,t]=(0,s.useState)([]),[r,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null),[p,x]=(0,s.useState)(!0),[u,h]=(0,s.useState)(""),b=async(e="")=>{try{let r;x(!0);let a="/api/doctors";e&&(a+=`?search=${encodeURIComponent(e)}`);try{if(!(r=await fetch(a)).ok){let e=await r.json().catch(()=>({}));throw console.error("Server error:",r.status,e),Error(`HTTP error! Status: ${r.status}. ${e.message||""}`)}}catch(e){console.error("Network error:",e),t([]),x(!1),e.message.includes("ER_ACCESS_DENIED_ERROR")||e.message.includes("ECONNREFUSED")?o.Ay.error("Database connection error. Please check MySQL credentials."):e.message.includes("500")?o.Ay.error("Server error: Database query failed. Please check server logs."):o.Ay.error("Tidak dapat terhubung ke server. Coba lagi nanti.");return}let s=await r.json();t(Array.isArray(s)?s:[]),x(!1)}catch(e){console.error("Error in fetchDoctors:",e),t([]),x(!1),o.Ay.error("Gagal mengambil data dokter")}},j=async e=>{try{let t=await fetch("/api/doctors"+(c?`/${c.id}`:""),{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.message||"Failed to save")}o.Ay.success(c?"Dokter berhasil diupdate":"Dokter berhasil ditambahkan"),d(!1),b()}catch(e){console.error("Error:",e),o.Ay.error(e.message||"Gagal menyimpan dokter")}},g=async e=>{if(confirm("Apakah Anda yakin ingin menghapus dokter ini?"))try{if(!(await fetch(`/api/doctors/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete");o.Ay.success("Dokter berhasil dihapus"),b()}catch(e){console.error("Error:",e),o.Ay.error("Gagal menghapus dokter")}};return(0,a.jsx)(l.A,{children:(0,a.jsxs)("div",{className:"container mx-auto p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-black",children:"Manajemen Dokter"}),(0,a.jsx)("button",{onClick:()=>{m(null),d(!0)},className:"bg-[#E22345] text-white px-4 py-2 rounded-lg hover:bg-red-600",children:"Tambah Dokter"})]}),r&&(0,a.jsx)(n,{doctor:c,onSubmit:j,onCancel:()=>{m(null),d(!1)}}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),b(u)},className:"flex",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Cari dokter...",value:u,onChange:e=>h(e.target.value),className:"w-full p-2 pl-10 border border-gray-300 rounded-lg"}),(0,a.jsx)(i.KSO,{className:"absolute left-3 top-3 text-gray-400"})]}),(0,a.jsx)("button",{type:"submit",className:"ml-2 bg-[#E22345] text-white px-4 py-2 rounded-lg hover:bg-red-600",children:"Cari"})]})}),p?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#E22345]"})}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-black uppercase",children:"Nama"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-black uppercase",children:"Spesialis"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-black uppercase",children:"Nomor SIP"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-black uppercase",children:"Kontak"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-black uppercase",children:"Aksi"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:"Tidak ada data dokter"})}):e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-black",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-black",children:e.specialist||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-black",children:e.license_number||"-"}),(0,a.jsxs)("td",{className:"px-6 py-4 text-black",children:[(0,a.jsx)("div",{children:e.phone||"-"}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.email||""})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-black",children:[(0,a.jsxs)("button",{onClick:()=>{m(e),d(!0)},className:"text-blue-600 hover:text-blue-900 mr-4",children:[(0,a.jsx)(i.uO9,{className:"inline mr-1"})," Edit"]}),(0,a.jsxs)("button",{onClick:()=>g(e.id),className:"text-red-600 hover:text-red-900",children:[(0,a.jsx)(i.qbC,{className:"inline mr-1"})," Hapus"]})]})]},e.id))})]})})]})})}},29109:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Volumes/Data-2/PHC/Project/dash-app/app/doctors/page.js\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Volumes/Data-2/PHC/Project/dash-app/app/doctors/page.js","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[5994,4763,8077,8531,4098,5132],()=>r(53965));module.exports=a})();